webpackJsonp([1],[function(e,exports,t){e.exports=t.p+"44fed91f69f09c95876314a8e23f311e.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports){e.exports='<p ng-repeat="error in errors">\n    {{error}}\n</p>\n'},,function(e,exports,t){"use strict";e.exports=["$scope","$translate","$rootScope","$location","RoleEndpoint","PermissionEndpoint",function(e,t,n,s,i,a){if(!1===n.hasManageSettingsPermission())return s.path("/");t("tool.manage_roles").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.$emit("event:mode:change","settings")}]},function(e,exports,t){"use strict";e.exports=["$scope","$translate","$rootScope","$location","WebhookEndpoint",function(e,t,n,s,i){if(!1===n.hasManageSettingsPermission())return s.path("/");t("tool.manage_webhooks").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.$emit("event:mode:change","settings")}]},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n                <li><a href="/settings/categories" translate>app.categories</a></li>\n            </ol>\n            <h1 class="mode-context-title" ng-show="category.id" translate>app.edit_category</h1>\n            <h1 class="mode-context-title" ng-show="!category.id" translate>app.add_category</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n        <div class="mode-context-body">\n        </div>\n    </div>\n    <main role="main">\n        \x3c!-- toolbar --\x3e\n        <div class="toolbar">\n            <div class="button-group">\n                <button type="button" class="button-flat" ng-click="cancel()" translate>app.cancel</button>\n                <button class="button-alpha" type="button" ng-click="saveCategory(category)" type="submit" ng-disabled="form.$invalid" ng-if="!processing">\n                {{save}}</button>\n                <button type="submit" class="button-alpha"  disabled ng-if="processing">{{saving}}\n                  <div class="loading">\n                    <div class="line"></div>\n                    <div class="line"></div>\n                    <div class="line"></div>\n                  </div>\n                </button>\n            </div>\n        </div>\n        \x3c!-- end toolbar --\x3e\n\n        \x3c!-- start edit --\x3e\n\n        <div class="full-col">\n          <form name="form">\n            <div class="form-sheet">\n              \x3c!-- Title --\x3e\n              <div class="form-field title">\n                <label class="hidden" translate="category.editor.name"></label>\n                <input type="text" placeholder="{{\'category.editor.name\' | translate}}" ng-minlength="2" ng-maxlength="255" ng-model="category.tag" required>\n              </div>\n              \x3c!-- Description --\x3e\n              <div class="form-field">\n                <label translate>category.editor.description</label>\n                <textarea name="description" data-min-rows=\'1\' rows=\'1\' ng-maxlength="150" ng-model="category.description"></textarea>\n              </div>\n              \x3c!-- Parent/child-relations --\x3e\n              <fieldset\n                class="custom-fieldset init"\n                dropdown\n                ng-show="!isParent"\n              >\n                <legend\n                  class="dropdown-trigger init active"\n                  data-toggle="dropdown-menu"\n                  dropdown-toggle\n                >\n                  <span class="legend-label" translate="app.this_category_is_child_to" translate-values="{ parent: getParentName() }">This category is a child to</span>\n                  <svg class="iconic chevron">\n                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n                  </svg>\n                </legend>\n                <div class="dropdown-menu init" dropdown-menu>\n                  <div class="form-field radio">\n                      <label for="parent_label-nothing">\n                          <input\n                            type="radio"\n                            name="parent_label"\n                            id="parent_label-nothing"\n                            ng-value="null"\n                            ng-checked="category.parent_id === null"\n                            ng-model="category.parent_id"\n                            />\n                          <span translate="app.nothing">Nothing</span>\n                      </label>\n                  </div>\n\n                  <div class="form-field radio" ng-repeat="parent in parents">\n                      <label for="parent_label-{{parent.id}}">\n                          <input\n                            type="radio"\n                            name="parent_label"\n                            id="parent_label-{{parent.id}}"\n                            ng-checked="parent.id === category.parent_id"\n                            ng-value="parent.id"\n                            ng-model="category.parent_id"\n                          />\n                          {{parent.tag}}\n                      </label>\n                  </div>\n                </div>\n              </fieldset>\n              \x3c!-- Who can see and add --\x3e\n              <role-selector model="category" title="\'app.who_can_see_this_category\'" ng-show="!category.parent_id"></role-selector>\n              <div class="form-field" ng-show="category.parent_id">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#people"></use>\n                </svg>\n                <span translate>category.child_permissions</span>\n              </div>\n            </div>\n          </form>\n          <div class="form-sheet" ng-show="category.id">\n             <div class="form-sheet-summary">\n                 <h3 class="form-sheet-title" translate>category.delete_this_category</h3>\n             </div>\n\n             <div class="form-field">\n                 <p translate>category.delete_category_desc</p>\n\n                 <button class="button-destructive" ng-click="deleteCategory(category)">\n                     <svg class="iconic">\n                         <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                     </svg>\n                     <span class="button-label" translate>category.delete_category</span>\n                 </button>\n             </div>\n\n          </div>\n        </div>\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n                <li><a href="/settings/roles" translate>app.roles</a></li>\n            </ol>\n            <h1 class="mode-context-title" ng-show="role.id" translate>app.edit_role</h1>\n            <h1 class="mode-context-title" ng-show="!role.id" translate>app.add_role</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        <div custom-roles-editor class="main-col">\n\n            \x3c!-- toolbar --\x3e\n            <div class="toolbar">\n                <div class="button-group">\n                    <button type="button" class="button-flat" ng-click="cancel()" translate>app.cancel</button>\n                    <button type="submit" class="button-alpha"  ng-if="!saving_role"  ng-click="saveRole(role)">{{save}}</button>\n                    <button type="submit" class="button-alpha"  disabled ng-if="saving_role">{{saving}}\n                      <div class="loading">\n                          <div class="line"></div>\n                          <div class="line"></div>\n                          <div class="line"></div>\n                      </div>\n                  </button>\n                </div>\n            </div>\n            \x3c!-- end toolbar --\x3e\n\n            <form>\n                <div class="form-sheet">\n                   <div class="form-field title">\n                       <label class="hidden" translate>role.name</label>\n                       <input type="text" placeholder="{{\'role.name\' | translate}}" ng-minlength="3" ng-maxlength="150" ng-model="role.display_name" required>\n                   </div>\n\n                    <div class="form-field">\n                        <label translate>role.description</label>\n                        <textarea name="description" data-min-rows=\'1\' rows=\'1\' ng-maxlength="150" ng-model="role.description"></textarea>\n                    </div>\n\n                   <fieldset>\n                       <legend translate>role.permissions</legend>\n\n                       <div class="alert" ng-hide="permissions.length">\n                           <p ng-hide="permissions.length"><em translate>empty.permission</em></p>\n                       </div>\n\n                       <div class="form-field checkbox" ng-repeat="permission in permissions" ng-if="role.name == \'admin\'">\n                           <label for="{{permission.id}}">\n                               <input id="{{permission.id}}" type="checkbox" disabled checked="checked">\n                               {{permission.name}}\n                           </label>\n                       </div>\n\n                       <div class="form-field checkbox" ng-repeat="permission in permissions" ng-if="role.name != \'admin\'">\n                           <label for="{{permission.id}}">\n                               <input id="{{permission.id}}" type="checkbox" value="permission.name" checklist-model="role.permissions" checklist-value="permission.name">\n                               {{permission.name}}\n                           </label>\n                       </div>\n                   </fieldset>\n                </div>\n\n                <div ng-if="!role.protected" class="form-sheet" ng-show="role.id">\n                   <div class="form-sheet-summary">\n                       <h3 class="form-sheet-title" translate>role.delete_role</h3>\n                   </div>\n\n                   <div class="form-field">\n                       <p translate>role.delete_role_desc</p>\n\n                       <button class="button-destructive" ng-click="deleteRole(role)">\n                           <svg class="iconic">\n                               <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                           </svg>\n                           <span class="button-label" translate>role.delete_role</span>\n                       </button>\n                   </div>\n\n                </div>\n            </form>\n\n        </div>\n\n    </main>\n</div>\n'},function(e,exports){e.exports="<survey-editor survey-id='surveyId' action-type='actionType'></survey-editor>\n"},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n                <li><a href="/settings/users" translate>app.users</a></li>\n            </ol>\n            <h1 class="mode-context-title" ng-show="user.id" translate>app.edit_user</h1>\n            <h1 class="mode-context-title" ng-show="!user.id" translate>app.add_user</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        <div custom-users-editor class="main-col">\n\n            \x3c!-- toolbar --\x3e\n            <div class="toolbar">\n                <div class="button-group">\n                    <button type="button" class="button-flat" ng-click="cancel()" translate>app.cancel</button>\n                    <button class="button-alpha" type="button" ng-click="saveUser(user)" type="submit" ng-disabled="form.$invalid" ng-if="!saving_user">{{save}}</button>\n                    <button type="submit" class="button-alpha"  disabled ng-if="saving_user">{{saving}}\n                        <div class="loading">\n                            <div class="line"></div>\n                            <div class="line"></div>\n                            <div class="line"></div>\n                        </div>\n                    </button>\n                </div>\n            </div>\n            \x3c!-- end toolbar --\x3e\n\n            <form name="form">\n                <div class="form-sheet">\n                    <div class="form-field title" ng-class="{ \'error\': form.full_name.$invalid && form.full_name.$dirty }">\n                        <label class="hidden" translate>user.full_name</label>\n                        <input type="text" placeholder="{{\'user_create.full_name\' | translate}}" ng-maxlength="150" ng-model="user.realname" name="full_name" required>\n                        <div ng-repeat="(error, value) in form.full_name.$error"\n                            ng-show="form.full_name.$dirty"\n                            class="alert error">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                            </svg>\n                            <span translate="{{\'user.valid.full_name.\' + error}}" translate-default="{{error}}"></span>\n                        </div>\n                    </div>\n\n                    <div class="form-field" ng-class="{ \'error\': form.email.$invalid && form.email.$dirty }">\n                        <label class="hidden" translate>user.email</label>\n                        <input type="email" placeholder="{{\'user_create.email\' | translate}}" ng-maxlength="150" ng-model="user.email" name="email" required>\n                        <div ng-repeat="(error, value) in form.email.$error"\n                            ng-show="form.email.$dirty"\n                            class="alert error">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                            </svg>\n                            <span translate="{{\'user.valid.email.\' + error}}" translate-default="{{error}}"></span>\n                        </div>\n                    </div>\n\n                    <div class="form-field" ng-class="{ \'error\': form.password.$invalid && form.password.$dirty }">\n                        <label class="hidden" translate>user.password</label>\n\n                        <a class="button button-flat" ng-show="!passwordShown" ng-click="showPassword()" translate>user.update_password</a>\n\n                        <input type="password" ng-show="passwordShown" placeholder="{{\'user.password\' | translate}}"  ng-minlength="7" ng-maxlength="72" ng-model="user.password" name="password" ng-required="!user.id">\n                        <div ng-repeat="(error, value) in form.password.$error"\n                            ng-show="form.password.$dirty"\n                            class="alert error">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                            </svg>\n                            <span translate="{{\'user.valid.password.\' + error}}" translate-default="{{error}}"></span>\n                        </div>\n                    </div>\n\n                    <fieldset class="custom-fieldset init" dropdown>\n                        <legend class="dropdown-trigger init" data-toggle="dropdown-menu" dropdown-toggle>\n                            <span class="legend-label" translate>\n                                user.role\n                            </span>\n                            <span class="legend-label" ng-show="user.role">\n                                {{ roles[user.role].display_name }}\n                            </span>\n                            <svg class="iconic chevron">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n                            </svg>\n                        </legend>\n                        <div class="dropdown-menu init" dropdown-menu>\n                            <div class="form-field radio" ng-repeat="role in roles">\n                                <input type="radio" id="role{{role.id}}" name="role"\n                                    ng-model="user.role"\n                                    ng-value="role.name"\n                                    required\n                                >\n                                <label for="role{{role.id}}">\n                                    {{role.display_name}}\n                                </label>\n                            </div>\n                        </div>\n                    </fieldset>\n\n                </div>\n\n                <div class="form-sheet" ng-show="user.id">\n                   <div class="form-sheet-summary">\n                       <h3 class="form-sheet-title" translate>user.delete_user</h3>\n                   </div>\n\n                   <div class="form-field">\n                       <p translate>user.delete_user_desc</p>\n\n                       <button class="button-destructive" ng-click="deleteUser(user)">\n                           <svg class="iconic">\n                               <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                           </svg>\n                           <span class="button-label" translate>user.delete_user</span>\n                       </button>\n                   </div>\n                </div>\n            </form>\n\n        </div>\n\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n                <li><a href="/settings/webhooks" translate>app.webhooks</a></li>\n            </ol>\n            <h1 class="mode-context-title" ng-show="webhook.id" translate>app.edit_webhook</h1>\n            <h1 class="mode-context-title" ng-show="!webhook.id" translate>app.add_webhook</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        <div custom-webhooks-editor class="main-col">\n\n            \x3c!-- toolbar --\x3e\n            <div class="toolbar">\n                <div class="button-group">\n                    <button type="button" class="button-flat" ng-click="cancel()" translate>app.cancel</button>\n\n                    <button class="button-alpha" type="button" ng-click="saveWebhook(webhook)" type="submit" ng-disabled="form.$invalid" ng-if="!processing">{{save}}</button>\n                    <button type="submit" class="button-alpha"  disabled ng-if="processing">{{saving}}\n                    <div class="loading">\n                        <div class="line"></div>\n                        <div class="line"></div>\n                        <div class="line"></div>\n                    </div>\n                </button>\n                        \n                </div>\n            </div>\n            \x3c!-- end toolbar --\x3e\n\n            <form name="form">\n                <div class="form-sheet">\n                   <div class="form-field title">\n                       <label class="hidden" translate>webhook.name</label>\n                       <input type="text" placeholder="{{\'webhook.name\' | translate}}" ng-minlength="3" ng-maxlength="150" ng-model="webhook.name" required>\n                   </div>\n\n                   <div class="form-field">\n                       <label translate>webhook.shared_secret</label>\n                       <textarea name="description" data-min-rows=\'1\' rows=\'1\' ng-model="webhook.shared_secret" required></textarea>\n                   </div>\n\n                   <div class="form-field">\n                       <label translate>webhook.url</label>\n                       <input type="text" placeholder="{{\'webhook.url\' | translate}}" ng-model="webhook.url" required>\n                   </div>\n\n                   <div class="form-field">\n                       <label translate>webhook.event_type</label>\n                       <div class="custom-select">\n                         <select ng-model="webhook.event_type" required>\n                             <option ng-repeat="type in event_types" value="{{type}}">{{type}}</option>\n                         </select>\n                      </div>\n                   </div>\n\n                   <div class="form-field">\n                       <label translate>webhook.entity_type</label>\n                       <div class="custom-select">\n                         <select ng-model="webhook.entity_type" required>\n                             <option ng-repeat="type in entity_types" value="{{type}}">{{type}}</option>\n                         </select>\n                      </div>\n                   </div>\n                </div>\n\n                <div ng-if="!webhook.protected" class="form-sheet" ng-show="webhook.id">\n                   <div class="form-sheet-summary">\n                       <h3 class="form-sheet-title" translate>webhook.delete_webhook</h3>\n                   </div>\n\n                   <div class="form-field">\n                       <p translate>webhook.delete_webhook_desc</p>\n\n                       <button class="button-destructive" ng-click="deleteWebhook(webhook)">\n                           <svg class="iconic">\n                               <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                           </svg>\n                           <span class="button-label" translate>webhook.delete_webhook</span>\n                       </button>\n                   </div>\n\n                </div>\n            </form>\n\n        </div>\n\n    </main>\n</div>\n'},,function(e,exports,t){"use strict";function n(e,t,n,s){var i=e.$new();i.token=s.params().token,t.openResetConfirm(i),n.url("/")}e.exports=n,n.$inject=["$rootScope","PasswordReset","$location","$transition$"]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$translate","$location","RoleEndpoint","TagEndpoint","FormEndpoint","Notify","_","Util","$transition$","$q",function(e,t,n,s,i,a,o,r,l,c,d,u){function p(){i.query().$promise.then(function(t){e.roles=t})}function g(){a.queryFresh({level:"parent"}).$promise.then(function(t){e.parents=l.filter(t,function(e){return e.id!==parseInt(d.params().id)})})}function f(e){return a.getFresh({id:e})}function m(){var t="Nothing";return e.category&&e.parents&&e.parents.forEach(function(n){n.id===e.category.parent_id&&(t=n.tag)}),t}function v(t){e.processing=!0,u.when(a.saveCache(t).$promise).then(function(t){return t.children&&t.children.length?h(t):t.parent&&t.parent.id!==e.category.parent_id_original?b(t):void 0}).then(function(){r.notify("notify.category.save_success",{name:e.category.tag}),s.path("/settings/categories")}).catch(w)}function h(e){var t=[];return l.each(e.children,function(n){t.push(a.saveCache({id:n.id,role:e.role}).$promise)}),u.all(t)}function b(e){return a.getFresh({id:e.parent.id}).$promise.then(function(t){return a.saveCache({id:e.id,role:t.role}).$promise})}function y(e){r.confirmDelete("notify.category.destroy_confirm","notify.category.destroy_confirm_desc").then(function(){return a.delete({id:e.id}).$promise.then(function(){r.notify("notify.category.destroy_success"),s.url("/settings/categories")})}).catch(w)}function w(t){e.processing=!1,r.apiErrors(t)}function _(){s.path("/settings/categories")}if(!1===t.hasManageSettingsPermission())return s.path("/");"/settings/categories/create"===s.path()?(e.category={type:"category",icon:"tag",color:"",parent_id:null},e.isParent=!1,n("category.add_tag").then(function(t){e.title=t,e.$emit("setPageTitle",t)})):(!function(){a.getFresh({id:d.params().id}).$promise.then(function(t){e.category=t,e.category.parent&&(e.category.parent_id=e.category.parent.id,e.category.parent_id_original=e.category.parent.id,delete e.category.parent),e.category.children&&e.category.children.length&&(e.isParent=!0)})}(),n("category.edit_tag").then(function(n){e.title=n,t.$emit("setPageTitle",n)})),e.$emit("event:mode:change","settings"),e.addParent=f,e.deleteCategory=y,e.getParentName=m,e.saveCategory=v,e.cancel=_,e.processing=!1,e.save=n.instant("app.save"),e.saving=n.instant("app.saving"),function(){p(),g()}()}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$transition$",function(e,t,n){e.surveyId=n.params().id,e.actionType=n.params().action}]},,,,,,function(e,exports,t){e.exports=t.p+"55353a0616332fe4d0f92e129a27425c.svg"},function(e,exports){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAC1JREFUOI1jZMAN/qPxGbEpYsJjAFFg1ABIyKKHNn1dMPAGYE1dUDCaEullAAAi0gMdELO4MAAAAABJRU5ErkJggg=="},,,function(e,exports,t){"use strict";t(704),t(300),angular.lazy().resolve(["$q","$http",function(e,t){return t.get(window.ushahidi.apiUrl+"/config").then(function(e){window.ushahidi.bootstrapConfig=e.data.results})}]).loading(function(){angular.element(document.getElementById("bootstrap-loading")).removeClass("hidden")}).error(function(){angular.element(document.getElementById("bootstrap-error")).removeClass("hidden")}).done(function(){angular.element(document.getElementById("bootstrap-loading")).addClass("hidden")}).bootstrap(document,["app"],{strictDi:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports){},function(e,exports){},,,function(e,exports){e.exports='<main role="main">\n    <div class="main-col">\n        <h1 class="panel-title" translate>nav.404</h1>\n\n        <p translate>\n            app.404\n        </p>\n    </div>\n</main>'},function(e,exports){e.exports='<main role="main">\n    <div class="main-col">\n        <h1 class="panel-title" translate>nav.forbidden</h1>\n\n        <p translate>\n            app.forbidden\n        </p>\n    </div>\n</main>\n'},function(e,exports){e.exports='<form ng-submit="loginSubmit(email, password)" name="loginForm">\n    <div class="modal-body">\n        <div class="alert error login-failed" role="alert" ng-show="failed">\n            <p translate>notify.login.failed</p>\n        </div>\n\n        <div class="form-field">\n            <label for="email" translate>user.email</label>\n            <input type="text" id="email" ng-model="email" ng-disabled="processing" placeholder="name@domain.com" required>\n        </div>\n\n        <div class="form-field">\n            <label for="password" translate>user.password</label>\n            <input id="password" type="password" ng-model="password" ng-disabled="processing" required>\n            <p><a ng-click="forgotPassword()" translate>nav.forgotyourpassword</a></p>\n        </div>\n    </div>\n    <div class="modal-actions">\n        <div class="form-field">\n            <button type="button" class="button-link" ng-click="cancel()" ng-show="showCancel" translate="app.cancel">Cancel</button>\n            <button type="submit" class="button-alpha" ng-disabled="loginForm.$invalid || processing" translate="nav.login">Login</button>\n        </div>\n    </div>\n</form>\n'},function(e,exports,t){e.exports='<div class="modal-body">\n    <form class="panel-body" name="form" ng-submit="submit()">\n        <div class="alert error register-failed" ng-show="failed">\n            <p translate>notify.passwordreset.failed</p>\n        </div>\n        <div class="form-field" ng-show="!hasToken">\n            <p translate>user.passwordreset_confirm_instructions</p>\n            <label for="token"\n                class="input-label"\n                translate>\n                user.token\n            </label>\n            <input type="text" id="token" name="token"\n                ng-model="token"\n                ng-disabled="processing"\n                required>\n        </div>\n        <div class="form-field" ng-class="{ \'success\': !form.password.$invalid && form.password.$dirty, \'error\' : form.password.$invalid && form.password.$dirty}" >\n            <label class="input-label" for="password" translate>user.new_password</label>\n            <input id="password" type="password" name="password"\n                ng-minlength="7"\n                ng-maxlength="72"\n                ng-model="password"\n                ng-disabled="processing"\n                required>\n            <div ng-repeat="(error, value) in form.password.$error"\n                ng-show="form.password.$dirty"\n                class="alert error">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                </svg>\n                <span translate="{{\'user.valid.password.\' + error}}" translate-default="{{error}}"></span>\n            </div>\n        </div>\n        <div class="form-field">\n            <button type="button" class="button-link" ng-click="cancel()" translate="app.cancel">Cancel</button>\n            <button type="submit" class="button-primary"\n                ng-disabled="form.$invalid || processing">\n                    <div class="loading" ng-show="processing"><div class="line"></div><div class="line"></div><div class="line"></div></div>\n                    <span translate>nav.resetpassword</span>\n            </button>\n        </div>\n    </form>\n</div>\n'},function(e,exports){e.exports='<div class="modal-body">\n    <form class="panel-body" name="form" ng-submit="submit()">\n        <p translate>user.passwordreset_instructions</p>\n        <div class="form-field">\n            <label for="email"\n                class="input-label"\n                translate>\n                user.email\n            </label>\n            <input type="text" id="email" name="email"\n                ng-model="email"\n                ng-disabled="processing"\n                required>\n        </div>\n        <div class="form-field">\n            <button type="button" class="button-link" ng-click="cancel()" translate="app.cancel">Cancel</button>\n            <button type="submit" class="button-primary"\n                ng-disabled="form.$invalid || processing">\n                    <div class="loading" ng-show="processing"><div class="line"></div><div class="line"></div><div class="line"></div></div>\n                    <span translate>nav.resetmypassword</span>\n            </button>\n        </div>\n    </form>\n</div>\n'},function(e,exports,t){e.exports='<form name="form" ng-submit="registerSubmit()">\n    <div class="modal-body">\n        <div class="alert error register-failed" role="alert" ng-show="failed">\n            <p translate>notify.register.failed</p>\n        </div>\n        <div class="form-field" ng-class="{ \'error\': form.full_name.$invalid && form.full_name.$dirty, \'success\': form.full_name.$valid }">\n            <label class="input-label"\n                for="full_name" translate>user.full_name</label>\n            <input id="full_name" name="full_name" type="text"\n                ng-disabled="state.processing"\n                placeholder="{{ \'user_create.full_name\'|translate }}"\n                ng-maxlength="150"\n                ng-model="realname"\n                required>\n            <div ng-repeat="(error, value) in form.full_name.$error"\n                ng-show="form.full_name.$dirty"\n                class="alert error">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                </svg>\n                <span translate="{{\'user.valid.full_name.\' + error}}" translate-default="{{error}}"></span>\n            </div>\n        </div>\n        <div class="form-field" ng-class="{ \'success\': !form.email.$invalid && form.email.$dirty, \'error\' : form.email.$invalid && form.email.$dirty}">\n            <label for="email" class="input-label" translate>user.email</label>\n            <input type="email" id="email" name="email"\n                ng-model="email"\n                ng-disabled="processing"\n                ng-maxlength="150"\n                required>\n            <div ng-repeat="(error, value) in form.email.$error"\n                ng-show="form.email.$dirty"\n                class="alert error">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                </svg>\n                <span translate="{{\'user.valid.email.\' + error}}" translate-default="{{error}}"></span>\n            </div>\n        </div>\n        <div class="form-field" ng-class="{ \'success\': !form.password.$invalid && form.password.$dirty, \'error\' : form.password.$invalid && form.password.$dirty}">\n            <label class="input-label" for="password" translate>user.password</label>\n            <input id="password" type="password" name="password"\n                ng-minlength="7"\n                ng-maxlength="72"\n                ng-model="password"\n                ng-disabled="processing"\n                required>\n            <div ng-repeat="(error, value) in form.password.$error"\n                ng-show="form.password.$dirty"\n                class="alert error">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                </svg>\n                <span translate="{{\'user.valid.password.\' + error}}" translate-default="{{error}}"></span>\n            </div>\n\n        </div>\n    </div>\n\n    <div class="modal-actions">\n        <div class="form-field">\n            <button type="button" class="button-link" ng-click="cancel()" translate="app.cancel">Cancel</button>\n            <button type="submit" class="button-alpha" ng-disabled="form.$invalid || processing" translate="nav.register">Sign up</button>\n        </div>\n    </div>\n</form>\n'},function(e,exports){e.exports='<div class="modal-body">\n    <form class="panel-body" name="form" ng-submit="tosSubmit()">\n    <h2 translate="terms_of_service.title">Ushahidi Terms of Service</h2>\n    <p translate="terms_of_service.terms_of_service">We have updated our <a href="https://www.ushahidi.com/terms-of-service" target="_blank">Terms and Conditions</a> and <a href="https://www.ushahidi.com/privacy-policy" target="_blank">Privacy Policy</a>. Please review these documents carefully and accept the terms in order to continue to use Ushahidi\'s services.</p>\n        <div class="form-field radio">\n            <label>\n                <input type="checkbox" ng-model="terms.accept" ng-value="true" translate="terms_of_service.agree" required>\n                    I agree to Ushahidi\'s Terms of Service.\n            </label>\n        </div>\n        <div class="modal-actions">\n            <div class="form-field">\n                <button type="submit" class="button-alpha" ng-disabled="form.$invalid" translate="terms_of_service.accept_and_continue">Accept and Continue</button>\n            </div>\n        </div>\n    </form>\n</div>\n'},function(e,exports,t){e.exports='\n<li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" ng-click="selectPage(1, $event)">\n    <a ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a>\n</li>\n<li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="prev">\n    <a ng-click="selectPage(page - 1, $event)">\n        <svg class="iconic">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-left"></use>\n        </svg>\n        <span class="hidden">Previous</span>\n    </a>\n</li>\n<li>\n    <ul class="page-numbers">\n        <li class="pg-number" ng-repeat="page in pages track by $index" ng-class="{active: page.active}">\n            <a ng-if="!page.active" ng-click="selectPage(page.number, $event)">\n                {{page.text}}\n            </a>\n            <span ng-if="page.active">\n                {{page.text}}\n            </span>\n        </li>\n    </ul>\n</li>\n<li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="next" >\n    <a ng-click="selectPage(page + 1, $event)">\n        <svg class="iconic">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-right"></use>\n        </svg>\n        <span class="hidden">Next</span>\n    </a>\n</li>\n<li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}">\n    <a ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a>\n</li>\n'},function(e,exports,t){e.exports='<div class="form-field inline" ng-class="{\'hidden\': !showInput}">\n    <label class="hidden" translate="category.editor.name">Category name</label>\n        <input\n            type="text"\n            placeholder="{{\'category.editor.name\' | translate}}"\n            style="width: 240px;"\n            ng-model="categoryName"\n        />\n        <button\n            type="button"\n            class="button-alpha button-flat"\n            ng-disabled="categoryName.length === 0"\n            ng-click="saveCategory($event);"\n        >\n            <svg class="iconic">\n                <use xlink:href="'+t(0)+'#check"></use>\n            </svg>\n        <span class="hidden" translate="app.add">Add</span>\n        </button>\n        <button\n            type="button"\n            class="button-beta button-flat"\n            ng-click="showInputToggle()"\n        >\n            <svg class="iconic">\n                <use xlink:href="'+t(0)+'#trash"></use>\n            </svg>\n            <span class="hidden" translate="category.delete">Delete</span>\n        </button>\n</div>\n\n<div class="form-field init" ng-click="showInputToggle()" ng-if="userCanAddCategory && !showInput">\n    <a data-toggle="add-label" translate="app.add_new_category">+ Add new category</a>\n</div>\n'},function(e,exports,t){e.exports='<div class="form-fieldgroup checkbox" overflow-toggle has-overflow="categories.length > 2">\n    <div class="form-field checkbox">\n        <label>\n            <input\n                  type="checkbox"\n                  ng-checked="available.length === selected.length"\n                  ng-click="selectAll()"\n            >\n            <em><span translate="category.select_all"></span></em>\n        </label>\n    </div>\n    <div class="form-field checkbox" ng-repeat="(index, category) in categories" ng-class="{ overflow : ($index > 1) }" ng-if="category.parent_id === null">\n        <label>\n            <input\n                type="checkbox"\n                checklist-value="category.id"\n                ng-disabled="disabledCategories[category.id]"\n                value="category.id"\n                checklist-model="selected"\n                checklist-change="changeCategories()"\n            >\n            {{ ::category.tag }}\n        </label>\n        <div class="form-field checkbox" ng-if="category.children" ng-repeat="child in category.children">\n            <label>\n                <input\n                    type="checkbox"\n                    checklist-model="selected"\n                    checklist-value="child.id"\n                    value="child.id"\n                    ng-selected="selected.indexOf(category.id) >-1"\n                    checklist-change="changeCategories()"\n                >\n                {{ ::child.tag }}\n        </label>\n        </div>\n    </div>\n    <span class="form-field-toggle">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span translate="nav.more">More</span>\n    </span>\n  </div>\n'},function(e,exports,t){e.exports='<fieldset class="custom-fieldset init" data-fieldset-type="color" dropdown auto-close="outsideClick">\n\n    <legend class="dropdown-trigger init active" data-toggle="dropdown-menu" dropdown-toggle>\n        <span class="swatch" ng-style="{ backgroundColor: colorContainer.color}"></span>\n        <span class="legend-label">Color</span>\n        <svg class="iconic chevron">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n    </legend>\n\n    <div class="dropdown-menu init" dropdown-menu>\n        <div class="form-field">\n            <label translate>color_picker.hex_value</label>\n            <input type="text" data-input-type="color" ng-change="setColor(color)" ng-model="color">\n        </div>\n\n        <div class="form-field">\n            <button class="button-gamma" data-button-type="color" value="A51A1A" style="border-top-color: #A51A1A;" ng-click="setColor(\'#A51A1A\')" translate>color_picker.red</button>\n            <button class="button-gamma" data-button-type="color" value="E69327" style="border-top-color: #E69327;" ng-click="setColor(\'#E69327\')" translate>color_picker.gold</button>\n            <button class="button-gamma" data-button-type="color" value="2274B4" style="border-top-color: #2274B4;" ng-click="setColor(\'#2274B4\')" translate>color_picker.blue</button>\n            <button class="button-gamma" data-button-type="color" value="5BAA00" style="border-top-color: #5BAA00;" ng-click="setColor(\'#5BAA00\')" translate>color_picker.green</button>\n        </div>\n    </div>\n\n</fieldset>\n'},function(e,exports){e.exports='<input name="file" type="file" custom-on-change=\'uploadFile\' ng-required="{{ required }}" />\n'},function(e,exports){e.exports='<fieldset>\n    <label translate>app.roles</label>\n    <div class="form-field checkbox" ng-repeat="role in roles">\n        <label>\n            <input\n                type="checkbox"\n                checklist-model="model"\n                checklist-value="role.name"\n                >\n            {{role.display_name}}\n        </label>\n    </div>\n</fieldset>\n\n'},function(e,exports,t){e.exports='<div class="searchbar-input" dropdown auto-close="outsideClick">\n    \x3c!-- Search input --\x3e\n    <div class="form-field">\n        <label class="hidden" translate="toolbar.searchbar.search_entity">Search</label>\n        <div class="input-with-icon">\n            <input name="q" type="search" autocomplete="off"\n            placeholder="{{ \'toolbar.searchbar.search_entity\' | translate:{ entity: placeholderText } }}"\n            ng-model="model" ng-blur="hideSearchResults()" ng-focus="showSearchResults()" ng-keyup="showSearchResults()">\n            <svg class="iconic" ng-show="!form.q.$viewValue.length">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#magnifying-glass"></use>\n            </svg>\n            <svg class="iconic" ng-click="onClear()" ng-show="form.q.$viewValue.length">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n            </svg>\n        </div>\n    </div>\n\n\n    <div class="searchbar-results dropdown-menu" ng-class="{active: (searchResultsVisible && form.q.$viewValue.length > 0) }">\n        <div class="form-field">\n            <button class="button-plain" type="submit">\n                <span class="button-label">\n                    <span translate-values="{ entity: entityType }" translate>\n                        toolbar.searchbar.search_all_entities_for\n                    </span>\n                    "<em>{{ form.q.$viewValue }}</em>"\n                </span>\n            </button>\n        </div>\n    </div>\n</div>\n'},function(e,exports){e.exports='<modal visible="modalOpen" show-close-button="step == \'first-post\'" close-on-overlay-click="false">\n    <form ng-show="step == \'customize\'" name="form">\n        <h1 translate>settings.customize_your_new_deployment</h1>\n\n        <div ng-hide="hasName">\n            <label class="input-label" for="site-settings-name" ng-class="{ \'success\': !form.name.$invalid && form.name.$dirty, \'error\' : form.name.$invalid && form.name.$dirty }" translate>settings.site_name</label>\n            <input id="name" name="name" type="text" ng-model="site.name" ng-class="{\'error\': form.name.$invalid && form.name.$dirty}" required>\n            <p ng-repeat="(error, value) in form.name.$error"\n                ng-show="form.name.$dirty"\n                class="alert error"\n                translate="{{\'settings.valid.name.\' + error}}"></p>\n        </div>\n\n        <div class="divider white"></div>\n\n        <label class="input-label" for="site-settings-description" translate>settings.site_description</label>\n        <textarea id="site-settings-description" type="text"\n            ng-model="site.description" placeholder="{{\'settings.site_description_placeholder\' | translate}}"></textarea>\n\n        <div class="divider white"></div>\n\n        \x3c!-- <label class="input-label">Default View</label>\n        <p class="small">This is how your posts will be displayed by default. Don\'t worry, you can always change it later.</p>\n        <div class="custom-select">\n            <select name="default-view">\n                <option value="1">Map</option>\n                <option value="2">List</option>\n                <option value="3">Graph</option>\n            </select>\n        </div>\n\n        <div class="divider white"></div> --\x3e\n\n        <label class="input-label" for="appearance-header-image" translate>settings.appearance_header_image</label>\n        <p class="small" translate>settings.appearance_header_image_instructions</p>\n       <file-upload container="fileContainer">\n        </file-upload>\n\n        <div class="divider white"></div>\n\n        <button class="save" ng-click="updateConfig()" ng-disabled="form.$invalid || isUnchanged(site) || saving_config">\n            <div class="loading" ng-show="saving_config"><div class="line"></div><div class="line"></div><div class="line"></div></div>\n            <span translate>settings.continue</span>\n        </button>\n        <a class="cta" ng-click="skip()" ng-show="hasName" translate>settings.skip</a>\n    </form>\n    <div ng-show="step == \'first-post\'">\n        <h3 class="edit" translate>settings.add_first_post</h3>\n        <div class="divider padded"></div>\n        <p translate>settings.add_first_post_subtitle</p>\n        <a class="button button-create" ui-sref="postCreate" ng-click="closeModal()">\n            <span translate>settings.add_first_post</span>\n        </a>\n        <div class="divider padded"></div>\n        <p translate>settings.invite_people</p>\n        <a class="button button-primary" ui-sref="settings.users" ng-click="closeModal()">\n            <span translate>settings.add_new_users</span>\n        </a>\n    </div>\n</modal>\n'},function(e,exports){e.exports='<span dropdown>\n    <button\n        dropdown-toggle\n        type="button"\n        class="button-secondary dropdown toggle-content-trigger"\n    >\n        <span class={{model}}></span>\n    </button>\n    <ul class="dropdown-menu init toggle-content list-unstyled" dropdown-menu>\n        <li ng-repeat="icon in iconSet" class="inline">\n              <button type="button" class="button-secondary inline" ng-click="setIcon(icon)">\n                  <span class="{{ icon }}"></span>\n              </button>\n        </li>\n    </ul>\n</span>\n'},function(e,exports){e.exports='\t<div class="form-field select">\n\t    <div class="custom-select">\n\t        <select \n                ng-model="site.language" \n                ng-options="lang.code as lang.name for lang in languages"\n                ng-change="changeLanguage(site.language)"\n            >\n                <option value="">Select language</option>\n            </select>\n\t    </div>\n\t</div>'},function(e,exports){e.exports='<div class="listing-toolbar">\n    <div class="listing-toolbar-summary">\n        <strong translate="nav.selected_items" translate-values="{ selectedItems : selectedSet.length }"></strong>\n        <button class="button-link" ng-click="deselectAll()" translate="nav.deselect">Deselect</button>\n        <button class="button-link" ng-click="selectAll()" translate="nav.select_all">Select all</button>\n    </div>\n\n    <div class="listing-toolbar-actions">\n        <ng-transclude></ng-transclude> \n    </div>\n</div>\n'},function(e,exports){e.exports=' <button type="button" ng-disabled="disabled" ng-class="{{buttonClass}}">\n        <div class="loading">\n            <div class="line"></div>\n            <div class="line"></div>\n            <div class="line"></div>\n        </div>\n        <span class="button-label" translate>{{label}}</span>\n</button>'},function(e,exports){e.exports='<div class="mainsheet init active" ng-show="showMainsheet" style="display: block; opacity: 1;">\n    <div class="mainsheet-window">\n        <h3 class="mainsheet-heading" ng-if="title">\n            {{ title | translate }}\n        </h3>\n        <mainsheet-content></mainsheet-content>\n    </div>\n    <div class="mainsheet-overlay" ng-click="closeMainsheet()"></div>\n</div>\n'},function(e,exports,t){e.exports='<div ng-show="classVisible" class="modal" style="display: block;">\n    <div class="modal-window" ng-style="{ top : modalOffset }">\n        <button class="button-beta button-flat modal-trigger modal-trigger-close" ng-show="showCloseButton" ng-click="closeButtonClicked()">\n            <svg class="iconic">\n                \x3c!-- TODO: fix icon to be settable --\x3e\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#x"></use>\n            </svg>\n            <span class="hidden" translate>modal.button.close</span>\n        </button>\n        <h3 class="modal-title" ng-if="title">\n            <svg class="iconic" ng-if="icon">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{ icon }}"></use>\n            </svg>\n            <span class="label">\n                {{ title | translate }}\n            </span>\n        </h3>\n        <modal-content></modal-content>\n        <ush-slider inside-modal="true"></ush-slider>\n    </div>\n    <div class="modal-overlay" ng-click="closeButtonClicked(\'overlay\')"></div>\n</div>\n'},function(e,exports,t){e.exports='<div ng-show="classVisible" class="modal" style="display: block;">\n    <div class="modal-window" ng-style="{ top : modalOffset }">\n        <button class="button-beta button-flat modal-trigger modal-trigger-close" ng-show="showCloseButton" ng-click="closeModal()">\n            <svg class="iconic">\n                \x3c!-- TODO: fix icon to be settable --\x3e\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#x"></use>\n            </svg>\n            <span class="hidden" translate>modal.button.close</span>\n        </button>\n        <h3 class="modal-title" ng-if="title">\n            <svg class="iconic" ng-if="icon">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{iconPath}}"></use>\n            </svg>\n            <span class="label">\n                {{ title }}\n            </span>\n        </h3>\n        <ng-transclude></ng-transclude>\n    </div>\n    <div class="modal-overlay"></div>\n</div>\n'},function(e,exports,t){e.exports='<div class="mode-bar" ng-class="{ active : moreActive }">\n    \x3c!-- mode bar --\x3e\n    \x3c!-- PL JS --\x3e\n    <nav>\n        \x3c!-- main menu --\x3e\n        <ul class="deployment-menu">\n            <li ui-sref-active="{ \'active\' : \'posts.map\' }">\n                <a ui-sref="posts.map.all" ui-sref-opts="{reload:true}" class="view-map">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#map-marker"></use>\n                    </svg>\n                    <translate>views.map</translate>\n                </a>\n            </li>\n\n            <li ui-sref-active="active">\n                <a ui-sref="posts.data" ui-sref-opts="{reload:true}" class="view-data">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#list-rich"></use>\n                    </svg>\n                    <translate>views.data</translate>\n                </a>\n            </li>\n\n            <li ng-if="isActivityAvailable || hasManageSettingsPermission()" ui-sref-active="active" data-message="customize">\n                <a ui-sref="activity">\n                    <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#pulse"></use>\n                    </svg>\n                    <translate>views.activity</translate>\n                </a>\n            </li>\n\n            <li>\n                <a class="more-menu-trigger" ng-class="{ active : moreActive }" ng-click="showMore($event)">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#ellipses"></use>\n                    </svg>\n                    <translate>nav.more</translate>\n                </a>\n                <ul>\n                    <li data-message="customize" ng-show="hasManageSettingsPermission()" ui-sref-active="active">\n                        <a ui-sref="settings">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#cog"></use>\n                            </svg>\n                            <translate>nav.settings</translate>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n        \x3c!-- main menu --\x3e\n\n        <ul class="account-menu">\n        \x3c!-- user account menu --\x3e\n\n            <li>\n                <a href="" ng-click="viewSupportLinks()">\n                    <ng-include src="\'common/directives/mode-bar/ushahidi-logo.html\'"></ng-include>\n                    <span class="label" translate>app.support</span>\n                </a>\n            </li>\n\n            <li ng-show="currentUser">\n                <a ng-click="logout()" data-modal="login">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#account-logout"></use>\n                    </svg>\n                    <span class="label" translate="nav.logout">Log out</span>\n                </a>\n            </li>\n\n            <li ng-show="currentUser">\n                <a ng-click="viewAccountSettings()">\n                    <img class="avatar" ng-src="https://www.gravatar.com/avatar/{{ currentUser.gravatar || \'00000000000000000000000000000000\' }}?d=retro" alt="{{ currentUser.realname }}"/>\n                    <span class="label">{{currentUser.realname || currentUser.email}}</span>\n                </a>\n            </li>\n\n            <li ng-show="!currentUser && canRegister">\n                <a ng-click="register()" data-modal="signup">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#person"></use>\n                    </svg>\n                    <translate translate="nav.register">Sign up</translate>\n                </a>\n            </li>\n\n            <li ng-hide="currentUser">\n                <a ng-click="login()" data-modal="login">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#account-login"></use>\n                    </svg>\n                    <translate translate="nav.login">Log in</translate>\n                </a>\n            </li>\n\n            <li>\n                <a ng-click="viewCollectionListing()">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#grid-three-up"></use>\n                    </svg>\n                    <span class="label" translate>nav.collections</span>\n                </a>\n            </li>\n        \x3c!-- user account menu --\x3e\n        </ul>\n\n    </nav>\n    \x3c!-- PL JS --\x3e\n    \x3c!-- mode bar --\x3e\n</div>\n'},function(e,exports){e.exports='<h3 class="modal-title" translate>\n  app.support\n</h3>\n\n<div class="modal-body">\n  <dl>\n    <dt class="list-item"><a href="https://www.ushahidi.com/support" target="_blank" translate>app.documentation.title</a></dt>\n    <dd translate>app.documentation.description</dd>\n    <dt class="list-item"><a href="https://github.com/ushahidi/platform/issues/new" target="_blank" translate>app.report_a_bug.title</a></dt>\n    <dd translate>app.report_a_bug.description</dd>\n    <dt class="list-item"><a href="https://www.ushahidi.com/features" target="_blank" translate>app.features.title</a></dt>\n    <dd translate>app.features.description</dd>\n  </dl>\n</div>\n</div>\n'},function(e,exports){e.exports='<svg class="ushahidi-logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 273.5 266.5" xml:space="preserve">\n    <g>\n        <circle cx="248.8" cy="207.1" r="21.6"/>\n        <path d="M239.8,81.7c7.9-6.6,12.9-16.5,12.9-27.6c0-19.8-16.1-35.9-35.9-35.9c-7,0-13.6,2.1-19.1,5.5\n            c-2.1-6.2-8-10.7-15-10.7c-5.1,0-9.6,2.4-12.5,6.1c-9.9-3-20.4-4.6-31.3-4.6c-40.6,0-75.9,22.1-94.8,54.9\n            c-23.2,3-41.3,22.8-41.3,46.9c0,21.3,14.1,39.3,33.6,45.2c7.7,20.9,21.6,38.8,39.4,51.5c10.6,28.7,38.2,49.2,70.5,49.2\n            c38.4,0,70.1-28.9,74.6-66.1c17-19.3,27.3-44.5,27.3-72.2C248.2,108.9,245.2,94.7,239.8,81.7 M139,209.4\n            c-47.3,0-85.6-38.3-85.6-85.6S91.7,38.2,139,38.2s85.6,38.3,85.6,85.6C224.5,171.1,186.2,209.4,139,209.4"/>\n        <circle cx="25.1" cy="57.9" r="12.3"/>\n        <g>\n            <path d="M137,198.5c0.5,0,1.1,0.1,1.6,0.1c-0.4,0-0.8,0-1.3-0.1C137.2,198.5,137.1,198.5,137,198.5z"/>\n            <path d="M70,94.5L70,94.5l-0.1,0.2l0,0C69.9,94.6,70,94.6,70,94.5z"/>\n            <path d="M177.5,57.6c-0.1-0.1-0.2-0.1-0.3-0.2c-0.1,0-0.1-0.1-0.2-0.1C177.2,57.5,177.3,57.5,177.5,57.6z"/>\n            <path d="M153.9,190.5c-8.7-0.5-18.3-2.3-28.1-5.3c-2.9,5.8-5.2,9.3-6.8,10c5.8,1.7,11.4,2.8,16.6,3.1\n                c0.2,0,0.4,0,0.6,0C142.2,198.4,148.3,195.7,153.9,190.5z"/>\n            <path d="M136.3,198.4c-0.1,0-0.1,0-0.2,0c0.3,0,0.6,0,0.9,0c0.1,0,0.2,0,0.3,0C136.9,198.5,136.6,198.4,136.3,198.4z"\n                />\n            <path d="M77.2,81c0.1-0.2,0.3-0.4,0.4-0.6C77.4,80.7,77.3,80.8,77.2,81z"/>\n            <path d="M176,189.2c1.1-0.6,2.2-1.3,3.2-2c-5.3,2.4-12.5,3.6-20.9,3.4c-6,5.2-12.6,7.9-19.3,7.9c0.3,0,0.6,0,0.9,0\n                c11.3,0,21.9-2.5,31.5-6.9l0.3-0.2C173,190.8,174.5,190,176,189.2z"/>\n            <path d="M118.2,195.4c2.7,0.8,5.4,1.4,8.1,1.9c-2.6-0.5-5.2-1.1-7.8-1.9H118.2z"/>\n            <path d="M116.8,194.9c0.4,0.1,0.9,0.3,1.3,0.4L117,195L116.8,194.9z"/>\n            <path d="M129,197.8c-0.7-0.1-1.3-0.2-2-0.3C127.7,197.5,128.4,197.7,129,197.8z"/>\n            <path d="M74.8,84.9l1.4-2.3C75.7,83.3,75.2,84.1,74.8,84.9z"/>\n            <path d="M97.7,185.7c-0.1-0.1-0.2-0.1-0.3-0.2C97.6,185.6,97.7,185.6,97.7,185.7z"/>\n            <path d="M106.9,190.9c-2.1-1-4.2-2.1-6-3.2l-0.6-0.4c4.8,3,10,5.4,15.4,7.2h0.1C112.8,193.5,109.8,192.3,106.9,190.9z\n                "/>\n            <path d="M132.4,198.2c-0.2,0-0.4,0-0.6-0.1C132,198.1,132.2,198.1,132.4,198.2z"/>\n            <path d="M94.8,183.6c-0.1-0.1-0.2-0.2-0.4-0.3c0.6,0.4,1.1,0.8,1.7,1.2c-0.3-0.2-0.7-0.5-1.1-0.8\n                C95,183.7,94.9,183.7,94.8,183.6z"/>\n            <path d="M135.7,198.4c-0.5,0-1-0.1-1.5-0.1c0.9,0.1,1.9,0.1,2.8,0.2c-0.3,0-0.6,0-0.9,0\n                C135.9,198.4,135.8,198.4,135.7,198.4z"/>\n            <path d="M93.3,136.7c-9-6-15.8-12.4-20.2-18.5c-3.7,10.9-4.3,21.3-2.4,30.7c3.8,5.4,9.9,10.9,17.7,16.2\n                C88.1,157.2,89.6,147.5,93.3,136.7z"/>\n            <path d="M92.7,170.6c0.4,7.3,2.6,12.7,6.4,15.8c2.2,1.3,4.6,2.6,7.1,3.8c3.2,1.5,6.6,2.9,9.9,4\n                c0.8-1,2.4-4.7,4.8-10.7c-5.5-1.9-11-4.1-16.3-6.6C100.2,174.9,96.3,172.8,92.7,170.6z"/>\n            <path d="M94.8,132.7c4.2-10.9,10-21.6,16.8-31.3c-7.7-5.2-13.7-10.7-17.5-16c-8.4,8.3-15.2,18.1-19.5,28.8\n                C79,120.3,85.9,126.6,94.8,132.7z"/>\n            <path d="M95.6,79.7c9-7.6,19.5-13.6,30.6-17.3c-1.7-3-2.2-5.8-1.3-8.1c-11.5,1.5-22.3,5.5-31.5,11.7\n                C91.9,69.9,92.7,74.6,95.6,79.7z"/>\n            <path d="M204.1,120.9c-5.4,2.5-12.8,3.6-21.3,3.5c-0.2,11.9-2.1,23.9-5.6,34.9c9.8,0.2,18.4-1.2,24.6-4\n                C205.2,144.3,205.8,132.5,204.1,120.9z"/>\n            <path d="M170.6,163.3c-10.3-0.6-21.6-2.7-33.2-6.2c-3.8,10.7-7.4,19.5-10.4,25.9c10.1,3,20.1,4.9,29.1,5.4\n                C161.6,182.5,166.6,174,170.6,163.3z"/>\n            <path d="M97.3,82.3c3.7,5.1,9.4,10.4,16.8,15.4c7-9.5,14.9-18,23-24.7c-4.4-3-7.8-6.1-9.9-9.1\n                C116.4,68,106.1,74.4,97.3,82.3z"/>\n            <path d="M160.6,188.6c8.6,0.1,16.1-1,21.6-3.6c7.8-6.2,14.2-14.8,18.2-25.6c-6.3,2.9-14.8,4.2-24.7,4\n                C171.8,174.2,166.5,182.6,160.6,188.6z"/>\n            <path d="M150.8,114.6c9.6,2.9,19.1,4.6,27.7,5.2c0.3-11.8-0.9-23.4-3.3-33.8c-5-0.3-10.6-1.4-16.3-3.1\n                C156.7,92.5,154,103.3,150.8,114.6z"/>\n            <path d="M69.8,94.9c-0.4,1.1-0.9,2.2-1.3,3.3l0.2-0.5L69.8,94.9z"/>\n            <path d="M203.3,116.6c-2.3-11.5-7-22.6-13.6-32.5c-3.1,1.4-7.3,2.1-12.1,2c3.2,10.4,5,22,5.1,33.9\n                C191,120.1,198.1,119,203.3,116.6z"/>\n            <path d="M207.9,113.8c3.3-2.7,4.7-6.1,4.5-9.9c-3.3-10.2-9.2-19.5-17.3-27.3c0.1,2.2-0.7,4.3-2.7,5.9\n                c-0.4,0.3-0.8,0.6-1.2,0.9c7,9.6,12,20.6,14.6,31.9C206.6,114.8,207.3,114.3,207.9,113.8z"/>\n            <path d="M98.1,139.8c-3.7,10.8-5.5,20.3-5.5,28c3.7,2.3,7.8,4.5,12.2,6.6c5.6,2.6,11.3,5,16.9,6.9\n                c2.5-6.5,5.8-15.4,9.6-26.1c-6.5-2.2-13-4.8-19.3-7.9C107,144.9,102.4,142.4,98.1,139.8z"/>\n            <path d="M127.7,110.4c-4.3-2.1-8.3-4.2-12-6.5c-6.4,10-12,20.9-16.1,31.8c4.3,2.6,8.9,5.1,13.9,7.5\n                c6.3,3,12.8,5.6,19.3,7.8c3.9-11,7.9-22.6,11.6-33.8C138.8,115.3,133.2,113.1,127.7,110.4z"/>\n            <path d="M178.3,124.3c-8.9-0.6-18.7-2.4-28.7-5.4c-3.3,11.4-7,23.1-10.8,34.1c11.6,3.5,23,5.6,33.2,6.2\n                C175.6,148.1,177.7,136.1,178.3,124.3z"/>\n            <path d="M118.1,100.2c3.5,2.2,7.4,4.3,11.6,6.3c5.3,2.5,10.7,4.7,16.1,6.5c3.7-11.1,7.1-21.8,10-31\n                c-3.2-1.1-6.4-2.4-9.5-3.9c-2.5-1.2-4.7-2.4-6.8-3.7C132.1,81.6,124.7,90.5,118.1,100.2z"/>\n            <path d="M210.4,149.8c-0.9,2.3-2.4,4.4-4.6,6.2c-0.8,0.6-1.6,1.2-2.5,1.8c-4.1,10.7-10.6,19.4-18.6,25.8\n                c0.5-0.3,0.9-0.6,1.4-1c12.2-9.5,21.4-22.6,25.9-37.7l-1.1,3.4L210.4,149.8z"/>\n            <path d="M91.2,66.2c0.7-1.1,1.6-2.1,2.8-3.1c0.3-0.2,0.6-0.5,0.9-0.7l3-2.1c0.4-0.3,0.8-0.6,1.2-0.8\n                c-8,5.1-14.9,11.7-20.5,19.3C82.3,74,86.5,69.8,91.2,66.2z"/>\n            <path d="M72.6,111c4.3-10.7,11.2-20.4,19.8-28.4c-3-5.2-3.9-10.1-2.2-14.3C82.9,73.8,77,80.8,72.6,89\n                c-1,1.9-1.9,3.9-2.7,5.6C68.1,99.4,69.1,105.1,72.6,111z"/>\n            <path d="M142.4,47.6c0.6,0,1.2,0,1.8,0.1C143.6,47.7,143,47.7,142.4,47.6z"/>\n            <path d="M131.4,62.4c1.9,2.7,5,5.5,8.9,8.1c7.6-5.8,15.3-10,22.6-12C152.4,57.6,141.7,59,131.4,62.4z"/>\n            <path d="M131.3,51.2c-0.6,0.5-1,1-1.4,1.6c10.7-0.4,21.9,1.4,32.9,5.9c-8.3-6-17-9.2-25.4-10.1\n                C134.9,49,132.8,49.9,131.3,51.2z"/>\n            <path d="M69.9,94.7L69.9,94.7v-0.2C70,94.6,69.9,94.6,69.9,94.7z"/>\n            <path d="M71.1,115.1c-3.3-5.7-4.4-11-2.9-15.7c-2.4,7.4-3.8,15.4-3.8,23.6c0,5.9,0.7,11.6,2,17.1c0.5,2,1.4,4,2.6,6.1\n                C66.9,136.6,67.4,126,71.1,115.1z"/>\n            <path d="M129.4,53.8c-0.9,2.1-0.4,4.6,1.1,7.3c10.5-3,21.6-3.9,32.3-2.5C151.6,54.5,140.2,53,129.4,53.8z"/>\n            <path d="M155.5,49.2c-0.3,0-0.5-0.1-0.7-0.1c3.2,0.7,6,3.7,8,9.5c3.3-3.9,5.6-5.4,7-4.8c0.8,0.3,1.8,0.8,2.6,1.2\n                c-2.2-1-5.4,0.1-9.6,3.6c8.9-0.7,16.5,1,22.6,4.6c-2.1-1.8-4.7-3.7-7.6-5.4c-0.1-0.1-0.2-0.1-0.3-0.2c-0.1-0.1-0.3-0.2-0.4-0.2\n                c-0.4-0.2-0.8-0.5-1.2-0.7l0,0c-0.3-0.2-0.6-0.3-0.9-0.5c-6.3-3.3-13.2-5.8-20.5-7.2l0.3,0.1L155.5,49.2z"/>\n            <path d="M175.8,56.7c0.2,0.1,0.5,0.3,0.7,0.4c-0.4-0.3-0.9-0.5-1.4-0.7C175.4,56.4,175.6,56.6,175.8,56.7L175.8,56.7z\n                "/>\n            <path d="M77.2,165c-0.8-1.2-1.6-2.5-2.3-3.6l-0.2-0.3c-2.1-3.6-3.7-7.4-4.9-11.4c-1-1.8-1.8-3.5-2.3-5.1\n                c2.4,8,6,15.4,10.8,22.1c-0.3-0.4-0.6-0.9-0.9-1.3C77.3,165.2,77.2,165.1,77.2,165z"/>\n            <path d="M142.1,47.6c-0.8,0-1.5-0.1-2.3-0.1c-3.4,0-6.8,0.3-10.2,0.7c2.1-0.3,4.2-0.4,6.3-0.3\n                C137.9,47.7,140,47.6,142.1,47.6z"/>\n            <path d="M97.2,60.9c-1.1,0.9-2,1.9-2.7,2.9c9.1-6,19.7-9.7,31.1-10.8c0.4-0.6,0.9-1.2,1.6-1.7c1.7-1.4,4-2.4,6.8-3\n                c-3.4-0.1-6.8,0.3-10,1c1.6-0.3,3.7-0.7,5.4-1c-11,1.5-21.2,5.4-30.1,11.2l-1.2,0.9C97.7,60.5,97.4,60.7,97.2,60.9z"/>\n            <path d="M152.3,48.6c-4.8-0.8-9.3-0.9-13-0.4c7.9,0.9,16,4.3,23.6,10.4C159.9,52.7,156.2,49.4,152.3,48.6z"/>\n            <path d="M151.9,48.5h0.3c-1.8-0.3-3.5-0.5-5.3-0.7h0.1C148.4,48.1,150.4,48.3,151.9,48.5z"/>\n            <path d="M189.4,66.3c3.1,3,5,6.1,5.6,8.9c8,7.3,13.9,16.4,17.2,26.3c-0.1-0.6-0.3-1.2-0.5-1.8l0,0\n                c-3.8-11.8-10.5-22.3-19.2-30.8l0.7,0.6C192,68.4,190.7,67.3,189.4,66.3z"/>\n            <path d="M148.4,75.2c2.8,1.3,5.6,2.5,8.5,3.4c2.6-8.3,4.6-15.2,5.9-20c-6.5,2.4-13.5,7.1-20.4,13.3\n                C144.2,73,146.3,74.1,148.4,75.2z"/>\n            <path d="M179.6,58.9c-0.7-0.4-1.4-0.8-2.1-1.2c0.1,0,0.1,0.1,0.2,0.1C178.2,58.1,178.8,58.4,179.6,58.9z"/>\n            <path d="M213.5,107.7c0.2,3.9-1.3,7.5-4.7,10.3c-0.7,0.5-1.4,1-2.1,1.5c2,11.4,1.5,23.2-1.9,34.2\n                c0.9-0.6,1.7-1.1,2.5-1.8c2.4-2,4-4.4,4.8-7c2.1-6.9,3.2-14.3,3.2-21.9c0-1.7-0.1-3.3-0.2-5c-0.1-1.1-0.2-2-0.2-2.8\n                C214.6,112.7,214.2,110.2,213.5,107.7z"/>\n            <path d="M215,116c-0.1-0.6-0.1-1.1-0.2-1.6c0,0.3,0.1,0.6,0.1,0.9C214.9,115.5,215,115.8,215,116z"/>\n            <path d="M95,183.8c0.5,0.4,1,0.7,1.6,1.1c-4.4-3.5-7.1-9.3-8-16.8c-7.6-5.1-13.4-10.5-17.1-15.6\n                c1.3,4.5,3.2,8.8,5.6,12.6c0.1,0.1,0.1,0.2,0.2,0.3c0.3,0.5,0.6,0.9,0.9,1.3c4.4,6.2,9.7,11.7,15.7,16.3c0.3,0.2,0.6,0.4,0.8,0.6\n                C94.9,183.7,95,183.7,95,183.8z"/>\n            <path d="M186.8,64.6c-6.5-4-14.6-6.2-24-6c11.3,2.7,21.1,7.5,29.1,14C191.3,70.1,189.6,67.3,186.8,64.6z"/>\n            <path d="M174.1,82.2c-2.6-9.3-6.4-17.5-11.3-23.6c-0.3,5.1-1.5,12.4-3.2,20.9C164.6,81,169.6,81.9,174.1,82.2z"/>\n            <path d="M187.2,80.5c-6.6-8.8-14.8-16.4-24.4-21.9c5.7,6.2,10.3,14.3,13.6,23.7C180.7,82.3,184.5,81.8,187.2,80.5z"/>\n            <path d="M181.4,60.1c0.5,0.3,1,0.7,1.5,1C182.4,60.7,181.9,60.4,181.4,60.1z"/>\n            <path d="M190.2,66.8l0.7,0.7C190.7,67.3,190.5,67.1,190.2,66.8z"/>\n            <path d="M188.6,79.8c0.4-0.2,0.7-0.5,1.1-0.8c1.7-1.5,2.5-3.2,2.4-5.2c-8-6.8-17.9-12.1-29.2-15.2\n                C172.9,63.8,181.6,71.2,188.6,79.8z"/>\n            <line class="st4" x1="70" y1="94.5" x2="69.9" y2="94.8"/>\n            <path d="M77.2,165c0.1,0.1,0.1,0.2,0.2,0.3C77.3,165.2,77.2,165.1,77.2,165z"/>\n            <path d="M78.3,166.7L78.3,166.7L78.3,166.7c-0.3-0.4-0.6-0.9-0.9-1.3C77.7,165.8,78,166.3,78.3,166.7z"/>\n            <path d="M175.8,56.7L175.8,56.7L175.8,56.7z"/>\n        </g>\n    </g>\n</svg>\n'},function(e,exports,t){e.exports=' <fieldset dropdown auto-close="outsideClick" class="custom-fieldset init">\n    <legend data-toggle="dropdown-menu" class="dropdown-trigger init" dropdown-toggle>\n      <span>\n        <span class="custom-fieldset-value">\n            {{canSeeThis()}}\n        </span>\n        <span translate="post.can_see_this">\n          can see this\n        </span>\n      </span>\n      <svg class="iconic chevron">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom">\n      </svg>\n    </legend>\n    <div class="dropdown-menu init" dropdown-menu>\n        <div class="form-fieldgroup" dropdown>\n            <div class="form-field radio">\n                <input\n                    name="{{post.id}}"\n                    id="{{post.id}}_draft"\n                    value="draft"\n                    type="radio"\n                    ng-checked="post.status===\'draft\'"\n                    ng-click="toggleRole(\'draft\')">\n                <label for="{{post.id}}_draft" translate="post.just_you">Just you</label>\n            </div>\n\n            <div class="form-field radio">\n                <input\n                    name="{{post.id}}"\n                    id="{{post.id}}_everyone"\n                    value=""\n                    type="radio"\n                    ng-checked="post.status===\'published\' && post.published_to.length === 0"\n                    ng-click="toggleRole(\'\')">\n                <label for="{{post.id}}_everyone" translate="post.everyone">Everyone</label>\n            </div>\n            <div class="form-field radio">\n              <input\n                  name="{{post.id}}"\n                  id="{{post.id}}_roles"\n                  auto-close="disabled"\n                  ng-checked="post.published_to.length"\n                  value="roles"\n                  type="radio" ng-click="toggleRolesView()">\n                <label for="{{post.id}}_roles" translate="post.specific_roles">Specific roles...</label>\n                <div class="form-fieldgroup" dropdown-menu ng-show="showRoles">\n                    <div class="form-field checkbox" ng-repeat="role in roles">\n                        <input\n                            id="{{role.id}}"\n                            type="checkbox"\n                            checklist-model="post.published_to"\n                            checklist-value="role.name"\n                            ng-click="toggleRole(role.name)">\n                        <label for="{{role.id}}">{{role.display_name}}</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</fieldset>\n'},function(e,exports,t){e.exports='    \x3c!--// Who can add //--\x3e\n    <fieldset>\n        <legend translate="{{title}}"></legend>\n        <div\n            class="form-field radio icon-input"\n            ng-class="{ \'checked\': !model.role.length }"\n        >\n            <label for="add_everyone">\n                <svg class="iconic">\n                    <use xlink:href="'+t(0)+'#globe"></use>\n                </svg>\n                <input\n                    name="add"\n                    id="add_everyone"\n                    ng-value="true"\n                    checked=""\n                    type="radio"\n                    ng-model="everyone"\n                    ng-click="setEveryone()"\n                >\n                <span class="label" translate="nav.everyone">Everyone</span>\n            </label>\n        </div>\n\n        <div\n            class="form-field radio icon-input"\n            ng-class="{ \'checked\': model.role.length }"\n        >\n            <label for="add_roles">\n                <svg class="iconic">\n                    <use xlink:href="'+t(0)+'#people"></use>\n                </svg>\n                <input\n                    class="init"\n                    name="add"\n                    id="add_roles"\n                    ng-value="false"\n                    ng-modaldata-fieldgroup-toggle="add_roles"\n                    type="radio"\n                    ng-model="everyone"\n                >\n                <span translate="app.specific_roles">Specific roles...</span>\n            </label>\n\n            <div\n                class="form-fieldgroup init"\n                data-fieldgroup-target="add_roles"\n                ng-class="{true:\'\', false:\'active\'}[everyone]"\n            >\n\n                <div class="form-field checkbox" ng-repeat="role in roles">\n                    <label>\n                    <input\n                        type="checkbox"\n                        checklist-model="model.role"\n                        checklist-value="role.name"\n                    >\n                    {{role.display_name}}\n                    </label>\n                </div>\n            </div>\n        </div>\n    </fieldset>\n'},function(e,exports){e.exports='<a embed-only="true" href="https://www.ushahidi.com" class="ushahidi-bug" target="_blank">\n  <ng-include include-replace src="\'common/directives/mode-bar/ushahidi-logo.html\'"></ng-include>\n  <span class="hidden">Powered by Ushahidi</span>\n</a>\n'},function(e,exports){e.exports='<p>{{ message }}</p>\n<div class="form-field">\n    <a class="button button-beta button-flat" ng-click="close()" href="/settings/plan" translate>limit.upgrade</a>\n    <button class="button-flat message-trigger" ng-click="close()" translate="message.button.dismiss">\n        Dismiss\n    </button>\n</div>\n'},function(e,exports){e.exports='\n<div class="message" ng-class="{\'active\': classVisible}">\n    <div class=\'progress-bar\' ng-if="loading"><span>Loading...</span></div><br>\n    <div class="message-image" ng-class="iconClass" ng-if="icon">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{ icon }}"></use>\n        </svg>\n    </div>\n    <div class="message-body">\n\t\t<slider-content></slider-content>\n\n        <button class="button-flat message-trigger" ng-show="showCloseButton" ng-click="closeButtonClicked()" translate="message.button.dismiss">\n            Dismiss\n        </button>\n    </div>\n</div>\n'},function(e,exports){e.exports='<div>\n  <h3 class="modal-title">\n    {{user.realname || user.email}} <em translate>user_profile.title</em>\n  </h3>\n\n  <nav class="tabs-menu init">\n    <ul>\n      <li ng-class="{\'active\': general}">\n        <a ng-click="showGeneral()" translate>\n          user_profile.nav.general\n        </a>\n      </li>\n      <li ng-class="{\'active\': notifications}">\n        <a ng-click="showNotifications()" translate>\n          user_profile.nav.notifications\n        </a>\n      </li>\n    </ul>\n  </nav>\n\n  <div class="modal-body">\n    <user-profile ng-show="general"></user-profile>\n    <notifications ng-show="notifications"></notifications>\n  </div>\n</div>\n'},function(e,exports){e.exports='<div>\n    <div class="modal-body">\n        <user-profile admin-user-setup="true"></user-profile>\n    </div>\n</div>'},function(e,exports,t){e.exports='<div class="account-tab">\n  <div class="listing">\n\n    <h3 class="listing-heading" ng-if="contacts.length !== 0" translate>notification.contacts_heading</h3>\n\n    <div class="listing-item"\n         ng-repeat="contact in contacts"\n         ng-class="{\'active\': contact.active}">\n      <div class="listing-item-secondary">\n        <button type="button" class="button-link" ng-click="toggleActive(contact)">\n          <svg class="iconic">\n            <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n          </svg>\n          <span class="button-label" translate>contact.configure</span>\n        </button>\n      </div>\n\n      <div class="listing-item-primary">\n        <h2 class="listing-item-title">\n          {{contact.contact}}\n          <span class="status-indicator" ng-class="{green: contact.can_notify}"></span>\n        </h2>\n      </div>\n\n      \x3c!-- Edit existing contact --\x3e\n      <div class="listing-item-body">\n\n        <div class="form-field switch">\n          <label translate>notification.send_to_address</label>\n          <div class="toggle-switch">\n            <input class="tgl"\n                   id="{{contact.id || false}}"\n                   type="checkbox"\n                   ng-model="contact.can_notify">\n            <label class="tgl-btn" for="{{contact.id || false}}"></label>\n          </div>\n        </div>\n\n        <form name="editContactForm">\n\n          <div class="form-field">\n            <label ng-if="contact.type === \'email\'"\n                   class="input-label"\n                   ng-class="{ \'error\': editContactForm.contact.$invalid && editContactForm.contact.$dirty, \'success\': editContactForm.contact.$valid }"\n                   for="contact" translate>contact.edit_email_address</label>\n            <label ng-if="contact.type === \'phone\'"\n                   class="input-label"\n                   for="contact" translate>contact.edit_phone_number</label>\n            <p ng-repeat="(error, value) in editContactForm.contact.$error"\n               ng-if="contact.type === \'email\'"\n               ng-show="editContactForm.contact.$dirty"\n               class="alert error"\n               translate="{{\'contact.valid.email.\' + error}}"></p>\n            <p ng-repeat="(error, value) in editContactForm.contact.$error"\n               ng-if="contact.type === \'phone\'"\n               ng-show="editContactForm.contact.$dirty"\n               class="alert error"\n               translate="{{\'contact.valid.phone.\' + error}}"></p>\n\n            <input name="contact"\n                   id="contact"\n                   ng-if="contact.type === \'email\'"\n                   type="email"\n                   ng-class="{ \'error\': editContactForm.contact.$invalid && editContactForm.contact.$dirty }"\n                   ng-maxlength="150"\n                   ng-model="contact.contact"\n                   required>\n            <input name="contact"\n                   id="contact"\n                   ng-if="contact.type === \'phone\'"\n                   type="text"\n                   ng-class="{ \'error\': editContactForm.contact.$invalid && editContactForm.contact.$dirty }"\n                   ng-maxlength="25"\n                   ng-model="contact.contact"\n                   ng-pattern="/^\\d+$/"\n                   required>\n          </div>\n        </form>\n\n        <div class="form-field" ng-if="!contact.isLoginEmail">\n          <button class="button-destructive" ng-click="deleteContact(contact)" translate>contact.button.delete</button>\n        </div>\n\n      </div>\n    </div>\n\n    \x3c!-- Add contact--\x3e\n\n    <div class="listing-item"\n         ng-class="{\'active\': contact.active}"\n         >\n      <div class="listing-item-primary">\n        <h2 class="listing-item-title">\n          <a class="button button-flat"\n             ng-click="toggleActive(contact)"\n             translate>\n            <svg class="iconic">\n              <use xlink:href="'+t(0)+'#plus"></use>\n            </svg>\n            contact.button.add\n          </a>\n        </h2>\n      </div>\n\n      <div class="listing-item-body">\n        <form name="addContactForm">\n          <div class="form-field">\n            <label class="radio-label">\n              <input ng-model="contact.type"\n                     name="email" value="email" id="email" type="radio"\n                     checked="checked">\n              {{\'contact.type.email\' | translate}}\n            </label>\n          </div>\n\n          <div class="form-field">\n            <label class="radio-label">\n              <input ng-model="contact.type"\n                     name="phone" value="phone" id="phone" type="radio">\n              {{\'contact.type.phone\' | translate}}\n            </label>\n          </div>\n\n          <div class="form-field">\n            <label ng-if="contact.type === \'email\'"\n                   class="input-label"\n                   ng-class="{ \'error\': addContactForm.contact.$invalid && addContactForm.contact.$dirty, \'success\': addContactForm.contact.$valid }"\n                   for="contact" translate>contact.add_email_address</label>\n            <label ng-if="contact.type === \'phone\'"\n                   class="input-label"\n                   for="contact" translate>contact.add_phone_number</label>\n\n            <p ng-repeat="(error, value) in addContactForm.contact.$error"\n               ng-if="contact.type === \'email\'"\n               ng-show="addContactForm.contact.$dirty"\n               class="alert error"\n               translate="{{\'contact.valid.email.\' + error}}"></p>\n            <p ng-repeat="(error, value) in addContactForm.contact.$error"\n               ng-if="contact.type === \'phone\'"\n               ng-show="addContactForm.contact.$dirty"\n               class="alert error"\n               translate="{{\'contact.valid.phone.\' + error}}"></p>\n            <input name="contact"\n                   id="contact"\n                   ng-if="contact.type === \'email\'"\n                   type="email"\n                   placeholder="{{\'contact.add_email_address\' | translate}}"\n                   ng-class="{ \'error\': addContactForm.contact.$invalid && addContactForm.contact.$dirty }"\n                   ng-maxlength="150"\n                   ng-model="contact.contact"\n                   required>\n            <input name="contact"\n                   id="contact"\n                   ng-if="contact.type === \'phone\'"\n                   type="text"\n                   placeholder="{{\'contact.add_phone_number\' | translate}}"\n                   ng-class="{ \'error\': addContactForm.contact.$invalid && addContactForm.contact.$dirty }"\n                   ng-maxlength="25"\n                   ng-model="contact.contact"\n                   ng-pattern="/^\\d+$/"\n                   required>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Notifications --\x3e\n\n  <div class="listing" ng-if="notifications.length !== 0">\n    <h3 class="listing-heading" translate>notification.notifications_heading</h3>\n\n    <div ng-repeat="notification in notifications"\n         class="listing-item">\n      <div class="listing-item-secondary">\n        <button type="button" class="button-link" ng-click="deleteNotification(notification)">\n          <svg class="iconic">\n            <use xlink:href="'+t(0)+'#circle-x"></use>\n          </svg>\n          <span class="button-label" translate>notification.button.delete</span>\n        </button>\n      </div>\n\n      <div class="listing-item-primary">\n        <div class="listing-item-image">\n          <svg class="iconic">\n            <use xlink:href="'+t(0)+'#star"></use>\n          </svg>\n        </div>\n\n        <h2 class="listing-item-title">{{notification.name}}</h2>\n      </div>\n    </div>\n\n  </div>\n\n    <div class="modal-actions">\n      <div class="form-field">\n        <button type="button" class="button-link" ng-click="cancel()" translate>user_profile.button.cancel</button>\n        <button type="button" class="button-alpha"\n                ng-disabled="!canAdd() && !canUpdate()"\n                ng-click="saveContacts()">\n          <div class="loading" ng-show="saving"><div class="line"></div><div class="line"></div><div class="line"></div></div>\n          <span translate>user_profile.button.save</span>\n        </button>\n\n      </div>\n    </div>\n</div>\n\n'},function(e,exports){e.exports='<div>\n        <p class="alert confirmation" ng-show="state.success" translate>user_profile.update_success</p>\n        <form name="form">\n          <div class="form-field">\n              <label translate="nav.role">Role</label>\n              <em>{{user.role}}</em>\n          </div>  \n          <div class="form-field">\n            <label class="input-label"\n                ng-class="{ \'error\': form.full_name.$invalid && form.full_name.$dirty, \'success\': form.full_name.$valid }"\n                for="full_name" translate>user.full_name</label>\n            <input id="full_name" name="full_name" type="text"\n                ng-class="{ \'error\': form.full_name.$invalid && form.full_name.$dirty }"\n                ng-disabled="state.processing"\n                placeholder="{{ \'user_create.full_name\'|translate }}"\n                ng-maxlength="150"\n                ng-model="user.realname"\n                required>\n            <p ng-repeat="(error, value) in form.full_name.$error"\n                ng-show="form.full_name.$dirty"\n                class="alert error"\n               translate="{{\'user.valid.full_name.\' + error}}"></p>\n          </div>\n\n          <div class="form-field">\n            <label class="input-label"\n                ng-class="{ \'error\': form.email.$invalid && form.email.$dirty, \'success\': form.email.$valid }"\n                for="email" translate>user.email</label>\n            <input id="email" name="email" type="email"\n                ng-class="{ \'error\': form.email.$invalid && form.email.$dirty }"\n                ng-disabled="state.processing"\n                placeholder="{{ \'user_create.email\'|translate }}"\n                ng-maxlength="150"\n                ng-model="user.email"\n                required>\n            <p ng-repeat="(error, value) in form.email.$error"\n                ng-show="form.email.$dirty||adminUserSetup"\n                class="alert error"\n               translate="{{\'user.valid.email.\' + error}}"></p>\n            </div>\n\n            <p ng-hide="state.changingPassword"><a href class="cta change-password" ng-click="state.changingPassword = !state.changingPassword" translate>user_profile.update_password</a></p>\n\n            <div ng-if="state.changingPassword">\n                <label class="input-label"\n                    ng-class="{ \'error\': form.password.$invalid && form.password.$dirty, \'success\': form.password.$valid }"\n                    for="password" translate>user.password</label>\n                <input id="password" name="password" type="password"\n                    ng-class="{ \'error\': form.password.$invalid && form.password.$dirty }"\n                    ng-disabled="state.processing"\n                    ng-minlength="7"\n                    ng-maxlength="72"\n                    ng-model="state.password"\n                    required>\n                <p ng-repeat="(error, value) in form.password.$error"\n                    ng-show="form.password.$dirty"\n                    class="alert error"\n                    translate="{{\'user.valid.password.\' + error}}"></p>\n            </div>\n\n            <div class="modal-actions">\n                <div class="form-field">\n                  <button ng-if="!adminUserSetup" type="button" class="button-link" ng-click="cancel()" translate>\n                    user_profile.button.cancel\n                  </button>\n\n                  <button type="submit" class="button button-alpha"\n                          ng-click="saveUser(user)" ng-disabled="form.$invalid || state.processing">\n                    <div class="loading" ng-show="saving"><div class="line"></div><div class="line"></div><div class="line"></div></div>\n                    <span translate>user_profile.button.save</span>\n                  </button>\n\n                </div>\n            </div>\n        </form>\n</div>\n'},function(e,exports,t){e.exports='<div>\n<div class="main-col">\n\n   <div class="listing">\n\n       <article class="postcard">\n           <div class="post-band" ng-style="{backgroundColor: form.color}"></div>\n           <div class="listing-item-select">\n               <input type="checkbox">\n           </div>\n           <div class="postcard-body">\n               <h1 class="postcard-title"><a href="">Overcrowding between 5th St. &amp; Salem Ave.</a></h1>\n               <span class="postcard-metadata"><a href="" class="postcard-author"><img src="https://api.adorable.io/avatars/40/abott@adorable.io.png" class="avatar" />Jess Shorland</a>, 45 mins, via SMS</span>\n\n               <div class="postcard-field">\n                   <p>Forms are the standard way to receive user inputted data. The transitions and smoothness of these elements are very important because of the inherent user interaction associated with forms.</p>\n               </div>\n           </div>\n\n           <span class="postcard-actions-trigger" data-toggle="dropdown-menu">\n               <svg class="iconic">\n                 <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n               </svg>\n           </span>\n           <ul class="dropdown-menu">\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#pencil"></use>\n                   </svg>\n                   <span class="label">Edit</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#grid-three-up"></use>\n                   </svg>\n                   <span class="label">Add to Collection</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#share"></use>\n                   </svg>\n                   <span class="label">Share</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#task"></use>\n                   </svg>\n                   <span class="label">Assign to...</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#trash"></use>\n                   </svg>\n                   <span class="label">Delete</span>\n                   </a>\n               </li>\n           </ul>\n       </article>\n\n       <article class="postcard">\n\n           <div class="post-band"  ng-style="{ backgroundColor: form.color}"></div>\n           <div class="listing-item-select">\n               <input type="checkbox">\n           </div>\n           <div class="postcard-body">\n               <h1 class="postcard-title"><a href="">Overcrowding between 5th St. &amp; Salem Ave.</a></h1>\n               <span class="postcard-metadata"><a href="" class="postcard-author"><img src="https://api.adorable.io/avatars/40/abott@adorable.io.png" class="avatar" />Jess Shorland</a>, 45 mins, via SMS</span>\n\n               <div class="postcard-field">\n                   <img src="//lorempixel.com/400/300/" class="postcard-image" />\n               </div>\n           </div>\n\n           <span class="postcard-actions-trigger" data-toggle="dropdown-menu">\n               <svg class="iconic">\n                 <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n               </svg>\n           </span>\n           <ul class="dropdown-menu">\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#pencil"></use>\n                   </svg>\n                   <span class="label">Edit</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#grid-three-up"></use>\n                   </svg>\n                   <span class="label">Add to Collection</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#share"></use>\n                   </svg>\n                   <span class="label">Share</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#task"></use>\n                   </svg>\n                   <span class="label">Assign to...</span>\n                   </a>\n               </li>\n               <li>\n                   <a href="">\n                   <svg class="iconic">\n                       <use xlink:href="'+t(0)+'#trash"></use>\n                   </svg>\n                   <span class="label">Delete</span>\n                   </a>\n               </li>\n           </ul>\n       </article>\n\n       <div class="listing-toolbar">\n           <div class="listing-toolbar-summary">\n               <strong><span class="total"></span> selected</strong>\n               <button class="button-link">Deselect</button>\n           </div>\n\n           <div class="listing-toolbar-actions">\n\n               <fieldset class="custom-fieldset">\n                   <legend>Mark as</legend>\n\n                   <div class="form-field radio">\n                       <label for="contributor">\n                           <input type="radio" name="role" id="contributor">\n                           Spam\n                       </label>\n                   </div>\n\n                   <div class="form-field radio">\n                       <label for="editor">\n                           <input type="radio" name="role" id="editor">\n                           Duplicates\n                       </label>\n                   </div>\n               </fieldset>\n\n               <fieldset class="custom-fieldset">\n                   <legend>\n                       <svg class="iconic">\n                           <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#grid-three-up"></use>\n                       </svg>\n                       Add to Collection\n                   </legend>\n\n                   <div class="form-field radio">\n                       <label for="contributor">\n                           <input type="radio" name="role" id="contributor">\n                           Spam\n                       </label>\n                   </div>\n\n                   <div class="form-field radio">\n                       <label for="editor">\n                           <input type="radio" name="role" id="editor">\n                           Duplicates\n                       </label>\n                   </div>\n               </fieldset>\n\n               <button type="button">\n                   <svg class="iconic">\n                       <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#external-link"></use>\n                   </svg>\n                   <span class="button-label">Export</span>\n               </button>\n\n               <button type="button" class="button-destructive">\n                   <svg class="iconic">\n                       <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                   </svg>\n                   <span class="button-label hidden">Delete</span>\n               </button>\n\n               <button type="button" class="listing-toolbar-toggle more">\n                   <svg class="iconic">\n                       <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#ellipses"></use>\n                   </svg>\n                   <span class="button-label">Show more</span>\n               </button>\n\n               <button type="button" class="listing-toolbar-toggle less">\n                   <svg class="iconic">\n                       <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#x"></use>\n                   </svg>\n                   <span class="button-label">Show less</span>\n               </button>\n           </div>\n       </div>\n  </div>\n</div> \x3c!--end main column--\x3e\n\n<div>\n<h3 translate>activity.recent_activity_timeline</h3>\n<div ng-show="isLoading"><i class="fa fa-refresh fa-4 fa-spin"></i></div>\n<div class="activity-timeline" ng-hide="isLoading">\n\n    <div class="timestamp"><span ng-bind="start_timestamp"></span> AGO</div>\n\n    <div class="activity-listing" ng-repeat="post in ::posts">\n        <div class="activity-type post" translate>\n        activity.new_post\n        </div>\n        <div class="listing-summary">\n            <h3>\n                <a ng-href="/posts/{{::post.id}}" ng-bind="::post.title"></a>\n            </h3>\n            <p translate>activity.by <a ng-href="" ng-bind="::post.user.realname"></a></p>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n\n    \x3c!-- USE NG-SWITCH TO RENDER DIFF TYPES OF ACTIVITES --\x3e\n\n    \x3c!-- <a class="button" href="#">\n        <span>View Full Timeline</span>\n    </a> --\x3e\n\n    \x3c!-- <div class="activity-listing">\n        <div class="activity-type post">\n            New Post\n        </div>\n        <div class="listing-summary">\n            <h3>\n                <a href="">Bus carring Shiite pilgrims bombed</a>\n            </h3>\n            <p>By <a href="">David Kobia</a></p>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n\n    <div class="activity-listing">\n        <div class="activity-type comment">\n            New Comment\n        </div>\n        <div class="listing-summary">\n            <p>\n                By <a href="">David Kobia</a> on <a href="">Unstable building due to explosion next to road</a>:\n            </p>\n            <blockquote>\n                Totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae.\n            </blockquote>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n\n    <div class="activity-listing">\n        <div class="activity-type collection">\n            New Collection\n        </div>\n        <div class="listing-summary">\n            <h3>\n                <a href="">Bus carring Shiite pilgrims bombed</a>\n            </h3>\n            <p>By <a href="">David Kobia</a></p>\n        </div>\n\n        <div class="clearfix"></div>\n    </div>\n\n    <div class="timestamp">6 Hours Ago</div>\n\n    <div class="activity-listing">\n        <div class="activity-type saved-search">\n            New Saved Search\n        </div>\n        <div class="listing-summary">\n            <h3>\n                <a href="">Missing Children since 2012</a>\n            </h3>\n            <p>By <a href="">David Kobia</a></p>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n\n    <div class="activity-listing">\n        <div class="activity-type post">\n            New Post\n        </div>\n        <div class="listing-summary">\n            <h3>\n                <a href="">Bus carring Shiite pilgrims bombed</a>\n            </h3>\n            <p>By <a href="">David Kobia</a></p>\n        </div>\n        <div class="clearfix"></div>\n    </div> --\x3e\n</div>\n</div>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <layout-class layout="a"></layout-class>\n    <div class="mode-context init" ng-controller="navigation as nav" dropdown>\n        <header class="mode-context-header" ng-class="{ \'has-logo\' : nav.site.image_header }">\n            <h1 class="mode-context-title"><a href="/" ng-bind="nav.site.name"></a></h1>\n            <img ng-if="nav.site.image_header" ng-src="{{ nav.site.image_header }}" class="deployment-logo" />\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n\n        <div class="mode-context-body">\n            <p markdown-to-html="nav.site.description"></p>\n        </div>\n    </div>\n\n    <main role="main">\n        <div class="toolbar" ng-show="isActivityAvailable" >\n            <form role="search" class="searchbar" name="searchForm" ng-submit="saveFilters()">\n\n                <div class="searchbar-options">\n                    <fieldset class="custom-fieldset init" data-fieldset-type="date-range" dropdown auto-close="disabled" is-open="filtersMenuOpen">\n                        <legend class="dropdown-trigger init" dropdown-toggle>\n                            <span class="legend-label" ng-show="currentInterval !== \'custom\'" translate="{{\'graph.\' + currentInterval }}">Date range</span>\n                            <span class="legend-label"  ng-show="currentInterval == \'custom\'"\n                                translate="graph.custom_display"\n                                translate-values="{\n                                    start: (filters.created_after | date:\'mediumDate\'),\n                                    end: (filters.created_before | date:\'mediumDate\') }"\n                                translate-compile>Date range</span>\n                            <svg class="iconic chevron"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use></svg>\n                        </legend>\n\n                        <div class="dropdown-menu init" dropdown-menu>\n                            <div class="form-field radio">\n                                <label>\n                                    <input ng-model="editableInterval" type="radio" name="editableInterval" value="all">\n                                    <span translate="graph.all">All time<span>\n                                </label>\n                            </div>\n                            <div class="form-field radio">\n                                <label>\n                                    <input ng-model="editableInterval" type="radio" name="editableInterval" value="week">\n                                    <span translate="graph.week">This week<span>\n                                </label>\n                            </div>\n                            <div class="form-field radio">\n                                <label>\n                                    <input ng-model="editableInterval" type="radio" name="editableInterval" value="month">\n                                    <span translate="graph.month">This month<span>\n                                </label>\n                            </div>\n\n                            <div class="form-field radio">\n                                <label>\n                                    <input ng-model="editableInterval" type="radio" name="editableInterval" value="custom">\n                                    <span translate="graph.custom">Custom date range<span>\n                                </label>\n\n                                \x3c!-- todo: reuse filter-date --\x3e\n                                <div class="form-fieldgroup">\n                                    <div class="form-field date" ng-show="editableInterval == \'custom\'">\n                                        <label class="hidden" translate="global_filter.filter_tabs.created_after">Start date</label>\n                                        <div class="input-with-icon">\n                                            <svg class="iconic">\n                                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#calendar"></use>\n                                            </svg>\n                                            <input type="date" pick-a-date="createdAfter" pick-a-date-options="dateOptions" placeholder="{{ \'global_filter.filter_tabs.created_after\' | translate }}" ng-model="createdAfter" />\n                                        </div>\n                                        <span class="date-joiner">to</span>\n                                    </div>\n\n                                    <div class="form-field date" ng-show="editableInterval == \'custom\'">\n                                        <label class="hidden" translate="global_filter.filter_tabs.created_before">End date</label>\n                                        <div class="input-with-icon">\n                                            <svg class="iconic">\n                                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#calendar"></use>\n                                            </svg>\n                                            <input type="date" pick-a-date="createdBefore" pick-a-date-options="dateOptions" placeholder="{{ \'global_filter.filter_tabs.created_before\' | translate }}" ng-model="createdBefore">\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-field">\n                                <button type="button" class="button-link" ng-click="cancelChangeFilters()" translate="app.cancel">Cancel</button>\n                                <button type="submit" class="button-alpha" translate="app.apply_filters">Apply filter</button>\n                            </div>\n                        </div>\n                    </fieldset>\n                </div>\n\n            </form>\n        </div>\n\n    \t\x3c!-- unavailable view --\x3e\n        <post-view-unavailable ng-hide="isActivityAvailable" view="\'nav.activity\' | translate"></post-view-unavailable>\n        \x3c!-- <img ng-hide="isActivityAvailable" src/img/activity-page.png" style="opacity: 0.4; filter: blur(1px);" /> --\x3e\n\n        <div ng-show="isActivityAvailable" class="main-col">\n            <div class="listing card init">\n                <div class="listing-item active">\n                   <div class="listing-item-secondary">\n                        <button ng-show="todo" type="button" class="button-beta button-flat">\n                            <svg class="iconic">\n                                <use xlink:href="'+t(0)+'#share"></use>\n                            </svg>\n                            <span class="hidden" translate="app.share">Share</span>\n                        </button>\n                    </div>\n\n                    <div class="listing-item-primary">\n                        <h2 class="listing-item-title" translate="activity.activity_over_time">Activity over time</h2>\n                    </div>\n\n                    <div class="listing-item-body">\n                        \x3c!-- <dc-chart-by-volume date-range="dateRange"></dc-chart-by-volume> --\x3e\n                        <activity-time-chart filters="filters"></activity-bar-chart>\n                    </div>\n                </div>\n                <div class="listing-item active">\n                   <div class="listing-item-secondary">\n                        <button ng-show="todo" type="button" class="button-beta button-flat">\n                            <svg class="iconic">\n                                <use xlink:href="'+t(0)+'#share"></use>\n                            </svg>\n                            <span class="hidden" translate="app.share">Share</span>\n                        </button>\n                    </div>\n\n                    <div class="listing-item-primary">\n                        <h2 class="listing-item-title" translate="activity.activity_by_volume">Activity by volume</h2>\n                    </div>\n\n                    <div class="listing-item-body">\n                        \x3c!-- <dc-chart-by-time date-range="dateRange"></dc-chart-by-time> --\x3e\n                        <activity-bar-chart filters="filters"></activity-time-chart>\n                    </div>\n                </div>\n            </div>\n        </div> \x3c!--end main column--\x3e\n\n        <aside class="secondary-col" role="complementary">\n            \x3c!-- <activity-timeline></activity-timeline> --\x3e\n        </aside>\n\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div class="graph-view">\n    <fieldset class="custom-fieldset init" dropdown is-open="compareIsOpen">\n        <legend class="dropdown-trigger init" data-toggle="dropdown-menu" dropdown-toggle>\n            <span class="legend-label" translate="graph.compare" ng-show="compareIsOpen">Compare...</span>\n            <span class="legend-label" translate="graph.compare_{{groupBy.value || \'all\'}}" ng-hide="compareIsOpen">Compare...</span>\n            <svg class="iconic chevron">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n        </legend>\n\n        <div class="dropdown-menu init" dropdown-menu>\n            <div class="form-field radio" ng-repeat="(key, value) in groupByOptions">\n                <label>\n                    <input type="radio" ng-value="key" ng-model="groupBy.value" ng-change="reload()"> {{::value | translate}}\n                </label>\n            </div>\n        </div>\n    </fieldset>\n\n    <nvd3 options=\'options\' data=\'data\'></nvd3>\n</div>\n'},function(e,exports,t){e.exports='<div class="timeline-view">\n    <fieldset class="custom-fieldset init" dropdown is-open="compareIsOpen">\n        <legend class="dropdown-trigger init" data-toggle="dropdown-menu" dropdown-toggle>\n            <span class="legend-label" translate="graph.compare" ng-show="compareIsOpen">Compare...</span>\n            <span class="legend-label" translate="graph.compare_{{groupBy.value || \'all\'}}" ng-hide="compareIsOpen">Compare...</span>\n            <svg class="iconic chevron">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n        </legend>\n\n        <div class="dropdown-menu init" dropdown-menu>\n            <div class="form-field radio" ng-repeat="(key, value) in groupByOptions">\n                <label>\n                    <input type="radio" ng-value="key" ng-model="groupBy.value" ng-change="reload()"> {{::value | translate}}\n                </label>\n            </div>\n            <div class="form-fieldgroup">\n                <div class="form-field checkbox">\n                    <label>\n                        <input type="checkbox" name="showCumulative" ng-model="showCumulative" ng-change="reload()">\n                        <span translate="graph.cumulative">Show cumulative totals</span>\n                    </label>\n                </div>\n            </div>\n        </div>\n    </fieldset>\n\n    <div class="nvd3-wrapper">\n      <nvd3 options=\'options\' data=\'data\'></nvd3>\n    </div>\n</div>\n'},function(e,exports,t){e.exports='<div class="modal-body">\n    <div class="form-field title">\n        <label translate>set.collection_name</label>\n        <input type="text" ng-model="cpyCollection.name" placeholder="{{\'set.name_your_collection\'|translate}}">\n    </div>\n\n    <div class="form-field">\n        <label translate>\n            set.description\n        </label>\n        <textarea ng-model="cpyCollection.description"></textarea>\n    </div>\n\n    <div class="form-field switch" ng-if="featuredEnabled()">\n        <label>\n            <span translate>\n                set.featured\n            </span>\n            <span class="tooltip">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#question-mark"></use>\n                </svg>\n                <span class="bug" translate>set.featured_collection_tooltip</span>\n            </span>\n        </label>\n        <div class="toggle-switch">\n            <input class="tgl" id="switch1" type="checkbox" ng-model="cpyCollection.featured">\n            <label class="tgl-btn" for="switch1"></label>\n        </div>\n    </div>\n\n    <div class="form-field">\n        <label translate>set.default_viewing_mode</label>\n        <div class="custom-select">\n            <select ng-options="view.name as view.display_name for view in views" ng-model="cpyCollection.view">\n            </select>\n        </div>\n    </div>\n    \x3c!-- Who can see --\x3e\n    <role-selector model="cpyCollection" title="\'app.who_can_see_this\'"></role-selector>\n\n    <div class="modal-actions">\n        <div class="form-field">\n            <button type="button" class="button-link  modal-trigger" ng-click="cancel()" translate>app.cancel</button>\n            <button type="button" class="button-alpha modal-trigger" ng-click="saveCollection(cpyCollection)" translate>app.save_and_close</button>\n        </div>\n    </div>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <div class="modal-body" style="max-height: 337.26px;">\n        <div class="form-field search">\n            <label class="hidden" translate>set.find_a_collection</label>\n            <div class="input-with-icon">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#magnifying-glass"></use>\n                </svg>\n                <form ng-submit="searchCollections(collectionQuery)">\n                    <input name="collectionQuery" ng-model="collectionQuery" type="search" placeholder="{{ \'set.find_a_collection\' | translate}}">\n                </form>\n            </div>\n        </div>\n        <div class="listing init">\n\n            <div class="listing-item" ng-repeat="collection in collections">\n                <div class="listing-item-select" ng-if="isToggleMode">\n                    <input\n                        type="checkbox"\n                        ng-checked="postInCollection(collection)"\n                        ng-click="toggleCollection(collection)">\n                </div>\n                <div class="listing-item-primary">\n                    <h2 class="listing-item-title">\n                        <a ng-click="collectionClickHandler(collection)">\n                            {{collection.name}}\n                        </a>\n                    </h2>\n                    <p class="listing-item-secondary" ng-if="collection.user_id">\n                        <span translate>\n                            app.by\n                        </span>\n                        <a ng-href="/users/{{collection.user_id}}">\n                            {{collection.user_id}}\n                        </a>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="modal-actions" ng-if="currentUser">\n        <div class="form-field">\n            <button type="button" class="button-beta" ng-click="createNewCollection()">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                </svg>\n                <span class="button-label" translate>app.create_new</span>\n            </button>\n        </div>\n    </div>\n</div>\n'},function(e,exports,t){e.exports='<div class="mode-context init" dropdown>\n    <header class="mode-context-header">\n        <ol class="breadcrumbs" ng-controller="navigation as nav">\n            <li><a href="/">{{ nav.site.name }}</a></li>\n        </ol>\n        <h1 class="mode-context-title">\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#grid-three-up"></use>\n            </svg>\n            {{collection.name}}\n        </h1>\n    </header>\n\n    <span class="mode-context-trigger" dropdown-toggle>\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span class="label hidden" translate>app.show_more_less</span>\n    </span>\n\n    <div class="mode-context-body">\n        \x3c!--// IF: Saved Search has description //--\x3e\n        <p ng-if="collection.description">{{collection.description}}</p>\n        \x3c!--// END IF //--\x3e\n\n        <ul class="metadata">\n            <li>\n                <span class="status-indicator public tooltip" ng-if="!collection.role || collection.role.length == 0">\n                    <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#globe"></use>\n                    </svg>\n                    <span class="bug" translate="collection.visible_to_public">This Collection is visible to the public</span>\n                </span>\n                <span class="status-indicator yellow tooltip" ng-if="collection.role.length > 0">\n                    <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#globe"></use>\n                    </svg>\n                    <span class="bug" translate="collection.visible_to_roles" translate-values="{ roles: collection.role.join(\', \') }">This Collection is visible to ...</span>\n                </span>\n            </li>\n            <li>\n                <span ng-if="collection.user">\n                    <span translate=\'app.created_by\' translate-values="{ author : collection.user.realname }">Created by</span>\n                </span>\n            </li>\n        </ul>\n\n        \x3c!--// IF: User has permission to edit the Saved Search //--\x3e\n        <div class="form-field" ng-if="canEdit" dropdown>\n            <button type="button" data-modal="edit-collection" ng-click="editCollection()">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#pencil"></use>\n                </svg>\n                <span class="button-label" translate>app.edit</span>\n            </button>\n\n            <button type="button" data-toggle="dropdown-menu" class="init" dropdown-toggle>\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#ellipses"></use>\n                </svg>\n                <span class="button-label hidden" translate>app.more</span>\n            </button>\n            <ul class="dropdown-menu init" dropdown-menu>\n                <li ng-if="showNotificationLink">\n                    <a ng-click="saveNotification(collection)">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                        </svg>\n                        <span class="label" ng-click="saveNotification(collection)" translate="app.get_notifications">Get notifications</span>\n                    </a>\n                </li>\n                <li ng-if="!showNotificationLink">\n                    <a ng-click="removeNotification(collection)">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                        </svg>\n                        <span class="label" translate="app.turn_off_notifications">Turn off notifications</span>\n                    </a>\n                </li>\n                <li>\n                    <a ng-click="deleteCollection()">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                        </svg>\n                        <span class="label" translate="app.delete"></span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n        \x3c!--// END IF //--\x3e\n\n        \x3c!--// IF: User does not have permission to edit the Saved Search //--\x3e\n        <div class="form-field" ng-if="!canEdit && $root.loggedin">\n            \x3c!-- // IF: User is not yet getting notifications about this Saved Search //--\x3e\n            <button type="button" ng-if="showNotificationLink" ng-click="saveNotification(collection)">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                </svg>\n                <span class="button-label" translate="app.get_notifications">Get notifications</span>\n            </button>\n\n            \x3c!--// ELSE //--\x3e\n\n            <button type="button" ng-if="!showNotificationLink" class="button-flat">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                </svg>\n                <span class="button-label" translate="app.turn_off_notifications">Turn off notifications</span>\n            </button>\n            \x3c!--// END IF //--\x3e\n        </div>\n        \x3c!--// END IF //--\x3e\n        <div class="form-field">\n            \x3c!-- mode context bar is only available in the map so it should take you back there --\x3e\n            <a ng-click="clearFilters()" type="button" class="button-link">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#arrow-left"></use>\n                </svg>\n                <span class="button-label" translate="app.return_to_all_posts">Return to all posts</span>\n            </a>\n        </div>\n\n        <mode-context-form-filter></mode-context-form-filter>\n\n    </div>\n</div>\n'},function(e,exports,t){e.exports='<button type="button" class="button-beta" data-modal="add-to-collection" ng-click="toggleCollection()">\n    <svg class="iconic">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#grid-three-up"></use>\n    </svg>\n    <span class="button-label hidden" translate="set.add_to_collection">Add to collection</span>\n</button>\n'},function(e,exports,t){e.exports='<a data-modal="add-to-collection" ng-click="toggleCollection()">\n    <svg class="iconic">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#grid-three-up"></use>\n    </svg>\n    <span class="label"translate="set.add_to_collection">Add to collection</span>\n</a>\n'},function(e,exports,t){e.exports='<div class="postcard-actions" dropdown >\n  <button class="button-gamma button-flat init" data-toggle="dropdown-menu" dropdown-toggle ng-click="$event.stopPropagation()">\n      <svg class="iconic">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#ellipses"></use>\n      </svg>\n      <span class="hidden">More</span>\n  </button>\n  <div class="dropdown-menu init" dropdown-menu>\n    <ul>\n\n\n        <li ng-show="(post.allowed_privileges.indexOf(\'update\') !== -1) && postIsUnlocked()">\n          <a ng-click="openEditMode(post.id)">\n              <svg class="iconic">\n                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#pencil"></use>\n              </svg>\n              <span class="label" translate="nav.edit">Edit</span>\n          </a>\n        </li>\n        <li>\n            \x3c!-- Collection toggle link --\x3e\n            <collection-toggle-link post="post"></collection-toggle-link>\n        </li>\n        <li>\n            <post-share post-id="post.id"></post-share>\n        </li>\n      \x3c!-- <li>\n        <a href="">\n          <svg class="iconic">\n            <use xlink:href="'+t(0)+'#task"></use>\n          </svg>\n          <span class="label">Assign to ...</span>\n        </a>\n      </li>\n      --\x3e\n    </ul>\n    <div class="divider" ng-show="(post.allowed_privileges.indexOf(\'change_status\') !== -1 || post.allowed_privileges.indexOf(\'update\') !== -1 ) && postIsUnlocked()"></div>\n    <ul>\n      <li ng-repeat="status in statuses"\n          ng-show="post.allowed_privileges.indexOf(\'change_status\') !== -1 && postIsUnlocked()">\n        <a ng-click="updateStatus(status)">\n          <svg class="iconic">\n            <use xlink:href="'+t(0)+'#globe" ng-if="status==\'published\'"></use>\n            <use xlink:href="'+t(0)+'#box" ng-if="status==\'archived\'"></use>\n            <use xlink:href="'+t(0)+'#document" ng-if="status==\'draft\'"></use>\n          </svg>\n          <span class="label" ng-if="status==\'published\'" translate="post.post_actions.publish">Publish</span>\n          <span class="label" ng-if="status==\'draft\'" translate="post.post_actions.put_under_review">Put under </span>\n          <span class="label" ng-if="status==\'archived\'" translate="post.post_actions.archive">Archive</span>\n        </a>\n      </li>\n\n      <li ng-show="post.allowed_privileges.indexOf(\'update\') !== -1 && postIsUnlocked()">\n        <a ng-click="deletePost()">\n          <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n          </svg>\n          <span class="label" translate="nav.delete">Delete</span>\n        </a>\n      </li>\n    </ul>\n  </div>\n</div>\n'},function(e,exports,t){e.exports='<div class="message message-alt active" ng-show="showLockMessage()">\n    <div class="message-image error">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#lock-locked"></use>\n        </svg>\n    </div>\n\n    <div class="message-body">\n        <p translate-values="{ user: user.realname }" translate="post.locking.locked_message">The report is locked because <strong>Seth Hall</strong> is working on it right now. Try editing a different post.</p>\n\n        <div class="button-group" ng-if="isAdmin()">\n             <button class="button button-alpha" translate="post.locking.unlock" ng-click="unlock()">Unlock</button>\n        </div>\n    </div>\n</div>'},function(e,exports,t){e.exports='<ul class="metadata">\n      <div class="listing-item-locked locked" ng-show="$parent.isPostLocked()">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#lock-locked"></use>\n        </svg>\n      </div>\n      <li>\n          <span class="status-indicator" ng-if="post.status==\'published\'">\n              <span class="label" translate="post.status_published" ng-if="post.status==\'published\'">post.status_published</span>\n          </span>\n          <span class="status-indicator yellow" ng-if="post.status==\'draft\'">\n              <span class="label" translate="post.status_review" ng-if="post.status==\'draft\'"></span>\n          </span>\n          <span class="status-indicator dark" ng-if="post.status==\'archived\'">\n               <span class="label" translate="post.status_archived" ng-if="post.status==\'archived\'"></span>\n          </span>\n      </li>\n\n      <li>\n        <img src="//www.gravatar.com/avatar/{{ post.user.gravatar || \'00000000000000000000000000000000\' }}?d=retro&s=40" class="avatar">\n        <strong class="label" ng-show="post.user && !post.author_realname">{{ post.user.realname }}</strong>\n        <strong class="label" ng-show="post.contact && !post.author_realname">{{ post.contact.contact}}</strong>\n        <strong class="label" ng-show="post.author_realname">{{ post.author_realname}}</strong>\n\n    </li>\n    <li class="tooltip">\n        <span class="label">{{timeago}}</span>\n        <span class="bug" title="{{ displayTimeFull }}">{{ displayTime }}</span>\n\n    </li>\n    <li>\n      <span class="label" translate-values="{ source : source }" translate="post.source"></span>\n    </li>\n</ul>\n'},function(e,exports,t){e.exports='<div class="form-sheet" ng-show="surveys.length > 0">\n  <div class="form-sheet-summary">\n    <h3 class="form-sheet-title" translate>post.unstructured.add_survey.title</h3>\n  </div>\n\n  <div class="form-field">\n    <p ng-bind-html="surveyInfo"></p>\n  </div>\n\n  <form name="form" ng-submit="addForm()">\n    <fieldset>\n      <legend translate>\n        post.unstructured.add_survey.choose\n      </legend>\n\n      <div class="form-field radio" ng-repeat="survey in surveys">\n        <input id="{{survey.id}}" type="radio" ng-model="$parent.selectedSurvey" ng-value="survey.id" />\n        <label for="{{survey.id}}">{{survey.name}}</label>\n      </div>\n    </fieldset>\n\n    <div class="form-field">\n      <button class="button-alpha" type="submit">\n        <span class="button-label" translate>post.unstructured.add_survey.save_and_edit</span>\n        <svg class="iconic">\n          <use xlink:href="'+t(0)+'#arrow-right"></use>\n        </svg>\n      </button>\n    </div>\n  </form>\n</div>\n'},function(e,exports){e.exports='<div class="postcard-field" ng-hide="hideMap">\n    <h2 class="form-label" translate>post.location</h2>\n    <div id="post-map" class="map"></div>\n</div>\n'},function(e,exports,t){e.exports='<div>\n  <article class="postcard" role="article">\n    <button class="button-beta button-flat postcard-close" ng-click="close()">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#x"></use>\n        </svg>\n    </button>\n        <div class="post-band"  ng-style="{backgroundColor: post.form.color}"></div>\n\n        <post-lock ng-if="post.lock" post="post"></post-lock>\n\n        <div class="postcard-body">\n              <h1 class="form-sheet-title survey-title" linkify>{{post.title}}</h1>\n\n            <div class="postcard-header">\n                <post-metadata post="post" hide-date-this-week="true"></post-metadata>\n                <post-actions post="post"></post-actions>\n            </div>\n            <div\n              ng-repeat="(key,value) in post.values"\n              ng-if="isPostValue(key) && form_attributes[key] && showType(form_attributes[key].type)"\n              class="postcard-field"\n            >\n          <post-media-value\n            ng-if="form_attributes[key].type === \'media\'"\n            media-has-caption="form_attributes[key].config.hasCaption"\n            label="{{form_attributes[key].label}}"\n            media-id="value"></post-media-value>\n        </div>\n        <div\n          ng-if="post.content"\n          class="postcard-field">\n          <p markdown-to-html="post.content"></p>\n        </div>\n\n        <post-value\n          ng-repeat="(key,value) in post.values"\n          ng-if="form_attributes[key].type !== \'media\' && isPostValue(key) && showType(form_attributes[key].type)"\n          key="key"\n          value="value"\n          attribute="form_attributes[key]"\n          tags="tags"\n          type="\'post\'">\n        </post-value>\n        <post-detail-map post-id="post.id"></post-detail-map>\n\n      </div>\n  </article>\n  <div class="listing card init" ng-show="tasks.length">\n        <h3 class="listing-heading" translate="app.tasks">Tasks</h3>\n\n        <nav class="tabs-menu" data-tabs="tasks-tabs" data-tabs-hash>\n          <ul>\n            <li\n              ng-repeat="task in tasks"\n              ng-class="{\'active\': visibleTask == task.id}"  >\n              <a ng-click="activateTaskTab(task.id)">\n                {{task.label}}\n              </a>\n              <span class="status" ng-class="{\'completed\': taskIsComplete(visibleTask)}">\n              </span>\n            </li>\n          </ul>\n        </nav>\n        <div class="listing-item tasks-tabs tabs-target active">\n          <div class="alert"\n              ng-repeat="task in tasks"\n              ng-if="!taskHasValues(task)"\n              ng-show="task.id === visibleTask">\n                <p translate="post.modify.no_task_values">There are currently no saved values for this task.</p>\n          </div>\n          <div\n            ng-repeat="(key,value) in post.values"\n            ng-if="form_attributes[key].type === \'media\' && !isPostValue(key) && form_attributes[key] && showType(form_attributes[key].type)"\n            ng-show="form_attributes[key].form_stage_id === visibleTask"\n            class="listing-item-primary"\n            >\n\n            <post-media-value\n              label="{{form_attributes[key].label}}"\n              media-id="value"></post-media-value>\n          </div>\n          <div\n            ng-repeat="(key,value) in post.values"\n            ng-if="form_attributes[key].type !== \'media\' && !isPostValue(key) && form_attributes[key] && showType(form_attributes[key].type)"\n            ng-show="form_attributes[key].form_stage_id === visibleTask"\n            >\n            <post-value\n              tags="tags"\n              key="key"\n              value="value"\n              attribute="form_attributes[key]"\n              type="\'standard\'">\n            </post-value>\n          </div>\n        </div>\n  </div>\n\n    <post-messages post="post" ng-if="post.contact.id"></post-messages>\n</div>\n'},function(e,exports){e.exports='<div class="postcard-field">\n  <h2 class="form-label">\n    {{label}}\n  </h2>\n  <button ng-hide="mediaLoaded" type="button" class="button button-full-width button-beta">\n    <div class="loading">\n        <div class="line"></div>\n        <div class="line"></div>\n        <div class="line"></div>\n    </div>\n    <span class="button-label">Loading</span>\n    </button>\n  <img ng-show="mediaLoaded" ng-src="{{ media.original_file_url }}" class="postcard-image">\n  <p class="small" ng-if="mediaHasCaption"><em>{{ media.caption }}</em></p>\n</div>\n'},function(e,exports){e.exports='<div>\n  <form name="form" ng-submit="sendMessage()">\n\n    <div class="form-field" ng-class="{ \'error\': form.reply.$invalid && form.reply.$dirty }">\n      <textarea id="reply" name="reply" placeholder="Send message to {{ contact.contact }}" ng-model="message.reply_text" ng-minlength=2 ng-maxlength=140 required></textarea>\n    </div>\n    <div class="form-field">\n      <button type="submit" class="button-alpha modal-trigger"\n\t      ng-submit="sendMessage()"\n\t      ng-disabled="form.reply.$invalid"\n\t      translate>post.messages.save</button>\n    </div>\n  </form>\n</div>\n\n\n'},function(e,exports,t){e.exports='<div class="listing card">\n  <h3 class="listing-heading" translate>post.messages.title</h3>\n\n    <div ng-repeat="message in messages track by message.id" class="listing-item">\n      <div class="listing-item-primary">\n        <div class="listing-item-image" ng-if="message.direction == \'outgoing\'">\n            <img src="//www.gravatar.com/avatar/{{ message.user.gravatar || \'00000000000000000000000000000000\' }}?d=retro&s=40" class="avatar">\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#arrow-thick-left"></use>\n            </svg>\n        </div>\n      <h2 class="listing-item-title">\n\n        <span ng-if="message.direction == \'incoming\'">{{ contact.contact }}</span>\n        <span ng-if="message.direction == \'outgoing\' && message.user.realname">{{ message.user.realname }}</span>\n      </h2>\n      \x3c!--\n      <p>{{message.updated || message.created | date:\'mediumDate\'}} at {{message.updated || message.created | date:\'shortTime\'}}</p>\n      --\x3e\n      <p class="listing-item-secondary">{{message.displayTime}}</p>\n      <p>{{ message.message }}</p>\n    </div>\n  </div>\n\n  <div class="listing-item" ng-show="totalItems > itemsPerPage">\n    <div class="listing-item-primary">\n\n      <nav class="pagination" ng-show="showPagination">\n          <ul uib-pagination ng-model="currentPage" items-per-page="itemsPerPage" total-items="totalItems" ng-change="pageChanged()" max-size="5" boundary-links="false" rotate="false"></ul>\n      </nav>\n\n    </div>\n  </div>\n\n  <div class="listing-item">\n    <div class="listing-item-primary">\n      <h2 class="listing-item-title">\n        <a href="" class="button button-flat" ng-click="reply()">\n          <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n          </svg>\n          {{ \'post.messages.send\' | translate }}\n        </a>\n      </h2>\n    </div>\n  </div>\n\n\n\x3c!--\n  <div class="listing-item">\n    <div class="listing-item-primary">\n\n    <form name="form" ng-submit="sendMessage()">\n      <label class="input-label"\n\t     ng-class="{ \'error\': form.reply.$invalid && form.reply.$dirty, \'success\': !form.reply.$invalid && form.reply.$dirty }" for="reply"\n\t     translate>post.messages.reply</label>\n      <div class="form-field" ng-class="{ \'error\': form.reply.$invalid && form.reply.$dirty }">\n\t<textarea id="reply" name="reply" placeholder="Send message to {{ contact.contact }}" ng-model="reply_text" ng-minlength=2 ng-maxlength=140 required></textarea>\n      </div>\n      <button type="submit" class="button button-flat"\n\t      ng-submit="sendMessage()"\n\t      ng-disabled="form.reply.$invalid"\n\t      translate>post.messages.send</button>\n    </form>\n\n            <button type="submit" class="button button-flat"\n\t      ng-click="reply()"\n\t      ng-disabled="form.reply.$invalid"\n\t      translate>post.messages.send</button>\n    </div>\n  </div>\n  --\x3e\n</div>\n'},function(e,exports,t){e.exports='<div ng-class="{\'postcard-field\': !standardTask, \'listing-item-primary\': standardTask}">\n\n    <div ng-if="attribute.input !== \'video\'">\n      <h2 class="form-label">\n          {{attribute.label}}\n      </h2>\n\n      <div ng-if="attribute.input === \'tags\'">\n       <p>\n        <svg class="iconic" style="margin-right:4px;">\n            <use xlink:href="'+t(0)+'#tag"></use>\n        </svg>\n          {{value}}\n        </p>\n      </div>\n\n      <div ng-repeat="entry in value track by $index" ng-if="attribute.type === \'relation\'">\n          <a ui-sref="posts.detail.data({postId: entry.id})">{{entry.title}}</a>\n      </div>\n     <div ng-repeat="entry in value track by $index" ng-if="attribute.type !== \'relation\' && attribute.input !== \'tags\'">\n          <p ng-if="attribute.type !== \'markdown\'" linkify>{{entry}}</p>\n          <p ng-if="attribute.type === \'markdown\'" markdown-to-html="entry"></p>\n      </div>\n    </div>\n\n    <post-video-view\n      ng-if="attribute.input === \'video\'"\n      label="{{attribute.label}}"\n      video-url="value"></post-video-view>\n</div>\n'},function(e,exports){e.exports='<div class="postcard-field">\n  <h2 class="form-label">\n    {{label}}\n  </h2>\n  <div class="video_embed-fluid">\n    <iframe src="{{videoUrl}}" frameborder="0" allowfullscreen></iframe>\n  </div>\n</div>\n'},function(e,exports,t){e.exports='\n<div class="location-wrapper">\n    <div id="{{id}}-map" class="map" style="height: 265px; width: 100%;"></div>\n    <form class="searchbar">\n        <div class="searchbar-input init" role="search">\n            <div class="form-field tooltip">\n                <input name="{{name}}"\n                    type="search"\n                    maxlength="250"\n                    placeholder="{{\'location.placeholder\' | translate}}"\n                    ng-model="searchLocationTerm"\n                    ng-focus="showSearchResults()"\n                    ng-keydown="handleActiveSearch($event)"\n                />\n            </div>\n            <div id="searchbar-results" class="searchbar-results dropdown-menu init">\n                <div class="form-field">\n                    <button class="button-beta button-plain" ng-click="chooseCurrentLocation()" ng-if="showCurrentPositionControl" >\n                        <svg class="iconic">\n                            <use\n                                xmlns:xlink="http://www.w3.org/1999/xlink"\n                                xlink:href="'+t(0)+'#location">\n                            </use>\n                        </svg>\n                        <span class="button-label" translate>location.use_current_location</span>\n                    </button>\n                </div>\n             <div class="tool">\n                    <h6 class="tool-heading" translate>location.search_results</h6>\n                    <dl ng-repeat="result in searchResults" ng-if="!processing && searchResults.length > 0">\n                        <dt class="list-item" ng-click="chooseLocation(result)">\n                            <svg class="iconic">\n                                <use\n                                    xmlns:xlink="http://www.w3.org/1999/xlink"\n                                    xlink:href="'+t(0)+'#map-marker">\n                                </use>\n                            </svg>\n                            <em>{{result.display_name}}</em>\n                        </dt>\n                    </dl>\n                    <dl class="dropdown-menu-body" ng-if="processing">\n                        <dt class="list-item">\n                            <div class="loading" style="width: auto;">\n                                <div class="line"></div>\n                                <div class="line"></div>\n                                <div class="line"></div>\n                            </div>\n                        </dt>\n                    </dl>\n                    <dl class="dropdown-menu-body" ng-if="!processing && !searchResults">\n                        <dt class="list-item">\n                            No matching locations.\n                        </dt>\n                    </dl>\n                </div>\n            </div>\n        </div>\n    </form>\n    <p translate>location.click_map</p>\n    <div class="form-field">\n      <label>Lat</label>\n      <input type="text" ng-model="model.lat">\n   </div>\n   <div class="form-field">\n      <label>Long</label>\n      <input type="text" ng-model="model.lon">\n   </div>\n   <button type="button" class="button-primary" ng-click="manualLatLong(model.lat, model.lon)">\n        <svg class="iconic">\n       <use \n                                xmlns:xlink="http://www.w3.org/1999/xlink" \n                                xlink:href="'+t(0)+'#location">\n                            </use>\n        </svg>\n        <span class="button-label">Update Map</span>\n    </button>\n</div>\n'},function(e,exports){e.exports='<post-editor post="post" form="form" ng-if="form.id"></post-editor>\n'},function(e,exports,t){e.exports='\n<form>\n    <div class="form-field file">\n      <file-upload id="{{name}}" container="media" model="mediaId">\n      </file-upload>\n\n      <label for="{{name}}" class="button button-gamma" ng-show="showAdd()">\n          <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n          </svg>\n          <span class="button-label" translate="post.media.add_photo"></span>\n      </label>\n\n      <figure ng-show="showReplace()">\n        <img ng-src="{{media.original_file_url}}" ng-show="media.id && !media.dataURI">\n        <img ng-src="{{media.dataURI}}" ng-show="media.dataURI">\n\n        <div class="form-field">\n          <button class="button-destructive" ng-click="deleteMedia(media.id)" ng-show="showDelete()">\n            <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n            </svg>\n             <span class="hidden" translate="post.media.delete_photo"></span>\n          </button>\n\n          <file-upload id="{{name}}" container="media" model="mediaId"></file-upload>\n            <label for="{{name}}" class="button button-gamma">\n              <svg class="iconic">\n                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#image"></use>\n              </svg>\n              <span class="button-label" translate="post.media.replace_image"></span>\n            </label>\n        </div>\n      </figure>\n      <div ng-hide="!mediaHasCaption">\n        <figure>\n          <p class="small" translate>post.media.add_caption</p>\n          <input\n            type="text"\n            placeholder="{{ \'post.media.add_caption\' | translate }}"\n            ng-model="media.caption">\n        </figure>\n      </div>\n    </div>\n</form>\n'},function(e,exports,t){e.exports='<form name="editForm" novalidate>\n  <div class="form-sheet" role="article">\n    <div class="post-band" ng-style="{backgroundColor: form.color}"></div>\n        <div\n          class="form-field init required"\n          adaptive-form\n          ng-class="{\'error\': editForm.title.$invalid && editForm.title.$dirty, \'success\': !editForm.title.$invalid && editForm.title.$dirty}"\n        >\n          <label>{{postTitleLabel}}</label>\n          <p>{{postTitleInstructions}}</p>\n          <input\n            id="title"\n            name="title"\n            type="text"\n            ng-model="post.title"\n            ng-required="true"\n            ng-minlength=2\n            ng-maxlength=150\n            adaptive-input\n          >\n          <div\n            class="alert error"\n            ng-show="editForm.title.$dirty"\n            ng-repeat="(error, value) in editForm.title.$error"\n          >\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n            </svg>\n            <span translate="{{\'post.valid.title.\' + error}}"></span>\n          </div>\n        </div>\n        \x3c!-- Post stage default fields --\x3e\n        <div\n          class="form-field init required"\n          ng-class="{\'error\': editForm.content.$invalid && editForm.content.$dirty, \'success\': !editForm.content.$invalid && editForm.content.$dirty}"\n          adaptive-form\n        >\n          <label>{{postDescriptionLabel}}</label>\n          <p>{{postDescriptionInstructions}}</p>\n          <textarea id="content" name="content" data-min-rows="1" rows="1" ng-model="post.content" ng-required="true" adaptive-input msd-elastic></textarea>\n\n          <div class="alert error" ng-show="editForm.content.$dirty" ng-repeat="(error, value) in editForm.content.$error">\n            <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n            </svg>\n            <span translate="{{\'post.valid.content.\' + error}}"></span>\n          </div>\n        </div>\n        \x3c!-- End post stage default fields --\x3e\n          <div\n            ng-if="!form"\n            class="form-field init required"\n            ng-class="{\'error\': editForm.form.$invalid && editForm.form.$dirty, \'success\': !editForm.form.$invalid && editForm.form.$dirty}"\n          >\n          <p translate="post.unstructured.add_survey.info" translate-values="{source:post.source}"></p>\n          <label translate>post.unstructured.add_survey.title</label>\n              <select\n              class="custom-select"\n              ng-change="selectForm(form)"\n              ng-model="post.form"\n            >\n              <option selected disabled translate>post.unstructured.add_survey.choose</option>\n              <option ng-repeat="form in forms" ng-value="form">{{form.name}}</option>\n            </select>\n          <div class="alert error" ng-show="editForm.form.$dirty" ng-repeat="(error, value) in editForm.form.$error">\n            <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n            </svg>\n            <span translate="{{\'post.valid.content.\' + error}}"></span>\n          </div>\n          </div>\n\n        \x3c!-- Start Post custom fields --\x3e\n\n        <post-value-edit\n            ng-repeat="attribute in tasks[0].attributes | orderBy: \'priority\' as filtered_result track by attribute.id"\n            post="post"\n            post-field=true\n            form="editForm"\n            medias="medias"\n            attribute="attribute"\n            ng-if="form"\n        ></post-value-edit>\n      </div>\n        \x3c!-- End Post custom fields --\x3e\n        \x3c!-- IF: Editing an existing post --\x3e\n\n        \x3c!-- ELSE IF: Adding a new post w/o permission to manage who it\'s visible to\n        <div class="postcard-metadata">\n            <strong>This post will need to be moderated</strong> before it\'s visible to the public.\n        </div>\n        END: IF --\x3e\n        \x3c!-- IF: User has permission to see other \'Tasks\' --\x3e\n\n        <post-toolbox form="editForm" post="post" ng-if="form"></post-toolbox>\n        <post-tabs\n          ng-show="tasks.length > 1"\n          form="editForm"\n          post="post"\n          stages="tasks"\n          attributes="attributes"\n          medias="medias"\n          visible-stage="visibleStage"\n          ng-if="form"\n        >\n        </post-tabs>\n      <div class="toolbar toolbar-secondary">\n        <div class="button-group">\n\n          <button class="button-flat" ng-click="leavePost()" translate>app.cancel</button>\n          <button class="button button-alpha" ng-click="savePost()" ng-if="!isSaving()" translate="">app.save</button>\n          <loading-dots button-class="\'button-alpha\'" ng-if="isSaving()" disabled=true label="\'app.saving\'"></loading-dots>\n        </div>\n      </div>\n  </form>\n'},function(e,exports,t){e.exports='<div>\n  <div class="form-field date">\n    <div class="input-with-icon">\n      <svg class="iconic">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#calendar"></use>\n      </svg>\n      <input\n        type="text"\n        pick-a-date="model"\n        pick-a-date-options="dateOptions"\n        />\n    </div>\n  </div>\n  <div class="form-field date">\n    <div class="input-with-icon">\n      <svg class="iconic">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#clock"></use>\n      </svg>\n      <input\n        type="text"\n        pick-a-time="model"\n        pick-a-time-options="timeOptions"\n        />\n    </div>\n  </div>\n</div>\n'},function(e,exports,t){e.exports='<form name="postForm" ng-submit="savePost()" novalidate>\n  <div class="mode-context init" dropdown>\n    <layout-class layout="a"></layout-class>\n    <header class="mode-context-header">\n        <ol class="breadcrumbs">\n            <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n        </ol>\n\n        <h1 class="mode-context-title">{{post.form.name}}</h1>\n    </header>\n\n    <span class="mode-context-trigger" dropdown-toggle>\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span class="label hidden" translate="app.show_more_less">Show more/less</span>\n    </span>\n\n    <div class="mode-context-body">\n      <p markdown-to-html="post.form.description"></p>\n    </div>\n  </div>\n\n  <main role="main">\n      <div class="toolbar">\n          <div class="button-group" ng-show="post.id">\n              <button type="button" class="button-flat" ng-click="cancel()" translate="app.cancel">Cancel</button>\n              <button type="submit" class="button-alpha"  ng-if="!saving_post">{{save}}</button>\n              <button type="submit" class="button-alpha"  disabled ng-if="saving_post">{{saving}}\n                <div class="loading">\n                    <div class="line"></div>\n                    <div class="line"></div>\n                    <div class="line"></div>\n                </div>\n              </button>\n          </div>\n          <div class="button-group" ng-show="!post.id">\n              <post-share button="true" ng-show="!post.id"></post-share>\n              <button type="submit" class="button-alpha"  ng-if="!saving_post">{{submit}}</button>\n              <button type="submit" class="button-alpha"  disabled ng-if="saving_post">{{submitting}}\n                <div class="loading">\n                    <div class="line"></div>\n                    <div class="line"></div>\n                    <div class="line"></div>\n                </div>\n              </button>\n          </div>\n\n      </div>\n\n     <div class="main-col">\n\n          <div class="form-sheet">\n              <div class="post-band" ng-style="{backgroundColor: form.color}"></div>\n              <div class="form-field init required"\n              adaptive-form\n              ng-class="{\n                \'error\': postForm.title.$invalid && postForm.title.$dirty,\n                \'success\': !postForm.title.$invalid && postForm.title.$dirty\n              }">\n                  <label>\n                      {{postTitleLabel}}\n                  </label>\n                  <p>\n                      {{postTitleInstructions}}\n                  </p>\n                  <input id="title"\n                      name="title" type="text" ng-model="post.title" ng-required="true" ng-minlength=2 ng-maxlength=150 adaptive-input>\n\n                  <div\n                      class="alert error"\n                      ng-show="postForm.title.$dirty"\n                      ng-repeat="(error, value) in postForm.title.$error"\n                      >\n                      <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                      </svg>\n                      <span translate="{{\'post.valid.title.\' + error}}"></span>\n                  </div>\n              </div>\n\n              \x3c!-- Post stage default fields --\x3e\n              <div class="form-field init required"\n                  ng-class="{\n                    \'error\': postForm.content.$invalid && postForm.content.$dirty,\n                    \'success\': !postForm.content.$invalid && postForm.content.$dirty\n                  }"\n                  adaptive-form>\n                  <label>\n                      {{postDescriptionLabel}}\n                  </label>\n                  <p>\n                      {{postDescriptionInstructions}}\n                  </p>\n                    <textarea id="content" name="content" data-min-rows="1" rows="1"\n                      ng-model="post.content" ng-required="true" adaptive-input msd-elastic>\n                    </textarea>\n\n                  <div class="alert error" ng-show="postForm.content.$dirty" ng-repeat="(error, value) in postForm.content.$error">\n                      <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                      </svg>\n                      <span translate="{{\'post.valid.content.\' + error}}"></span>\n                  </div>\n              </div>\n\n              \x3c!-- End post stage default fields --\x3e\n\n              \x3c!-- Start Post custom fields --\x3e\n\n              <post-value-edit\n                  ng-repeat="attribute in tasks[0].attributes | orderBy: \'priority\' as filtered_result track by attribute.id"\n                  post="post"\n                  post-field=true\n                  form="postForm"\n                  medias="medias"\n                  attribute="attribute"\n              ></post-value-edit>\n              \x3c!-- End Post custom fields --\x3e\n              \x3c!-- IF: Editing an existing post --\x3e\n\n              \x3c!-- ELSE IF: Adding a new post w/o permission to manage who it\'s visible to\n              <div class="postcard-metadata">\n                  <strong>This post will need to be moderated</strong> before it\'s visible to the public.\n              </div>\n              END: IF --\x3e\n\n\n\n             \x3c!-- IF: User has permission to see other \'Tasks\' --\x3e\n\n              <post-toolbox form="postForm" post="post"></post-toolbox>\n\n\n         </div>\n         <post-tabs\n             ng-show="tasks.length > 1"\n             form="postForm"\n             post="post"\n             stages="tasks"\n             attributes="attributes"\n             medias="medias"\n             visible-stage="visibleStage">\n          </post-tabs>\n          \x3c!-- <div class="form-sheet">\n            <div class="form-sheet-actions">\n                  <div class="form-field" ng-show="!post.id">\n                      <a href="timeline.html" type="submit" class="button button-alpha" translate="app.submit">Submit</a>\n                      <a href="post-add.html" class="button button-gamma button-flat" translate"app.submit_antoher">Submit &amp; add another</a>\n                  </div>\n                  <div class="form-field" ng-show="post.id">\n                      <a href="timeline.html" type="submit" class="button button-alpha" translate="app.save">Save</a>\n                      <a href="post-add.html" class="button button-gamma button-flat" ng-click="cancel()" translate"app.cancel">Cancel</a>\n                  </div>\n            </div>\n          </div> --\x3e\n          <div class="form-sheet" ng-if="post.id">\n              <div class="form-sheet-summary">\n                  <h3 class="form-sheet-title" translate="post.delete_post">Delete this post</h3>\n              </div>\n\n              <div class="form-field">\n                  <p translate="post.delete_post_desc"><strong>If you delete this post</strong>, all of its comments and messages will also be deleted. Proceed with caution.</p>\n\n                  <button class="button-destructive" ng-click="deletePost(post)">\n                      <svg class="iconic">\n                          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                      </svg>\n                      <span class="button-label" translate="post.delete_post">Delete post</span>\n                  </button>\n              </div>\n          </div>\n\n          <ush-logo></ush-logo>\n      </div> \x3c!-- END main column --\x3e\n\n  </main>\n</form>\n'},function(e,exports){e.exports='<div class="form-sheet" ng-repeat="stage in stages | limitTo: 1 - stages.length">\n    <header class="form-sheet-summary">\n        <h1 class="form-sheet-title section-title">{{stage.label}}</h1>\n    </header>\n    <div ng-show="stage.show_when_published" class="alert">\n        <p translate="survey.task_visible_when_published">This task will be visible when post is published</p>\n    </div>\n    \x3c!-- Handle stage completion --\x3e\n    <div ng-show="stage.task_is_internal_only" class="alert">\n        <p>This task is marked for internal use only. It is not seen by users when they create a post.</p>\n    </div>\n    <div class="form-field switch">\n        <label translate="post.task_completed" ng-class="{\'required\': stage.required}">Task completed</label>\n        <div class="toggle-switch">\n            <input\n                class="tgl"\n                ng-attr-id="{{ \'toggle-complete-\' + stage.id }}"\n                type="checkbox"\n                ng-checked="stageIsComplete(stage.id)"\n                ng-click="toggleStageCompletion(stage.id)">\n            <label class="tgl-btn" for="toggle-complete-{{stage.id}}" ng-attr-id="{{ \'toggle-complete-label-\' + stage.id }}"></label>\n\n        </div>\n    </div>\n    <post-value-edit\n            ng-repeat="attribute in stage.attributes | orderBy: \'priority\' as filtered_result track by attribute.id"\n            post="post"\n            form="form"\n            medias="medias"\n            attribute="attribute"\n    ></post-value-edit>\n</div>\n'},function(e,exports,t){e.exports='<div class="toolbox" ng-if="post.id">\n  \x3c!-- IF: User has permission to manage post status --\x3e\n  <div class="tool" ng-if="allowedChangeStatus()" dropdown>\n    <fieldset class="custom-fieldset init">\n      <legend class="dropdown-trigger init" data-toggle="dropdown-menu" dropdown-toggle>\n        <span class="legend-label">\n          <span class="custom-fieldset-value">\n            <svg class="iconic">\n            <use xlink:href="'+t(0)+'#globe" ng-if="post.status==\'published\'"></use>\n            <use xlink:href="'+t(0)+'#document" ng-if="post.status==\'draft\'"></use>\n            <use xlink:href="'+t(0)+'#box" ng-if="post.status==\'archived\'"></use>\n            </svg>\n            <span translate="post.published" ng-if="post.status == \'published\'">Published</span>\n            <span translate="post.draft" ng-if="post.status == \'draft\'">Under review</span>\n            <span translate="post.archived" ng-if="post.status == \'archived\'">Archived</span>\n\n          </span>\n        </span>\n        <svg class="iconic chevron">\n          <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n      </legend>\n      <div class="dropdown-menu init" dropdown-menu>\n        <div class="form-field radio icon-input"\n             name="status"\n             ng-model="post.status"\n             ng-repeat="status in statuses"\n             ng-class="{\'checked\' : status == post.status}"\n             ng-click="changeStatus(status)"\n             >\n          <label for="{{status}}">\n          <svg class="iconic">\n            <use xlink:href="'+t(0)+'#globe" ng-if="status==\'published\'"></use>\n            <use xlink:href="'+t(0)+'#document" ng-if="status==\'draft\'"></use>\n            <use xlink:href="'+t(0)+'#box" ng-if="status==\'archived\'"></use>\n          </svg>\n          <input type="radio" id="{{status}}" />\n          <span translate="post.published" ng-if="status == \'published\'">Published</span>\n            <span translate="post.draft" ng-if="status == \'draft\'">Under review</span>\n            <span translate="post.archived" ng-if="status == \'archived\'">Archived</span>\n        </label>\n      </div>\n      </div>\n    </fieldset>\n  </div>\n  \x3c!-- END: IF --\x3e\n\n  \x3c!--// IF: User has permission to change the author & post timestamp //--\x3e\n  <div class="tool" dropdown auto-close="disabled" ng-if="allowedChangeOwner()">\n    <h6 class="tool-heading" translate="post.author">Author</h6>\n\n    <span class="tool-trigger init" data-toggle="dropdown-menu" dropdown-toggle ng-click="loadAuthorFormDefaults()">\n      <svg class="iconic">\n        <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n      </svg>\n      <span class="label hidden">Show/hide</span>\n    </span>\n\n    <div class="toggle-content init" dropdown-menu>\n      <div class="listing-item">\n        <div class="listing-item-primary" ng-if="showUserRealname()">\n          <div class="listing-item-image">\n            <img src="//www.gravatar.com/avatar/{{ post.user.gravatar || \'00000000000000000000000000000000\' }}?d=retro&s=40" class="avatar">\n          </div>\n          <h2 class="listing-item-title">{{ post.user.realname }}</h2>\n          <p class="listing-item-secondary"></p>\n        </div>\n        <div class="listing-item-primary" ng-if="showAuthorRealname()">\n          <h2 class="listing-item-title">{{ post.author_realname }}</h2>\n          <p class="listing-item-secondary"></p>\n        </div>\n        <div class="listing-item-primary" ng-if="showEditAuthorForm">\n          <div class="form-field init">\n            <input type="text" class="adapt-field" ng-model="post.author_realname" focus="showEditAuthorForm">\n          </div>\n        </div>\n      </div>\n      <button type="button" class="button-gamma button-flat" data-modal="edit-author" ng-click="editAuthor()" ng-if="showEditAuthorButton" translate="post.change_author">Change author</button>\n    </div>\n  </div>\n\n  <div class="tool" dropdown auto-close="disabled">\n    <h6 class="tool-heading" translate="post.post_date">Post date</h6>\n\n    <span class="tool-trigger init" data-toggle="dropdown-menu" dropdown-toggle>\n      <svg class="iconic">\n        <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n      </svg>\n      <span class="label hidden">Show/hide</span>\n    </span>\n\n    <div class="toggle-content init" dropdown-menu>\n      <fieldset>\n        <post-datetime ng-model="post.post_date"></post-datetime>\n        <ul class="metadata">\n            <li><span translate="post.created_at"></span> {{displayCreated}} <span translate-values="{ source : source }" translate="post.source"></span></li>\n            <li ng-if="post.updated"><span translate="post.updated_at"></span> {{displayUpdated}}</li>\n        </ul>\n      </fieldset>\n    </div>\n  </div>\n\n  \x3c!-- END: IF --\x3e\n</div>\n'},function(e,exports,t){e.exports="<div>\n\x3c!-- Container for form-field structured elements --\x3e\n  <div\n      ng-if=\"!isFieldSetStructure(attribute)\"\n      class=\"form-field init\"\n      adaptive-form\n      ng-class=\"{\n        'error': form['values_' + attribute.key].$invalid && form['values_' + attribute.key].$dirty,\n        'success': ! form['values_' + attribute.key].$invalid && form['values_' + attribute.key].$dirty,\n        'required': attribute.required,\n        'date' : isDate(attribute) || isDateTime(attribute),\n        'location' : attribute.input === 'location'\n      }\">\n\n      \x3c!-- Attribute Label --\x3e\n      <label for=\"values[{{attribute.key}}][0]\">\n          <svg ng-show=\"attribute.response_private\" class=\"iconic\">\n            <use xlink:href=\""+t(0)+'#lock-locked"></use>\n          </svg>\n          {{attribute.label}}\n      </label>\n      \x3c!-- Attribute Instructions --\x3e\n      <p>{{attribute.instructions}}</p>\n\n      \x3c!-- attributes which use the form-field structure --\x3e\n      <div ng-repeat="(key, value) in post.values[attribute.key] track by key">\n          <div ng-switch="attribute.input">\n              \x3c!-- Standard fields --\x3e\n              \x3c!-- type: date --\x3e\n              <div ng-switch-when="date" >\n                  \x3c!-- Date icon --\x3e\n                  <div class="input-with-icon">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#calendar"></use>\n                    </svg>\n                    <input\n                        type="date"\n                        pick-a-date="date"\n                        pick-a-date-options="dateFormat"\n\n                        name="values_{{attribute.id}}"\n                        ng-model="post.values[attribute.key][key]"\n                        ng-required="attribute.required"\n                    />\n                  </div>\n              </div>\n              \x3c!-- type: datetime --\x3e\n              <div ng-switch-when="datetime" class="input-with-icon">\n                  <post-datetime\n                      id="values[{{attribute.key}}][{{key}}]"\n                      name="values_{{attribute.id}}"\n                      ng-model="post.values[attribute.key][key]"\n                      ng-required="attribute.required"\n                  ></post-datetime>\n              </div>\n             \x3c!-- type: select --\x3e\n              <select\n                  ng-switch-when="select"\n                  id="values[{{attribute.key}}][{{key}}]"\n                  name="values_{{attribute.id}}"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n                >\n                  <option ng-repeat="opt in attribute.options" value="{{opt}}">{{opt}}</option>\n              </select>\n              \x3c!-- type: number --\x3e\n              <input\n                  ng-switch-when="number"\n                  id="values[{{attribute.key}}][{{key}}]"\n                  name="values_{{attribute.id}}"\n                  type="number"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n                  >\n              \x3c!-- type: text --\x3e\n              <input\n                  ng-switch-when="text"\n                  id="values[{{attribute.key}}][{{key}}]"\n                  name="values_{{attribute.id}}"\n                  type="text"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n                  adaptive-input\n                  >\n              \x3c!-- type: textarea --\x3e\n              <textarea\n                  ng-switch-when="textarea"\n                  data-min-rows="1"\n                  rows="1"\n                  class="adapt-field"\n                  style="overflow-x: hidden; word-wrap: break-word; height: 55px;"\n                  id="values[{{attribute.key}}][{{key}}]"\n                  name="values_{{attribute.id}}"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n                  adaptive-input\n                  msd-elastic>\n              </textarea>\n\n              \x3c!-- Non standard fields --\x3e\n              \x3c!-- type: textarea --\x3e\n              <textarea\n                  ng-switch-when="markdown"\n                  data-min-rows="1"\n                  rows="1"\n                  class="adapt-field"\n                  style="overflow-x: hidden; word-wrap: break-word; height: 55px;"\n                  id="values[{{attribute.key}}][{{key}}]"\n                  name="values_{{attribute.id}}"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n                  adaptive-input\n                  msd-elastic>\n              </textarea>\n              \x3c!-- type: relation --\x3e\n              <post-relation\n                  attribute="attribute"\n                  key="key"\n                  id="values[{{attribute.key}}][{{key}}]"\n                  name="values_{{attribute.id}}"\n                  model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n                  ng-switch-when="relation"></post-relation>\n              \x3c!-- type: location --\x3e\n              <post-location\n                  attribute="attribute"\n                  key="key"\n                  id="values[{{attribute.key}}][{{key}}]"\n                  name="values_{{attribute.id}}"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n                  ng-switch-when="location"></post-location>\n              \x3c!-- type: upload --\x3e\n              <post-media\n                  ng-switch-when="upload"\n                  name="values_{{attribute.id}}"\n                  media-has-caption="attribute.config.hasCaption"\n                  media="medias[attribute.key]"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n              ></post-media>\n              \x3c!-- type: upload --\x3e\n              <post-video-input\n                  ng-switch-when="video"\n                  name="values_{{attribute.id}}"\n                  video-url="post.values[attribute.key][key]"\n                  ng-model="post.values[attribute.key][key]"\n                  ng-required="attribute.required"\n              ></post-video-input>\n          </div>\n      </div>\n      <div class="alert error" ng-show="form[\'values_\' + attribute.id].$dirty && taskIsMarkedCompleted()" ng-repeat="(error, value) in form[\'values_\' + attribute.id].$error">\n          <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n          </svg>\n          <span translate="{{\'post.valid.values.\' + error}}" translate-values="{ label : attribute.label }"></span>\n      </div>\n  </div>\n\n\n  \x3c!-- Container for fieldset structured elements --\x3e\n  <fieldset ng-if="isFieldSetStructure(attribute)">\n\n    \x3c!-- Attribute Label --\x3e\n    <label ng-class="{\n        \'error\': form[\'values_\' + attribute.key].$invalid && form[\'values_\' + attribute.key].$dirty,\n        \'success\': ! form[\'values_\' + attribute.key].$invalid && form[\'values_\' + attribute.key].$dirty,\n        \'required\': attribute.required\n      }">{{attribute.label}}</label>\n    \x3c!-- Attribute Instructions --\x3e\n    <p>{{attribute.instructions}}</p>\n\n    \x3c!-- attributes which use the form-field structure --\x3e\n    <div ng-switch="attribute.input">\n      \x3c!-- type: radio --\x3e\n      <div ng-switch-when="radio">\n        <div ng-repeat="(key, value) in post.values[attribute.key] track by key">\n          <div class="form-field radio" ng-repeat="option in attribute.options">\n            <label>\n                <input\n                    name="values_{{attribute.id}}"\n                    type="radio"\n                    ng-model="post.values[attribute.key][key]"\n                    ng-required="attribute.required"\n                    value="{{option}}"\n                  >\n                  {{option}}\n            </label>\n          </div>\n        </div>\n      </div>\n      \x3c!-- type: checkbox --\x3e\n      <div ng-switch-when="checkbox">\n        <div class="form-field checkbox" ng-repeat="option in attribute.options">\n          <label>\n            <input\n                type="checkbox"\n                checklist-model="post.values[attribute.key]"\n                ng-required="attribute.required"\n                name="values_{{attribute.id}}_{{option}}"\n                checklist-value="option"\n                value="option"\n              >\n                {{option}}\n          </label>\n        </div>\n      </div>\n    \x3c!-- type: categories --\x3e\n    <div ng-switch-when="tags">\n        <category-selector\n            available="attribute.options"\n            selected="post.values[attribute.key]",\n            form="form"\n        ></category-selector>\n        <add-category\n            form-id="post.form.id"\n            attribute="attribute"\n            post-value="post.values[attribute.key]"\n        ></add-category>\n    </div>\n    <div class="alert error" ng-show="form[\'values_\' + attribute.id].$dirty && taskIsMarkedCompleted()" ng-repeat="(error, value) in form[\'values_\' + attribute.id].$error">\n        <svg class="iconic">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n        </svg>\n        <span translate="{{\'post.valid.values.\' + error}}" translate-values="{ label : attribute.label }"></span>\n    </div>\n  </fieldset>\n\n</div>\n'},function(e,exports,t){e.exports='<form class="input-relation">\n\t<p ng-if="model">{{ selectedPost.title }} ({{ model }}) <button class="button-secondary icon-only alt trash" type="button" ng-click="clearPost()" translate></button></p>\n    <div class="input-inline">\n        <input class="form-control" type="text" placeholder="Search.." ng-model="searchTerm">\n        <button type="button" ng-click="search($event)">\n\t\t\t\t\t\t<div class="loading" ng-if="searching">\n\t\t\t\t\t\t\t\t<div class="line"></div>\n\t\t\t\t\t\t\t\t<div class="line"></div>\n\t\t\t\t\t\t\t\t<div class="line"></div>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t\t<span class="button-label" translate="nav.search" ng-if="!searching">Search</span>\n\t\t\t\t\t\t<span class="button-label" translate="app.searching" ng-if="searching">Searching</span>\n\t\t\t\t</button>\n    </div>\n\t\t<div class="alert error" ng-if="noResults">\n\t\t\t\t<svg class="iconic">\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n\t\t\t\t</svg>\n\t\t\t\t<span translate="post.no_search_results">Your search didn\'t match any posts</span>\n\t\t</div>\n    <ul>\n    \t<li ng-repeat="post in results">\n    \t\t<button type="button" class="button-secondary icon-only check" ng-click="selectPost(post)" translate></button> {{ post.id }} : {{ post.title }}\n    \t</li>\n    </ul>\n</form>\n'},function(e,exports,t){e.exports='\n<form>\n  <div class="form-field video_embed">\n    <label>{{label}}</label>\n    <p>\n      <span translate="post.video.enter_a">Enter a</span>\n\n      <img src="'+t(948)+'" class="wordmark-replace">\n      <span translate="post.video.or"> or </span>\n      <img src="'+t(947)+'" class="wordmark-replace">\n      <span translate="post.video.video_url"> video URL</span>\n    </p>\n    <input type="text" ng-model="videoUrl" ng-change="constructIframe(videoUrl)" placeholder="https://youtu.be/123456">\n\n    <div id="{{previewId}}" class="form-field-preview" ng-show="videoUrl">\n      <div class="video_embed-fluid">\n        <iframe frameborder="0" ng-src="{{video}}" allowfullscreen></iframe>\n      </div>\n    </div>\n  </div>\n</form>\n'},function(e,exports,t){e.exports='<div class="mode-context init" dropdown>\n    <header class="mode-context-header">\n        <ol class="breadcrumbs" ng-controller="navigation as nav">\n            <li><a href="/">{{nav.site.name}}</a></li>\n        </ol>\n        <h1 class="mode-context-title">\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#star"></use>\n            </svg>\n            {{savedSearch.name}}\n        </h1>\n    </header>\n\n    <span class="mode-context-trigger" dropdown-toggle>\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span class="label hidden" translate>app.show_more_less</span>\n    </span>\n\n    <div class="mode-context-body">\n        \x3c!--// IF: Saved Search has description //--\x3e\n        <p ng-if="savedSearch.description">{{savedSearch.description}}</p>\n        \x3c!--// END IF //--\x3e\n\n        <ul class="metadata">\n            <li>\n                <span class="status-indicator public tooltip" ng-if="!savedSearch.role">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#globe"></use>\n                    </svg>\n                    <span class="bug" translate="saved_search.visible_to_public">This saved search is visible to the public</span>\n                </span>\n                <span class="status-indicator yellow tooltip" ng-if="savedSearch.role">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#globe"></use>\n                    </svg>\n                    <span class="bug" translate="saved_search.visible_to_roles" translate-values="{ roles: savedSearch.role.join(\', \') }">This saved search is visible to ...</span>\n                </span>\n            </li>\n            <li>\n                <span ng-if="savedSearch.user">\n                    <span translate=\'app.created_by\' translate-values="{ author : savedSearch.user.realname }">Created by</span>\n                </span>\n            </li>\n        </ul>\n\n        \x3c!--// IF: User has permission to edit the Saved Search //--\x3e\n        <div class="form-field" ng-if="canEdit" dropdown>\n            <button type="button" data-modal="edit-savedSearch" ng-click="editSavedSearch()">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#pencil"></use>\n                </svg>\n                <span class="button-label" translate>app.edit</span>\n            </button>\n\n            <button type="button" data-toggle="dropdown-menu" class="init" dropdown-toggle>\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#ellipses"></use>\n                </svg>\n                <span class="button-label hidden" translate>app.more</span>\n            </button>\n            <ul class="dropdown-menu init" dropdown-menu>\n                <li ng-if="showNotificationLink">\n                    <a ng-click="saveNotification(savedSearch)">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                        </svg>\n                        <span class="label" ng-click="saveNotification(savedSearch)" translate="app.get_notifications">Get notifications</span>\n                    </a>\n                </li>\n                <li ng-if="!showNotificationLink">\n                    <a ng-click="removeNotification(savedSearch)">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                        </svg>\n                        <span class="label" translate="app.turn_off_notifications">Turn off notifications</span>\n                    </a>\n                </li>\n                <li>\n                    <a ng-click="deleteSavedSearch()">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                        </svg>\n                        <span class="label" translate="app.delete"></span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n        \x3c!--// END IF //--\x3e\n\n        \x3c!--// IF: User does not have permission to edit the Saved Search //--\x3e\n        <div class="form-field" ng-if="!canEdit && $root.loggedin">\n            \x3c!-- // IF: User is not yet getting notifications about this Saved Search //--\x3e\n            <button type="button" ng-if="showNotificationLink" ng-click="saveNotification(savedSearch)">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                </svg>\n                <span class="button-label" translate="app.get_notifications">Get notifications</span>\n            </button>\n\n            \x3c!--// ELSE //--\x3e\n\n            <button type="button" ng-if="!showNotificationLink" class="button-flat">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#bell"></use>\n                </svg>\n                <span class="button-label" translate="app.turn_off_notifications">Turn off notifications</span>\n            </button>\n            \x3c!--// END IF //--\x3e\n        </div>\n        \x3c!--// END IF //--\x3e\n        <div class="form-field">\n            \x3c!-- mode context is only available in the map so we are always sending you back to it in the return to all posts feature --\x3e\n            <a ng-click="clearFilters()" type="button" class="button-link">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#arrow-left"></use>\n                </svg>\n                <span class="button-label" translate="app.return_to_all_posts">Return to all posts</span>\n            </a>\n        </div>\n\n        <mode-context-form-filter></mode-context-form-filter>\n        \x3c!-- <saved-search-update></saved-search-update> --\x3e\n\n    </div>\n</div>\n'},function(e,exports){e.exports='<div class="form-field">\n    <label class="hidden" translate="set.delete_saved_searches">Delete Saved Searches</label>\n</div>\n<div class="modal-body">\n    <div class="listing">\n        <div class="listing-item" ng-repeat="savedSearch in searches">\n            <div class="listing-item-primary">\n                <div class="form-field checkbox">\n                    <label>\n                        <input type="checkbox" ng-model="savedSearch" checklist-model="selectedSavedSearches" checklist-value="savedSearch.id" name="selectedSavedSearches">\n                        {{savedSearch.name}}\n                    </label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="modal-actions">\n        <div class="form-field">\n            <button type="button" class="button-link" ng-click="close()" translate>modal.button.close</button>\n            <button type="button" class="button-alpha" ng-show="processing">\n                <div class="loading">\n                    <div class="line"></div>\n                    <div class="line"></div>\n                    <div class="line"></div>\n                </div>\n                <span class="button-label">Saving</span>\n            </button>\n            <button type="submit" class="button-alpha" ng-class="{disabled: selectedSavedSearches.length < 1}" translate ng-click="delete()" ng-show="!processing">app.delete</button>\n        </div>\n    </div>\n</div>\n\n'},function(e,exports,t){e.exports='<div class="form-field">\n    <label class="hidden" translate="set.find_a_saved_search">Find a saved search</label>\n    <div class="input-with-icon">\n        <svg class="iconic">\n            <use xlink:href="'+t(0)+'#magnifying-glass"></use>\n        </svg>\n        <input\n            type="search"\n            ng-model="savedSearchQuery"\n            placeholder="{{ \'set.find_a_saved_search\' | translate }}" ng-keydown="searchSearches(savedSearchQuery)"\n        >\n    </div>\n</div>\n<div class="modal-body">\n\n    <button ng-show="loading" type="button" class="button button-full-width button-beta">\n        <div class="loading">\n            <div class="line"></div>\n            <div class="line"></div>\n            <div class="line"></div>\n        </div>\n        <span class="button-label" translate="app.loading">Loading</span>\n    </button>\n\n    <div ng-show="!loading" class="listing">\n        <div class="listing-item" ng-repeat="search in searches">\n            <div class="listing-item-primary">\n                <h2 class="listing-item-title"><a href="#" ng-click="goToSearch(search)">{{search.name}}</a></h2>\n            </div>\n        </div>\n    </div>\n    <div ng-show="!loading && searches.length === 0">\n        <span translate="app.no_results">&nbsp;</span>\n    </div>\n       \x3c!--  <div class="modal-actions">\n            <div class="form-field">\n                <button type="button"\n                    class="button-beta"\n                    ng-click="createNewSearch()">\n                    <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#plus"></use>\n                    </svg>\n                    <span class="button-label" translate="app.create_new">Create new</span>\n                </button>\n            </div>\n        </div> --\x3e\n</div>\n\n'},function(e,exports){e.exports='<div class="savedsearch-create form-field" ng-show="hasFilters()">\n    <button ng-click="saveSearch()" ng-show="$root.loggedin" class="button-alpha" type="button" translate>\n        set.save_savedsearch\n    </button>\n    <button ng-click="saveSearch()" ng-show="isSaving" disabled class="button-beta" type="button">\n            <div class="loading">\n                <div class="line"></div>\n                <div class="line"></div>\n                <div class="line"></div>\n            </div>\n            <span class="button-label" translate="app.saving">Saving</span>\n    <button ng-click="clearFilters()" class="button-link" type="button" translate>\n        set.clear_search\n    </button>\n\n</div>\n\n'},function(e,exports,t){e.exports='<div class="modal-body savedsearch-editor">\n\n    <div class="form-field title">\n        <label translate>set.name_savedsearch</label>\n        <input type="text" placeholder="Name your Saved Search..." ng-model="cpySavedSearch.name" />\n    </div>\n\n    <div class="form-field">\n        <label class="input-label" translate>set.description</label>\n        <textarea ng-model="cpySavedSearch.description" />\n    </div>\n\n    <div class="form-field switch" ng-if="featuredEnabled()">\n        <label for="saved-search-featured">\n            <translate translate="saved_search.featured">Featured</translate>\n            <span class="tooltip">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#question-mark"></use>\n                </svg>\n                <span class="bug" translate="saved_search.featured_tooltip">Featured searches appear to all users in <br>the "Saved Searches" menu</span>\n            </span>\n        </label>\n        <div class="toggle-switch">\n            <input class="tgl" id="saved-search-featured" type="checkbox" ng-model="cpySavedSearch.featured">\n            <label class="tgl-btn" for="saved-search-featured" value="1"></label>\n        </div>\n    </div>\n\n    <div class="form-field">\n        <label class="input-label" translate="set.default_viewing_mode">Default viewing mode</label>\n        <div class="custom-select">\n            <select ng-options="view.name as view.display_name for view in views" ng-model="cpySavedSearch.view">\n            </select>\n        </div>\n    </div>\n    \x3c!-- Who can see? --\x3e\n    <role-selector model="savedSearch" title="\'app.who_can_see_this\'"></role-selector>\n    <div class="modal-actions">\n        <div class="form-field">\n            <button type="button" class="button-link  modal-trigger" ng-click="cancel()" translate>app.cancel</button>\n            <button type="button" class="button-alpha modal-trigger" ng-show="!isSaving" ng-click="save(cpySavedSearch)" translate>app.save_and_close</button>\n            <button ng-click="saveSearch()" ng-show="isSaving" disabled class="button-beta" type="button">\n            <div class="loading">\n                <div class="line"></div>\n                <div class="line"></div>\n                <div class="line"></div>\n            </div>\n            <span class="button-label" translate="app.saving">Saving</span>\n    </button>\n        </div>\n    </div>\n</div>\n'},function(e,exports){e.exports='<div class="savedsearch-update form-field" ng-show="filtersChanged()">\n    <button ng-click="saveSearch()" ng-show="canEdit && !isSaving" class="button-alpha" type="button" translate>\n        set.update_savedsearch\n    </button>\n\n    <button ng-click="saveSearch()" ng-show="canEdit && isSaving" disabled class="button-beta" type="button">\n            <div class="loading">\n                <div class="line"></div>\n                <div class="line"></div>\n                <div class="line"></div>\n            </div>\n            <span class="button-label" translate="app.updating">Updating</span>\n    </button>\n    \n    <button ng-click="resetSearch()" class="button-link" type="button" translate>\n        set.reset_savedsearch\n    </button>\n</div>\n'},function(e,exports,t){e.exports='<div class="fab" data-message="add-post">\n    <button type="button" class="button-alpha button-fab" ng-click="handleClick()" ng-disabled="disabled" ng-class="{\'disabled\': $parent.$parent.bulkActionsSelected}">\n        <svg class="iconic">\n            <use xlink:href="'+t(0)+'#plus"></use>\n            <foreignObject>\n                <img class="icon" src="'+t(263)+'">\n            </foreignObject>\n        </svg>\n        <span class="hidden">Add</span>\n    </button>\n</div>\n'},function(e,exports){e.exports='<ul>\n    <li ng-repeat="form in forms">\n        <a ng-click="handleClick(form)">\n            <span class="post-band" ng-style="{backgroundColor: form.color}"></span>\n            {{form.name}}\n        </a>\n    </li>\n</ul>'},function(e,exports,t){e.exports='<button type="button" class="button-alpha button-dropdown init" ng-click="toggleButton()"  ng-class="{ \'active\': buttonToggle }">\n    <svg class="iconic">\n        <use xlink:href="'+t(0)+'#plus"></use>\n        <foreignObject>\n            <img class="icon" src="'+t(263)+'">\n        </foreignObject>\n    </svg>\n    <span class="button-label" translate="nav.add_post">Add post</span>\n</button>\n\n<ul class="dropdown-menu init" ng-show="buttonToggle" ng-class="{ \'active\': buttonToggle }">\n      <li ng-repeat="form in forms">\n          <a ng-click="createPost(form.id)">\n              <span class="post-band">\n              </span>\n              {{form.name}}\n          </a>\n      </li>\n</ul>\n'},function(e,exports){e.exports='<article ng-class="[\'postcard\', {selected: post.id === selectedPost.post.id}]" >\n    <div class="post-band" ng-style="{backgroundColor: post.form.color}"></div>\n    <div class="listing-item-select">\n        <input ng-show="canSelect" type="checkbox" checklist-value="post.id" checklist-model="selectedPosts" ng-click="stopClickPropagation($event)">\n    </div>\n    <div class="postcard-body" ng-click="clickAction($event)">\n      <header class="postcard-header">\n\n        <post-metadata post="post" hide-date-this-week="true"></post-metadata>\n        \x3c!-- this is used in the map view card and the sidebar card in the data view--\x3e\n        <post-actions post="post"></post-actions>\n      </header>\n        <div class="postcard-overflow">\n            <div class="postcard-title">\n                <div class="postcard-field">\n                {{ post.title || post.content | limitTo:150 }}{{ !post.title && post.content.length > 150 ? \' ...\' : \'\'}}\n                </div>\n            </div>\n\n\n            <post-preview-media post="post"></post-preview-media>\n            \x3c!-- <img src="http://lorempixel.com/400/300/" class="postcard-image"> --\x3e\n\n            <div ng-if="!shortContent" class="postcard-field">\n                {{ post.content }}\n            </div>\n            <div ng-if="shortContent" class="postcard-field">\n                {{ post.content | limitTo:150 }}{{ post.content.length > 150 ? \' ...\' : \'\'}}\n            </div>\n        </div>\n    </div> \x3c!-- /postcard-body --\x3e\n</article>\n'},function(e,exports,t){e.exports='<form class="survey-filter">\n    <div \n        class="survey-filter-checkbox init"\n        ng-class="{checked: (filters.source.indexOf(provider.label.toLowerCase()) !== -1)}"\n        ng-repeat="provider in providers"\n        dropdown\n    >\n        <div class="survey-filter-parent">\n            <div class="survey-filter-label">\n                <span class="post-band" ng-style="{backgroundColor: \'#00aced\'}"></span>\n                <label>\n                    <input \n                        type="checkbox"\n                        ng-checked="filters.source.indexOf(provider.label.toLowerCase()) !== -1"\n                        translate\n                        ng-click="toggleFilters(provider.label.toLowerCase())"\n                    />\n                    {{provider.label}}\n                </label>\n            </div>\n            <span class="survey-filter-total init" data-toggle="dropdown-menu" dropdown-toggle>\n                {{provider.total}}\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n                </svg>\n            </span>\n            <div class="dropdown-menu init" dropdown-menu>\n                <span class="post-band" ng-style="{backgroundColor: \'#00aced\'}"></span>\n                <p>\n                    <em translate="post.messages.imported_by" translate-values="{messages: provider.heading}"></em>\n                </p>\n                <div class="divider"></div>\n                <ul>\n                    <li>\n                        <a\n                            translate="post.show_only_form" \n                            translate-values="{form: provider.label}"\n                            ng-click="showOnly(provider.label)"\n                        ></a>\n                    </li>\n                    <li>\n                        <a\n                            translate="post.hide_form"\n                            translate-values="{form: provider.label}"\n                            ng-click="hide(provider.label)"\n                        ></a>\n                    </li>\n                    <li ng-if="featureEnabled()">\n                        <a\n                            translate="post.messages.show_only_incoming"\n                            translate-values="{provider: provider.heading.toLowerCase()}"\n                            ng-click="showOnlyIncoming(provider.label)"\n\n                        ></a>\n                    </li>\n                    <div class="divider"></div>\n                    <li ng-if="featureEnabled()">\n                        <div>\n                            <a href="/settings/datasources">\n                                <svg class="iconic">\n                                    <use xlink:href="'+t(0)+'#pencil"></use>\n                                </svg>\n                                <span class="label">Edit {{provider.label}}</span>\n                            </a>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</form>\n'},function(e,exports){e.exports='<div embed-only="true" class="toolbox hide-when-medium">\n    <button ng-click="openFilters()" class="button-beta button-plain mode-context-trigger" translate="app.filter_by_survey">Filter by survey</button>\n</div>\n'},function(e,exports,t){e.exports='<div class="form-field saved-search" ng-show="collection">\n    <span class="bug">\n        <svg class="iconic" ng-click="removeCollection(collection, $event)">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n        </svg>\n        <span><em><translate translate="app.collection"></translate>: </em>{{collection.name}}</span>\n    </span>\n</div>\n<div class="form-field saved-search" ng-show="savedSearch">\n    <span class="bug">\n        <svg class="iconic" ng-click="removeSavedSearch(savedSearch, $event)">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n        </svg>\n        <span><em><translate translate="app.saved_search"></translate>: </em>{{savedSearch.name}}</span>\n    </span>\n    <div ng-repeat="(key, values) in savedSearch.filter">\n        <span ng-if="isArray(values)">\n            <span class="bug saved-search-filter" ng-repeat="value in values track by $index ">\n                <svg class="iconic" ng-click="removeFilter(key, value, savedSearch, $event)">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n                </svg>\n                <span><em><translate translate="global_filter.filter_tabs.{{key}}"></translate>:</em> {{ transformFilterValue(value, key) }}</span>\n            </span>\n        </span>\n        <span ng-if="!isArray(values)">\n            <span class="bug saved-search-filter">\n                <svg class="iconic" ng-click="removeFilter(key, values, savedSearch, $event)">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n                </svg>\n                <span><em><translate translate="global_filter.filter_tabs.{{key}}"></translate>:</em> {{ transformFilterValue(values, key) }}</span>\n            </span>\n        </span>\n    </div>\n</div>\n<div class="form-field">\n    <div ng-repeat="(key, values) in uiFilters" class="inline-filters">\n        <span ng-if="isArray(values)">\n            <span class="bug" ng-repeat="value in values track by $index" >\n                <svg class="iconic" ng-click="removeFilter(key, value, false, $event)">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n                </svg>\n                <span><em><translate translate="global_filter.filter_tabs.{{key}}"></translate>:</em> {{ transformFilterValue(value, key) }}</span>\n            </span>\n        </span>\n        <span ng-if="!isArray(values)">\n            <span class="bug">\n                <svg class="iconic" ng-click="removeFilter(key, values, false, $event)">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n                </svg>\n                <span><em><translate translate="global_filter.filter_tabs.{{key}}"></translate>:</em> {{ transformFilterValue(values, key) }}</span>\n            </span>\n        </span>\n    </div>\n</div>\n\n<div class="form-field" ng-show="showSaveSavedSearchButton()">\n    <button type="button" class="button button-alpha right" ng-click="saveSavedSearchModal()" translate="set.save_savedsearch">Save search</button>\n</div>\n<div class="form-field" ng-show="userCanUpdateSavedSearch">\n    <button type="button" class="button button-alpha right" ng-click="$parent.editSavedSearchModal(\'update\')" translate="set.update_savedsearch">Edit Saved search</button>\n</div>\n'},function(e,exports,t){e.exports='<fieldset ng-show="categories.length" overflow-toggle has-overflow="categories.length > 1" ng-model-options="{ updateOn: \'default\' }">\n    <label translate="nav.categories">Categories</label>\n\n    <div class="form-field checkbox" ng-repeat="(index, category) in categories" ng-class="{ overflow : ($index > 1) }" ng-if="category.parent_id === null">\n        <label>\n            <input\n                type="checkbox"\n                checklist-value="category.id"\n                value="category.id"\n                checklist-model="selectedCategories"\n            > \n            {{ ::category.tag }}\n        </label>\n        <div \n          class="form-field checkbox"\n          ng-repeat="child in category.children"\n        >\n          <label>\n          <input \n            type="checkbox"\n            checklist-model="selectedCategories"\n            checklist-value="child.id"\n            value="child.id"\n            ng-selected="selectedCategories.indexOf(category.id) >-1"\n          >\n            {{ ::child.tag }}\n        </label>\n    </div> \n    </div>\n      <span class="form-field-toggle">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span translate="nav.more">More</span>\n    </span>\n</fieldset>'},function(e,exports,t){e.exports='<fieldset>\n    <label translate>global_filter.date_range</label>\n    <div class="form-field date">\n        <label class="hidden" translate="global_filter.filter_tabs.created_after">Start date</label>\n        <div class="input-with-icon">\n            <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#calendar"></use>\n            </svg>\n            <input type="date" pick-a-date="dateAfter" pick-a-date-options="options" placeholder="{{ \'global_filter.filter_tabs.created_after\' | translate }}" ng-model="dateAfterModel" />\n        </div>\n    </div>\n            <span class="date-joiner">to</span>\n\n\n    <div class="form-field date">\n        <label class="hidden" translate="global_filter.filter_tabs.created_before">End date</label>\n        <div class="input-with-icon">\n            <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#calendar"></use>\n            </svg>\n        <input type="date" pick-a-date="dateBefore" pick-a-date-options="options" placeholder="{{ \'global_filter.filter_tabs.created_before\' | translate }}" ng-model="dateBeforeModel">\n    </div>\n</div>\n\n\n</fieldset>\n'},function(e,exports,t){e.exports='<fieldset overflow-toggle has-overflow="forms.length > 1" ng-model-options="{ updateOn: \'default\' }">\n    <label translate="app.surveys">Survey</label>\n\n    <div class="form-field checkbox" ng-repeat="(index, form) in forms" ng-class="{ overflow : ($index > 1) }">\n        <label>\n            <input checklist-value="form.id" checklist-model="selectedForms" type="checkbox" name="selectedForms" > {{ ::form.name }}\n        </label>\n    </div>\n    <div class="form-field checkbox" ng-class="{ overflow : (forms.length > 1) }">\n        <label>\n            <input checklist-value="\'none\'" checklist-model="selectedForms" type="checkbox" name="selectedForms" > <span translate="nav.unknown">Unknown</span>\n        </label>\n    </div>\n    <span class="form-field-toggle">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span translate="nav.more">More</span>\n    </span>\n</fieldset>'},function(e,exports){e.exports='<fieldset>\n         <legend translate="global_filter.filter_tabs.has_location"></legend>\n     <div class="form-field radio">\n        <label translate="global_filter.filter_tabs.all_posts">        </label>\n            <input \n                ng-value=\'all\'\n                ng-checked="hasLocation === \'all\'"\n                ng-model="hasLocation"\n                type="radio" \n                name="hasLocation"\n            > \n        </div>\n    <div class="form-field radio">\n        <label translate="global_filter.filter_tabs.unmapped"></label>\n            <input\n                value=\'unmapped\' \n                ng-model="hasLocation"\n                type="radio"\n                name="hasLocation"\n                ng-checked="hasLocation === \'unmapped\'"\n            > \n    </div>\n    <div class="form-field radio">\n     <label translate="global_filter.filter_tabs.mapped"></label>\n            <input\n                value=\'mapped\'\n                ng-model="hasLocation"\n                ng-checked= "hasLocation === \'mapped\'"\n                type="radio"\n                name="hasLocation"\n            >\n        </div>\n</fieldset>\n'},function(e,exports,t){e.exports='<fieldset>\n    <legend translate="global_filter.location">Location</legend>\n\n    <div class="form-field">\n        <div class="input-with-icon">\n            <input type="text" style="padding-left: 24px;" placeholder="{{ \'global_filter.location_placeholder\' | translate }}" ng-model="locationSearchText">\n            <svg class="iconic" style="left: 8px;">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#location"></use>\n            </svg>\n        </div>\n    </div>\n\n    <div class="form-field">\n        <select ng-model="withinKmModel" convert-to-number>\n            <option value="1" translate>global_filter.option_1</option>\n            <option value="10" translate>global_filter.option_2</option>\n            <option value="50" translate>global_filter.option_3</option>\n            <option value="100" translate>global_filter.option_4</option>\n            <option value="500" translate>global_filter.option_5</option>\n        </select>\n    </div>\n\n</fieldset>\n\n'},function(e,exports){e.exports='<div class="form-field radio" ng-repeat="orderOption in activeOrderOptions.options">\n    <label>\n        <input type="radio" id="{{orderOption.value}}" value="{{orderOption.value}}" name="order" ng-model="selectedValue.value" />\n        <span>{{orderOption.labelTranslateKey|translate}}</span>\n    </label>\n</div>\n'},function(e,exports){e.exports='<fieldset>\n    <div class="toggle-content init active">\n        <div class="custom-select">\n            <select\n                    name="orderByOptions"\n                    id="order"\n                    ng-options="option.labelTranslateKey | translate for option in orderByOptions.options track by option.value"\n                    ng-model="orderValue">\n            </select>\n        </div>\n    </div>\n</fieldset>\n'},function(e,exports,t){e.exports='<form name="postFiltersFormOpen"\n      uib-dropdown\n      is-open="status.isopen"\n      role="search"\n      class="searchbar"\n      auto-close="disabled"\n      ng-submit="applyFilters()"\n      ng-model-options="{ updateOn : \'submit default\' }"\n      data-message="search"\n      ng-class="{ active: status.isopen }"\n>\n\n    <div class="searchbar-input">\n        \x3c!-- Search input --\x3e\n        <div class="form-field">\n            <label class="hidden" translate="toolbar.searchbar.search_entity">Search</label>\n            <div class="input-with-icon">\n                <input name="q" type="search" autocomplete="off"\n                placeholder="{{ \'toolbar.searchbar.search_entity\' | translate }}"\n                ng-model="filters.q" ng-model-options="{ debounce: 300 }" ng-focus="showDropdown()" ng-keyup="showDropdown()">\n                <svg class="iconic" ng-show="!postFiltersFormOpen.q.$viewValue.length">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#magnifying-glass"></use>\n                </svg>\n                <svg class="iconic" ng-click="removeQueryFilter()" ng-show="postFiltersFormOpen.q.$viewValue.length">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#circle-x"></use>\n                </svg>\n            </div>\n        </div>\n    </div>\n\n\n    \x3c!-- Toggle Filters show/hide --\x3e\n    <div uib-dropdown-toggle class="searchbar-options">\n        <a type="button" class="searchbar-options-filter button">\n            <sort-and-filter-counter></sort-and-filter-counter>\n        </a>\n    </div>\n\n    <filters-dropdown uib-dropdown-menu class="dropdown-menu" dropdown-status="status" filters="filters"></filters-dropdown>\n</form>\n'},function(e,exports){e.exports='<fieldset ng-show="searchesLength > 0 && !loading">\n<label translate="app.saved_search"></label>\n    <div class="custom-select" ng-model-options="{ updateOn: \'default\' }">\n        <select\n                ng-model="selectedSavedSearch"\n                ng-options="search.name\n                        for\n                        search in searches\n                        track by search.id"\n        >\n            <option value="" translate="app.select_one">Select one</option>\n        </select>\n    </div>\n    <a class="button button-beta" ng-show="selectedSavedSearch" ng-click="$parent.editSavedSearchModal(\'edit\')">Edit</a>\n</fieldset>\n<fieldset ng-show="loading">\n    <label translate="app.saved_search"></label>\n    <button ng-show="loading" type="button" class="button button-full-width button-beta">\n        <div class="loading">\n            <div class="line"></div>\n            <div class="line"></div>\n            <div class="line"></div>\n        </div>\n        <span class="button-label" translate="app.loading_saved_searches">Loading saved searches</span>\n    </button>\n</fieldset>'},function(e,exports,t){e.exports='<fieldset overflow-toggle has-overflow="false" ng-model-options="{ updateOn: \'default\' }">\n    <label translate="global_filter.source">Source</label>\n\n    <div class="form-field checkbox icon-input">\n        <label>\n            <input type="checkbox" ng-model="source" checklist-model="selectedSources" checklist-value="\'email\'" name="selectedSources">\n            <span>Email</span>\n        </label>\n    </div>\n    <div class="form-field checkbox icon-input">\n        <label>\n            <input type="checkbox" ng-model="source" checklist-model="selectedSources" checklist-value="\'sms\'" name="selectedSources">\n            <span>SMS</span>\n        </label>\n    </div>\n    <div class="form-field checkbox icon-input">\n        <label>\n            <input type="checkbox" ng-model="source" checklist-model="selectedSources" checklist-value="\'twitter\'" name="selectedSources">\n            <span>Twitter</span>\n        </label>\n    </div>\n    <div class="form-field checkbox icon-input">\n        <label>\n            <input type="checkbox" ng-model="source" checklist-model="selectedSources" checklist-value="\'web\'" name="selectedSources">\n            <span>Web</span>\n        </label>\n    </div>\n\n    <span class="form-field-toggle">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span translate="nav.more">More</span>\n    </span>\n</fieldset>\n'},function(e,exports,t){e.exports='<fieldset overflow-toggle has-overflow="statuses.length > 2" ng-model-options="{ updateOn: \'default\' }" ng-show="hasPermission(\'Manage Posts\')">\n    <label translate="global_filter.status">Status</label>\n\n    <div class="form-field checkbox icon-input" ng-repeat="(index, status) in statuses" ng-class="{ overflow: ($index > 1) }">\n\n      <label>\n        <svg class="iconic" ng-if="status == \'published\'">\n          <use xlink:href="'+t(0)+'#globe"></use>\n        </svg>\n        <svg class="iconic" ng-if="status == \'draft\'">\n          <use xlink:href="'+t(0)+'#document"></use>\n        </svg>\n        <svg class="iconic" ng-if="status == \'archived\'">\n          <use xlink:href="'+t(0)+'#box"></use>\n        </svg>\n\n        <input type="checkbox" ng-model="status" checklist-model="selectedStatuses" checklist-value="status" name="selectedStatuses">\n        <span translate="post.published" ng-if="status == \'published\'">Published</span>\n        <span translate="post.draft" ng-if="status == \'draft\'">Under review</span>\n        <span translate="post.archived" ng-if="status == \'archived\'">Archive</span>\n\n        </label>\n    </div>\n\n    <span class="form-field-toggle">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span translate="nav.more">More</span>\n    </span>\n</fieldset>\n'},function(e,exports){e.exports='<div class="form-field checkbox" ng-model-options="{ updateOn: \'default\' }">\n    <label>\n        <input type="checkbox" id="unlockedOnTop" value="unlockedOnTop"\n               name="unlockedOnTop" ng-model="unlockedOnTop.value"\n               ng-true-value="\'true\'" ng-false-value="\'false\'"\n               ng-model-options="{updateOn: \'default\'}">\n        {{unlockedOnTop.labelTranslateKey|translate}}\n    </label>\n</div>'},function(e,exports,t){e.exports='<fieldset overflow-toggle has-overflow="roles.length">\n    <legend translate="global_filter.who_its_visible_to">Who it\'s visible to</legend>\n\n    <div class="form-field radio">\n        <label>\n            <input type="radio" name="visible_to" ng-model="visible_to" value="everyone"> <span translate="nav.everyone">Everyone</span>\n        </label>\n    </div>\n\n    <div class="form-field radio" ng-repeat="role in roles" ng-class="{ overflow : ($index > 0) }">\n        <label>\n            <input type="radio" name="visible_to" ng-model="$parent.visible_to" value="{{ role.name }}"> {{ ::role.display_name }}\n        </label>\n    </div>\n    <div class="form-field radio" ng-class="{ overflow : (roles.length > 0) }">\n        <label>\n            <input type="radio" name="visible_to" ng-model="visible_to" value="draft">\n            <span translate="nav.only_you" ng-hide="hasPermission(\'Manage Posts\')">Only you</span>\n            <span translate="nav.only_author" ng-show="hasPermission(\'Manage Posts\')">Only the author (draft)</span>\n        </label>\n    </div>\n    <span class="form-field-toggle">\n        <svg class="iconic">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span translate="nav.more">More</span>\n    </span>\n</fieldset>\n'},function(e,exports){e.exports='<div class="dropdown-menu-body">\n    <div class="form-field filter-buttons">\n        <post-active-search-filters ng-model="filters" filters-var="filters"></post-active-search-filters>\n    </div>\n    <div class="divider"></div>\n    \x3c!-- sorting options --\x3e\n    <h4 class="dropdown-menu-title" translate="app.sort_by"></h4>\n\n    <filter-post-sorting-options ng-model="filters.orderby"></filter-post-sorting-options>\n    <fieldset>\n        <filter-post-order-asc-desc ng-model="filters.order"></filter-post-order-asc-desc>\n        <filter-unlocked-on-top ng-model="filters.order_unlocked_on_top"></filter-unlocked-on-top>\n    </fieldset>\n    \x3c!-- end: sorting options --\x3e\n\n    \x3c!-- filter options --\x3e\n    <h4 class="dropdown-menu-title" translate="app.filter_by"></h4>\n    <filter-saved-search ng-model="filters.saved_search"></filter-saved-search>\n    <filter-status ng-model="filters.status"></filter-status>\n    <filter-category ng-model="filters.tags"></filter-category>\n    <filter-form ng-model="filters.form"></filter-form>\n    <filter-source ng-model="filters.source"></filter-source>\n    <filter-date date-after-model="filters.date_after" date-before-model="filters.date_before"></filter-date>\n    <filter-location center-point-model="filters.center_point" within-km-model="filters.within_km"></filter-location>\n    \x3c!-- end: filter options --\x3e\n</div>\n<div class="form-field filter-actions">\n    <button type="button" class="button-link" ng-click="clearFilters()" translate>global_filter.clear_filters</button>\n    <button type="submit" class="button-alpha" translate>app.apply_filters</button>\n</div>\n'},function(e,exports,t){e.exports='<span class="button-label-d">\n    <span class="badge iconic">{{filtersCount}}</span>\n    <span translate>app.sort_filter</span>\n</span>\n<svg class="iconic">\n    <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n</svg>'},function(e,exports,t){e.exports='<form class="survey-filter">\n\n    <div class="survey-filter-checkbox init" ng-class="{ checked : (filters.form.indexOf(form.id) !== -1) }" ng-repeat="form in forms" dropdown>\n        <div class="survey-filter-parent">\n        <div class="survey-filter-label">\n            <span class="post-band" ng-style="{backgroundColor: form.color}"></span>\n            <label class="checked">\n                <input type="checkbox" checklist-value="form.id" checklist-model="filters.form" ng-change="changeForms()">\n                {{ ::form.name }}\n            </label>\n        </div>\n         <span class="survey-filter-total init" data-toggle="dropdown-menu" dropdown-toggle>\n            \x3c!-- todo! show count --\x3e\n            {{ form.post_count }}\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n        </span>\n        <ul class="dropdown-menu init" dropdown-menu>\n            <li ng-show="canAddToSurvey(form)">\n                <a ui-sref="postCreate({id: form.id })">\n                    <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                    </svg>\n                    <span class="label" translate="post.add_to_form" translate-values="{ form: form.name }">Add to</span>\n                </a>\n            </li>\n            \x3c!-- <li>\n                <a href="">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#task"></use>\n                </svg>\n                <span class="label">Assign someone to add to Getting around</span>\n                </a>\n            </li> --\x3e\n            <div class="divider"></div>\n            <li><a translate="post.show_only_form" translate-values="{ form: form.name }" ng-click="showOnly(form.id)">Show only </a></li>\n            <li><a translate="post.hide_form" translate-values="{ form: form.name }" ng-click="hide(form.id)">Hide</a></li>\n            <div class="divider"></div>\n            <li ng-show="hasManageSettingsPermission()">\n                <a ui-sref="settings.surveys.id({id: form.id, action: \'edit\'})">\n                    <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#cog"></use>\n                    </svg>\n                    <span class="label" translate="nav.survey_settings">Survey settings</span>\n                </a>\n            </li>\n        </ul>\n        </div>\n\n        <fieldset\n            class="survey-filter-children"\n            dropdown\n            auto-close="outsideClick"\n            ng-show="form.tags.length > 0 && form.post_count > 0"\n            >\n            <legend class="init" data-toggle="form-fieldgroup" dropdown-toggle ng-class="{ selected : filters.tags.length }" translate="app.categories_count" translate-values="{ count: form.tags.length }">\n            </legend>\n\n            <div class="form-fieldgroup init" dropdown-menu>\n                <div\n                    class="form-field checkbox"\n                    ng-repeat="tag in form.tags"\n                    ng-class="{\'checked\': filters.tags.indexOf(tag.id) > -1}"\n                >\n                    <label ng-click="selectParent(tag, form.id)">\n                        <input\n                            type="checkbox"\n                            checklist-value="tag.id"\n                            checklist-model="filters.tags"\n                        />\n                        {{tag.tag}}\n                    </label>\n                    <div class="form-fieldgroup active">\n                        <div\n                            class="form-field checkbox"\n                            ng-repeat="child in tag.children"\n                            ng-class="{\'checked\': filters.tags.indexOf(child.id) !== -1}"\n                        >\n                            <label>\n                                <input\n                                    type="checkbox"\n                                    checklist-value="child.id"\n                                    checklist-model="filters.tags"\n                                />\n                                {{child.tag}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </fieldset>\n    </div>\n</form>\n<div class="tool" ng-show="unmapped > 0">\n<p>There are\n    <a ng-click="goToUnmapped()"><strong>{{getUnmapped()}}</strong></a> not shown here because they don\'t include location information.</p>\n</div>\n<div class="form-field" ng-show="hasManageSettingsPermission()">\n        <a ui-sref="settings.surveys.create" class="button button-link">\n            <svg class="iconic">\n                <use xlink:href="'+t(0)+'#plus"></use>\n            </svg>\n            <span class="button-label" translate="app.create_new_survey">Create new survey</span>\n        </a>\n    </div>\n</form>\n<div class="tool">\n    <h6 class="tool-heading" translate="app.data_sources"></h6>\n    <filter-by-datasource post-stats="sourceStats" filters="filters"></filter-by-datasource>\n</div>\n <div class="tool">\n            <h6 class="tool-heading">Language</h6>\n            <span class="tool-trigger init" ng-class="{\'active\': showLanguage}" ng-click="languageToggle()">\n                <svg class="iconic">\n                    <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n                </svg>\n                <span class="label hidden">Show/hide</span>\n            </span>\n            <div\n                class="toggle-content"\n                ng-class="{\'active\': showLanguage}"\n                >\n            <language-switch></language-switch>\n            </div>\n    </div>\n'},function(e,exports,t){e.exports='<div class="mode-context init" ng-controller="navigation as nav" dropdown auto-close="disabled" filter-by-survey-dropdown is-open="filtersMenuOpen">\n    <header class="mode-context-header" ng-class="{ \'has-logo\' : nav.site.image_header }">\n        <h1 class="mode-context-title"><a href="/" ng-bind="nav.site.name"></a></h1>\n        <img ng-if="nav.site.image_header" ng-src="{{ nav.site.image_header }}" class="deployment-logo" />\n    </header>\n\n    <span class="mode-context-trigger" dropdown-toggle>\n        <svg class="iconic">\n            <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n        </svg>\n        <span class="label hidden" translate>app.show_more_less</span>\n    </span>\n\n    <div class="mode-context-body">\n        <p markdown-to-html="nav.site.description"></p>\n\n        \x3c!-- <saved-search-create></saved-search-create> --\x3e\n        <mode-context-form-filter></mode-context-form-filter>\n    </div>\n</div>\n'},function(e,exports){e.exports='<div class="postcard-field" ng-show="media">\n\t<img ng-if="hasCaption" ng-src="{{ media.original_file_url }}" alt="{{ media.caption }}" class="postcard-image">\n\t<img ng-if="!hasCaption" ng-src="{{ media.original_file_url }}" class="postcard-image">\n</div>\n\n'},function(e,exports){e.exports='<div class="toolbar">\n    \x3c!-- toolbar --\x3e\n\n    \x3c!-- floating action button --\x3e\n    <add-post-button></add-post-button>\n\n    <filter-posts filters="filters" embed-only="false" on-open="hideOtherActions()" on-close="showOtherActions()"></filter-posts>\n\n    <div class="button-group" embed-only="false" ng-hide="filtersActive">\n        <div ng-if="!editMode()">\n            <post-share filters="filters" button="true"></post-share>\n            <button ng-if="editEnabled()" class="button button-alpha" ng-click="setEditMode()" translate>app.edit</button>\n        </div>\n\n        <div ng-if="editMode()">\n            <button ng-if="hasPermission" class="button" ng-click="cancel()" translate>app.cancel</button>\n            <button ng-if="hasPermission && !isSaving()" ng-click="savePost()" class=" button button-alpha" translate>app.save</button>\n            <loading-dots button-class="\'button-alpha\'" disabled=true label="\'app.saving\'" ng-if="isSaving()"></loading-dots>\n        </div>\n    </div>\n\n    <filter-by-survey></filter-by-survey>\n    <div class="button-group hide-until-medium" embed-only="true" ng-hide="filtersActive">\n        <div ng-if="!editMode()">\n            <post-share filters="filters" button="true"></post-share>\n            <button ng-if="editEnabled()" class="button button-alpha" ng-click="setEditMode()" translate>app.edit</button>\n        </div>\n\n        <div ng-if="editMode()">\n            <button ng-if="hasPermission" class="button" ng-click="cancel()" translate>app.cancel</button>\n             <button ng-if="hasPermission && !isSaving()" ng-click="savePost()" class=" button button-alpha" translate>app.save</button>\n            <loading-dots button-class="\'button-alpha\'" disabled=true label="\'app.saving\'" ng-if="isSaving()"></loading-dots>\n        </div>\n    </div>\n\n    \x3c!-- toolbar --\x3e\n    <div class="progress-bar" ng-show="isLoading()">\n        <span>\n            ..\n        </span>\n    </div>\n</div>\n'},function(e,exports,t){e.exports='<main role="main">\n<div class="flex-container">\n    <layout-class layout="d"></layout-class>\n    <post-toolbar selected-post="selectedPost.post" filters="filters"></post-toolbar>\n    <div id="post-data-view-top" class="timeline-col" ng-class="{\'toolbar-active\': bulkActionsSelected, \'active\' : activeCol === \'timeline\' }">\n        <div class="load-more"  ng-show="newPostsCount > 0">\n            <button class="button-flat button-gamma full-width" ng-click="addNewestPosts()">\n                <span ng-switch on="newPostsCount">\n                    <span ng-switch-default translate="post.see_more_plural" translate-values="{ newPostsCount }">See new posts</span>\n                    <span ng-switch-when="1" translate="post.see_more_singular" translate-values="{ newPostsCount }">See new post</span>\n                </span>\n            </button>\n        </div>\n        <listing-toolbar\n            entities="posts"\n            selected-set="selectedPosts"\n          >\n              \x3c!-- status bulk actions --\x3e\n              <span dropdown ng-if="userHasBulkActionPermissions()">\n                <button class="button-beta init" data-toggle="toggle-content" dropdown-toggle>\n                  <span class="button-label" translate="app.mark_as">Mark as</span>\n                  <svg class="iconic">\n                    <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n                  </svg>\n                </button>\n                <ul class="dropdown-menu toggle-content init" dropdown-menu unpositioned="true">\n                  <li ng-repeat="status in statuses">\n                    <a ng-click="changeStatus(status)">\n                      <svg class="iconic">\n                        <use xlink:href="'+t(0)+'#globe" ng-if="status==\'published\'"></use>\n                        <use xlink:href="'+t(0)+'#document" ng-if="status==\'draft\'"></use>\n                        <use xlink:href="'+t(0)+'#box" ng-if="status==\'archived\'"></use>\n                      </svg>\n                      <span class="label" translate="post.published" ng-if="status == \'published\'">Published</span>\n                      <span class="label" translate="post.draft" ng-if="status == \'draft\'">Under review</span>\n                      <span class="label" translate="post.archived" ng-if="status == \'archived\'">Archive</span>\n                    </a>\n                  </li>\n                </ul>\n              </span>\n\n              <collection-toggle-button selected-posts="selectedPosts" posts="posts" on-done="clearSelectedPosts()"></collection-toggle-button>\n              <button type="button" class="button-destructive" ng-click="deletePosts()" ng-if="userHasBulkActionPermissions()">\n                <svg class="iconic">\n                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                </svg>\n                <span class="button-label hidden">nav.delete</span>\n              </button>\n\n              <button href="" ng-click="closeBulkActions()" class="button-link toolbar-close-button">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#x"></use>\n                </svg>\n                <span class="hidden">Close</span>\n            </button>\n\n        </listing-toolbar>\n        <div class="listing timeline init">\n\n        <div class="bulk-action" ng-if="posts.length > 0 || !isLoading()">\n            <div class="bulk-action-primary">{{posts.length}} of {{totalItems}} reports</div>\n            <button id="bulk-action" class="button-link bulk-action-secondary" ng-click="selectBulkActions()" ng-if="$root.loggedin">Bulk Actions</button>\n        </div>\n            <post-card\n                ng-repeat="post in posts"\n                can-select="bulkActionsSelected"\n                post="post"\n                selected-posts="selectedPosts"\n                click-action="showPost"\n                selected-post="selectedPost"\n            >\n            </post-card>\n            <div class="listing-item" ng-if="posts.length == 0 && hasFilters() && !isLoading()">\n                <h4 translate>post.no_search_results</h4>\n            </div>\n\n            <div class="listing-item" ng-if="posts.length == 0 && !hasFilters() && !isLoading()">\n                <h4 translate>post.no_posts_yet</h4>\n            </div>\n\n            <div class="listing-item" ng-if="posts.length > 0 || isLoading()">\n\n                <div class="listing-item-primary">\n                    <button ng-disabled="isLoading()" ng-hide="( isLoading() || posts.length >= totalItems)" class="button-gamma button-flat" ng-click="loadMore()" translate="app.load_more">Load more\n                    </button>\n                     <loading-dots button-class="\'button-gamma button-flat\'" label="\'app.loading\'" ng-show="isLoading()"></loading-dots>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="post-col" ng-class="{\'active\' : activeCol === \'post\' }">\n        \x3c!-- Verify if we need all these bindings ie. parentForm savingPost --\x3e\n        <div ui-view filters="filters" is-loading="isLoading" saving-post="savingPost"></post-detail-data>\n    </div>\n</div>\n<ush-logo></ush-logo>\n</main>\n'},function(e,exports){e.exports='<div>\n    <layout-class layout="a"></layout-class>\n    <div ui-view="mode-context" noanimation="true" filters="filters"></div>\n    <main role="main">\n\t\t<post-toolbar is-loading="isLoading" filters="filters" edit-mode="{ editing: false }"></post-toolbar>\n    \t<div class="map-view">\n\t\t    <div id="map-full-size" class="map full-size" ng-show="!noui"></div>\n\t\t    <div id="map-noui" class="map map-only" ng-show="noui"></div>\n\t\t</div>\n\t</main>\n</div>\n'},function(e,exports){e.exports='<main role="main">\n    <post-view-map noui=true filters="filters" is-loading="{state:true}"></post-view-map>\n    <ush-logo></ush-logo>\n</main>'},function(e,exports){e.exports='<div class="main-col">\n    <span translate translate-values="{value: \'{{view}}\'}">\n        feature_limits.view_unavailable\n    </span>\n    <p><a class="button" href="/settings/plan" translate>limit.upgrade</a></p>\n</div>\n'},function(e,exports){e.exports='<a ng-click="exportPostsConfirmation()" translate="app.export_to_csv">Export to CSV</a>\n'},function(e,exports,t){e.exports='<a ng-class="{ \'button\' : isButton(), \'button-flat\': isAdd()}" ng-click="openShareMenu()">\n\t\t<div class="loading" ng-if="loading">\n\t\t\t<div class="line"></div>\n\t\t\t<div class="line"></div>\n\t\t\t<div class="line"></div>\n\t\t</div>\n    <svg class="iconic" ng-hide="loading">\n      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#share"></use>\n    </svg>\n\t<span ng-class="{\'button-label\': isButton(), \'label\': !isButton()}" translate="app.share">\n\t\t\tShare {{isButton()}}\n\t</span>\n</a>\n'},function(e,exports){e.exports='<div class="modal-body">\n    <share-menu post-id="postId" filters="filters"></share-menu>\n</div>\n'},function(e,exports,t){e.exports='<form class="panel-body" name="form" ng-submit="submit()">\n    <div class="form-field" ng-show="surveyId">\n        <label translate="app.survey_web_address">Your survey\'s web address</label>\n        <input type="url" value="{{shareUrl}}" readonly="">\n    </div>\n    <div class="listing init">\n\n        <div class="listing-item">\n            <div class="listing-item-primary">\n                <div class="listing-item-image">\n                    <img class="icon" src="'+t(945)+'" alt="">\n                </div>\n                <h2 class="listing-item-title">\n                  <div class="fb-share-button"\n                    data-href="{{shareUrl}}"\n                    data-layout="button_count"\n                    data-size="large"\n                    data-mobile-iframe="true">\n                      <a class="fb-xfbml-parse-ignore"\n                        target="_blank"\n                        ng-href="https://www.facebook.com/sharer/sharer.php?u={{shareUrlEncoded}}&amp;src=sdkpreparse">\n                          Facebook\n                      </a>\n                  </div>\n                </h2>\n            </div>\n        </div>\n\n        <div class="listing-item">\n            <div class="listing-item-primary">\n                <div class="listing-item-image">\n                    <img class="icon" src="'+t(946)+'" alt="">\n                </div>\n                <h2 class="listing-item-title"><a ng-href="https://twitter.com/home?status={{shareUrlEncoded}}">Twitter</a></h2>\n            </div>\n        </div>\n\n        <div class="listing-item" dropdown auto-close="disabled">\n          <div dropdown-toggle>\n            <div class="listing-item-secondary">\n                <button type="button" class="button-link listing-item-toggle">\n                    <svg class="iconic">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n                    </svg>\n                    <span class="button-label">Configure</span>\n                </button>\n            </div>\n\n            <div class="listing-item-primary">\n                <div class="listing-item-image">\n                  <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#code"></use>\n                  </svg>\n                </div>\n                <h2 class="listing-item-title listing-item-toggle">Embed</h2>\n            </div>\n          </div>\n\n            <div class="listing-item-body" dropdown-menu>\n              <div class="form-field">\n                  <label>HTML</label>\n                  <textarea>&lt;iframe width="560" height="315" src="{{shareUrl}}" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</textarea>\n              </div>\n          </div>\n      </div>\n\n      <div class="listing-item" ng-show="isExportable()">\n          <div class="listing-item-primary">\n              <div class="listing-item-image">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#external-link"></use>\n                </svg>\n              </div>\n              <h2 class="listing-item-title">\n                <post-export filters="filters"></post-export>\n              </h2>\n          </div>\n      </div>\n  </div>\n</form>\n'},function(e,exports,t){e.exports='<div ui-view>\n\t<layout-class layout="b"></layout-class>\n    <div class="mode-context init" dropdown>\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a ui-sref="settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.categories</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n    <main role="main">\n\n        \x3c!-- toolbar --\x3e\n        <div class="toolbar">\n            <div class="fab">\n                <a ui-sref="settings.categories.create" type="button" class="button button-alpha button-fab" ng-class="{\'disabled\': selectedCategories.length}">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                    </svg>\n                    <span class="hidden" translate>category.add_category</span>\n                </a>\n            </div>\n        </div>\n        \x3c!-- end toolbar --\x3e\n\n        <div class="main-col">\n\n            <div class="listing card" ng-class="{\'toolbar-active\': selectedCategories.length}">\n                <div class="alert" ng-hide="categories.length">\n                    <p ng-hide="categories.length"><em translate>empty.category</em></p>\n                </div>\n\n                <div id="category-{{category.id}}" class="listing-item" ng-repeat="category in categories" ng-class="{ \'warning\': isToggled(category) }">\n\n                    <div class="listing-item-select" ng-click="toggleCategory(category)">\n                        <input type="checkbox" value="{{category.id}}" ng-checked="isToggled(category)"></input>\n                    </div>\n\n                    <div class="listing-item-primary">\n                        <h2 class="listing-item-title"><a ui-sref="settings.categories.edit({id: category.id})">{{category.tag}}</a></h2>\n                    </div>\n                    <div class="listing-item-secondary">\n                        <button class="button-beta button-flat" ng-click="deleteCategory(category)">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                            </svg>\n                            <span class="hidden">Delete</span>\n                        </button>\n                    </div>\n\n                    <div id="category-{{child.id}}" class="listing-item" ng-repeat="child in category.children" ng-class="{ \'warning\': isToggled(child) }" ng-click="toggleCategory(child)" ng-style="{\'marginLeft\': \'50px\', \'border\': \'none\'}" ng-if="category.children">\n\n                        <div class="listing-item-select">\n                            <input type="checkbox" value="{{child.id}}" ng-checked="isToggled(child)">\n                        </div>\n\n                        <div class="listing-item-primary">\n                            <h2 class="listing-item-title"><a ui-sref="settings.categories.edit({id: child.id})">{{child.tag}}</a></h2>\n                        </div>\n                        <div class="listing-item-secondary">\n                            <button class="button-beta button-flat" ng-click="deleteCategory(child)">\n                                <svg class="iconic">\n                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                                </svg>\n                                <span class="hidden">Delete</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <listing-toolbar entities="allCategories" selected-set="selectedCategories">\n                    <button type="button" class="button-destructive" ng-disabled="!selectedCategories.length" ng-click="deleteCategories()">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                        </svg>\n                        <span class="button-label hidden">nav.delete</span>\n                    </button>\n                </listing-toolbar>\n            </div>\n            \x3c!--\n            @FIXME\n            I don\'t know if we actually need pagination here. Since we didn\'t use to have a working pagination, I\'m commenting out for the moment.\n             Opening a ticket for this and if it turns out we don\'t need it I\'ll just delete this code.\n            so I can send the PR for users which do need pagination\n            <uib-pagination ng-model="currentPage" items-per-page="itemsPerPage" total-items="totalItems" ng-change="pageChanged()" max-size="5" boundary-links="false" rotate="false"></uib-pagination>\n            !--\x3e\n       </div>\n   </main>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n\n       <header class="mode-context-header">\n           <ol class="breadcrumbs">\n               <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n               <li><a href="/settings" translate>app.settings</a></li>\n           </ol>\n           <h1 class="mode-context-title" translate>app.import</h1>\n       </header>\n\n       <span class="mode-context-trigger" dropdown-toggle>\n           <svg class="iconic">\n               <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n           </svg>\n           <span class="label hidden" translate>app.show_more_less</span>\n       </span>\n   </div>\n    <main role="main">\n\n        <div class="main-col" after-import-csv>\n\n          <div class="form-sheet" ng-show="!importComplete">\n              <div class="form-sheet-summary">\n                  <h2 class="form-sheet-title" translate="data_import.nearly_complete">Your import is nearly complete</h2>\n                  <progress max="100" value="60">\n                      \x3c!--// Fallback for browsers that don\'t support progress element //--\x3e\n                      <div class="progress-bar">\n                          <span style="width: 60%;">Progress: 60%</span>\n                      </div>\n                  </progress>\n                  <p translate="data_import.finish_info">The data from your CSV spreadsheet is still being processed. You\'re welcome to leave this page or wait until the process is complete. Either way, we\'ll notify you when your data is ready.</p>\n              </div>\n\n              <div class="form-field">\n                  <a href="/settings/data-import" class="button button-gamma button-flat" translate="data_import.import_another">Import another CSV file</a>\n              </div>\n          </div>\n\n          <div class="form-sheet" ng-show="importComplete">\n              <div class="form-sheet-summary">\n                  <h2 class="form-sheet-title" translate="data_import.import_complete">Your import is complete</h2>\n                  <p translate-values="{form_name: form.name, form_id: form.id, filename: filename}" translate="data_import.complete_info">The data from your CSV spreadsheet, <em>filename.csv</em>, was successfully imported into your <a href="">Street Maintenance</a> survey.</p>\n              </div>\n\n              <div class="form-field">\n                  <a ng-href="/collections/{{collectionId}}" class="button button-alpha" translate="data_import.see_imported_posts">See imported posts</a>\n                  <a href="/settings/data-import" class="button button-gamma button-flat" translate="data_import.import_another_csv">Import another CSV file</a>\n              </div>\n         </div>\n\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n\n       <header class="mode-context-header">\n           <ol class="breadcrumbs">\n               <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n               <li><a href="/settings" translate>app.settings</a></li>\n           </ol>\n           <h1 class="mode-context-title" translate>app.import</h1>\n       </header>\n\n       <span class="mode-context-trigger" dropdown-toggle>\n           <svg class="iconic">\n               <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n           </svg>\n           <span class="label hidden" translate>app.show_more_less</span>\n       </span>\n   </div>\n\n    <main role="main">\n\n        <div class="main-col" importer-csv>\n          <div class="alert" translate="feature_limits.view_unavailable" translate-values="{value: \'Bulk data import\'}" ng-show="!csvEnabled">\n          </div>\n          <form name="upload" ng-show="csvEnabled">\n            <div class="form-sheet">\n                <div class="form-sheet-summary">\n                    <h2 class="form-sheet-title" translate="data_import.csv">CSV</h2>\n                    <p translate="data_import.import_explanation_csv">Import the data from a CSV spreadsheet into your deployment as posts belonging to a specific survey.</p>\n                </div>\n\n                <div class="stepper">\n\n                    <div class="stepper-item" ng-class="{\'complete\': stepOneComplete, \'active\' : isActiveStep(1), \'disabled\' : !isActiveStep(1) }">\n                        <h2 class="stepper-heading">\n                            <span class="stepper-badge" ng-show="!stepOneComplete">1</span>\n                            <span class="stepper-badge" ng-show="stepOneComplete">\n                                <svg class="iconic">\n                                    <use xlink:href="'+t(0)+'#check"></use>\n                                </svg>\n                            </span>\n                            <div translate="data_import.choose_csv_file">\n                              Choose CSV file\n                            </div>\n                        </h2>\n                        <div ng-show="!stepOneComplete">\n                            <div class="form-field">\n                              <file-upload container="fileContainer" required>\n                              </file-upload>\n                            </div>\n\n                            <fieldset class="custom-fieldset init" dropdown auto-close="outsideClick">\n                                <legend data-toggle="dropdown-menu" class="dropdown-trigger init" dropdown-toggle>\n                                  <span class="legend-label">\n                                    <span tranlate="data_import.import_to">\n                                      Import to\n                                    </span>\n                                    <span class="custom-fieldset-value" ng-show="!selectedForm.id" translate="data_import.which_survey">\n                                      which survey?\n                                    </span>\n                                    <span class="custom-fieldset-value">\n                                      {{selectedForm.name}}\n                                    </span>\n                                  </span>\n                                  <svg class="iconic chevron">\n                                    <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n                                  </svg>\n                                </legend>\n\n                                <div class="dropdown-menu init" dropdown-menu>\n                                  <div class="form-field radio" ng-repeat="form in forms" ng-class="{\'checked\' : isSelectedForm(form)}" ng-click="setSelectedForm(form)">\n                                    <label for="import-to-{{form.id}}">\n                                        <input id="import-to-{{form.id}}" name="import-to" type="radio">\n                                        {{form.name}}\n                                    </label>\n                                  </div>\n                                </div>\n                            </fieldset>\n\n                            <div class="form-field">\n                                <button class="button-alpha" type="submit" ng-disabled="upload.$invalid" ng-click="completeStepOne()" translate="settings.continue">Continue</button>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="stepper-item" ng-class="{\'complete\': stepTwoComplete, \'active\' : isActiveStep(2), \'disabled\' : !isActiveStep(2) }">\n                        <h2 class="stepper-heading">\n                            <span class="stepper-badge">2</span>\n                            <span translate="data_import.configure_imported_posts">\n                              Configure imported posts\n                            </span>\n                        </h2>\n                        <div ng-show="stepOneComplete">\n                          <ol class="metadata">\n                              <li>{{fileContainer.file.name}}</li>\n                              <li>{{selectedForm.name}}</li>\n                          </ol>\n\n                          <fieldset>\n                              <legend translate="data_import.imported_posts_status">Imported posts should have their status...</legend>\n                              <div class="form-field radio">\n                                <label for="status-model-mark">\n                                  <input type="radio" id="status-model-mark" name="status-model" ng-model="statusOption" value="mark_as"/>\n                                  <span translate="data_import.marked_as">Marked as...</span>\n                                </label>\n                                <fieldset data-fieldgroup-target="status-model-mark" ng-show="isStatusOption(\'mark_as\')">\n                                  <legend class="hidden">Post status</legend>\n                                    <div class="form-field radio icon-input" ng-class="{\'checked\' : isStatusSelected(\'published\')}">\n                                      <label for="status-published" ng-click="setStatus(\'published\')">\n                                          <svg class="iconic">\n                                              <use xlink:href="'+t(0)+'#globe"></use>\n                                          </svg>\n                                          <input type="radio" name="status" id="status-published" checked data-fieldgroup-toggle="status-model-mark-published" />\n                                          <span translate="post.published">Published</span>\n                                      </label>\n\n                                      \x3c!--// IF the chosen survey has tasks that must be completed before its posts can be published //--\x3e\n                                      <p ng-show="hasRequiredTask" class="alert" data-fieldgroup-target="status-model-mark-published">Your survey, <strong>{{selectedForm.name}}</strong>, includes tasks that typically must be completed for each post before they can be marked \'published.\' During this import, all of your imported posts will have their tasks marked as \'incomplete\', while still allowing their status to be marked as \'published.\' If you edit any of these posts after they\'ve been imported, however, you\'ll be asked to complete those tasks before re-publishing them.</p>\n                                      \x3c!--// END IF //--\x3e\n                                  </div>\n\n                                  <div class="form-field radio icon-input" ng-class="{\'checked\' : isStatusSelected(\'draft\')}">\n                                      <label for="status-review" ng-click="setStatus(\'draft\')">\n                                          <svg class="iconic">\n                                              <use xlink:href="'+t(0)+'#document"></use>\n                                          </svg>\n                                          <input type="radio" name="status" id="status-review" />\n                                          <span translate="post.draft">Under review</span>\n                                      </label>\n                                  </div>\n\n                                  <div class="form-field radio icon-input" ng-class="{\'checked\' : isStatusSelected(\'archived\')}">\n                                      <label for="status-archive" ng-click="setStatus(\'archived\')">\n                                          <svg class="iconic">\n                                              <use xlink:href="'+t(0)+'#box"></use>\n                                          </svg>\n                                          <input type="radio" name="status" id="status-archive"/>\n                                          <span translate="post.archived">Archived</span>\n                                      </label>\n                                  </div>\n                                </fieldset>\n                              </div>\n\n                              <div class="form-field radio">\n                                <label for="status-model-columns" >\n                                    <input type="radio" id="status-model-columns" name="status-model" data-fieldgroup-toggle="status-model-columns" ng-model="statusOption" value="defined_column"/>\n                                    <span translate="data_import.defined_column">Defined by a column in your CSV file...</span>\n                                </label>\n\n                                <div class="form-field select" data-fieldgroup-target="status-model-columns" ng-show="isStatusOption(\'defined_column\')">\n                                    <div class="custom-select">\n                                      <select ng-model="selectedStatus">\n                                         <option ng-repeat="column in csv.columns track by $index" value="{{$index}}" label="{{column}}" >\n                                      </select>\n                                    </div>\n                                    <p><em translate="data_import.status_explanation">Ushahidi recognizes one of three post statuses: Published, Under review, and Archived. So be sure that each entry in the column you select has one of those three values.</em></p>\n\n                                    \x3c!--// IF the chosen survey has tasks that must be completed before its posts can be published //--\x3e\n                                    <p class="alert" data-fieldgroup-target="status-model-mark-published">Your survey, <strong>{{selectedForm.name}}</strong>, includes tasks that typically must be completed for each post before they can be marked \'published.\' During this import, all of your imported posts will have their tasks marked as \'incomplete\', even if their status is marked as \'published.\' If you edit any of these posts after they\'ve been imported, however, you\'ll be asked to complete those tasks before re-publishing them.</p>\n                                    \x3c!--// END IF //--\x3e\n                                </div>\n                              </div>\n                      </fieldset>\n\n                      <fieldset>\n                          <legend translate="data_import.choose_which_column">Choose which CSV column should be assigned to each survey field</legend>\n                          <p translate="data_import.each_survey_field">Each of the survey\'s fields are listed below. Choose the column from your CSV file that you\'d like to use to populate each of those fields.</p>\n\n                          <table>\n                              <thead>\n                                  <tr>\n                                      <th translate="data_import.survey_field">Survey field</th>\n                                      <th translate="data_import.csv_column">CSV column</th>\n                                  </tr>\n                              </thead>\n\n                              <tbody>\n                                  <tr ng-repeat="attribute in selectedForm.attributes">\n                                      <td><span ng-class="{\'required\' : attribute.required}">{{attribute.label}}</span></td>\n                                      <td>\n                                          <div class="custom-select">\n                                              <select ng-model="maps_to[attribute.key]">\n                                                <option selected="selected" value="" translate="data_import.leave_empty">\n                                                    Leave empty\n                                                </option>\n                                                 <option ng-repeat="column in csv.columns track by $index" value="{{$index}}" label="{{column}}" >\n                                              </select>\n                                          </div>\n                                      </td>\n                                  </tr>\n                              </tbody>\n                            </table>\n\n                          </fieldset>\n                          <div class="form-field">\n                            <button class="button-beta button-flat" data-accordion-trigger="0" ng-click="cancelImport()" translate="data_import.cancel_import">Cancel</button>\n                            <button type="submit" class="button-alpha" ng-click="completeStepTwo(csv)" translate="data_import.finish_import">Finish import</button>\n                          </div>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n          </form>\n        </div>\n    </main>\n</div>\n'},function(e,exports){e.exports='<p translate-values="{processed: processed, errors: errors}"translate="notify.data_import.csv_import_processed_errors">\n  <strong>Your CSV import</strong> is complete. {{processed}} records imported, {{errors}} records failed.\n</p>\n<p translate-values="{from_name: form_name, filename: filename}" translate="notify.data_import.csv_import_success_info">\n  The data from your CSV spreadsheet, <em>{{filename}}</em>, was successfully imported into your <a ui-sref="posts.data">{{form_name}}</a> survey.\n</p>\n<a class="button button-alpha" ng-click="close()" ng-href="/collections/{{collectionId}}" translate="notify.data_import.see_imported_posts">See imported posts</a>\n<a ng-click="close()" ui-sref="settings.dataImport" class="button button-gamma button-flat" translate="data_import.import_another_csv">Import another CSV file</a>\n<button class="button-flat message-trigger" ng-click="close()" translate="message.button.dismiss">\n    Dismiss\n</button>\n'},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n            <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.data_sources</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        <div class="main-col">\n\n            <div class="alert">\n                <p><em translate>settings.data_sources.hint_turn_on_off</em></p>\n            </div>\n\n            <div class="listing card">\n\n                \x3c!-- TODO: fix active class toggle --\x3e\n                <div class="listing-item active" ng-repeat="provider in providers.results | orderBy:\'name\'" is-open="panelVisible[provider.id]"  dropdown auto-close="disabled" ng-if="available_providers[provider.id]">\n\n                    <div class="listing-item-secondary">\n                        <button type="button" class="button-beta button-flat listing-item-toggle" dropdown-toggle>\n                            <svg class="iconic">\n                              <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n                            </svg>\n                            <span class="button-label" translate>settings.data_sources.configure</span>\n                        </button>\n                    </div>\n\n                    <div class="listing-item-primary">\n                        <h2 class="listing-item-title">\n                            {{provider.name}}\n                            <span class="status-indicator" ng-class="{ \'green\' : available_providers[provider.id] && settings.providers[provider.id] }"></span>\n                        </h2>\n                    </div>\n\n                    <div class="listing-item-body" dropdown-menu>\n\n                        <div class="alert error" ng-if="forms[provider.id].$invalid">\n                            <p translate>settings.data_sources.hint_plugin_needs_configuring</p>\n                        </div>\n\n                        <div class="alert" ng-if="!available_providers[provider.id]">\n                            <p translate translate-values="{value: \'{{provider.name}}\'}">\n                                settings.data_sources.unavailable\n                            </p>\n                        </div>\n\n                        <form name="forms.{{provider.id}}" ng-submit="saveProviderSettings(provider.id)" ng-if="available_providers[provider.id]">\n\n                            <div class="form-field switch" ng-if="forms[provider.id].$valid">\n                                <label translate>settings.data_sources.enable_provider_message</label>\n                                <div class="toggle-switch">\n                                    <input class="tgl" id="{{provider.id}}_enable" type="checkbox" ng-model="settings.providers[provider.id]" ng-change="saveProviderSettings(provider.id)">\n                                    <label class="tgl-btn" for="{{provider.id}}_enable"></label>\n                               </div>\n                            </div>\n\n                            <div ng-repeat="(option_key, option) in provider.options track by option_key" ng-class="{ error : formsSubmitted[provider.id] && forms[provider.id][option_key].$invalid, \'form-field\' : option.input !== \'radio\', \'required\' : option.rules.indexOf(\'required\') > -1 }">\n\n                                <div class="" ng-if="option.input == \'read-only-text\'">\n                                    <label ng-if="option.label" class="input-label">{{option.label}}</label>\n                                    <p ng-bind-html="option.description"></p>\n                                </div>\n\n                                <div class="form-field" ng-if="option.input == \'text\'">\n                                    <label ng-if="option.label">\n                                        {{option.label}}\n                                    </label>\n\n                                    <p ng-if="option.description">\n                                        {{option.description}}\n                                    </p>\n\n                                    <input ng-if="option.rules.indexOf(\'number\') > -1" id="{{provider.id}}_{{option_key}}" name="{{option_key}}" type="number" ng-pattern="/^\\d+$/" ng-model="settings[provider.id][option_key]" ng-required="option.rules.indexOf(\'required\') > -1" ng-disabled="saving" ng-class="{error:formsSubmitted[provider.id] && forms[provider.id][option_key].$invalid}">\n                                    <input ng-if="option.rules.indexOf(\'email\') > -1" id="{{provider.id}}_{{option_key}}" name="{{option_key}}" type="email" ng-pattern="/^[a-z]+[a-z0-9._]+@[a-z]+\\.[a-z.]{2,5}$/" ng-model="settings[provider.id][option_key]" ng-required="option.rules.indexOf(\'required\') > -1" ng-disabled="saving" ng-class="{error:formsSubmitted[provider.id] && forms[provider.id][option_key].$invalid}">\n                                    <input ng-if="option.rules.indexOf(\'password\') > -1" id="{{provider.id}}_{{option_key}}" name="{{option_key}}" type="password" ng-model="settings[provider.id][option_key]" ng-required="option.rules.indexOf(\'required\') > -1" ng-disabled="saving" ng-class="{error:formsSubmitted[provider.id] && forms[provider.id][option_key].$invalid}">\n                                    <input ng-if="option.rules.indexOf(\'number\') == -1 && option.rules.indexOf(\'email\') == -1 && option.rules.indexOf(\'password\') == -1" id="{{provider.id}}_{{option_key}}" name="{{option_key}}" type="{{option.input}}" ng-model="settings[provider.id][option_key]" ng-required="option.rules.indexOf(\'required\') > -1" ng-disabled="saving" ng-class="{error:formsSubmitted[provider.id] && forms[provider.id][option_key].$invalid}">\n                                </div>\n\n                                <fieldset ng-if="option.input == \'radio\'">\n                                    <label ng-if="option.label">\n                                        {{option.label}}\n                                    </label>\n\n                                    <p ng-if="option.description">\n                                        {{option.description}}\n                                    </p>\n\n                                    <div class="form-field radio" ng-repeat="radio_option in option.options track by $index">\n                                        <label for="{{provider.id}}_{{option_key}}_{{$index}}">\n                                            <input id="{{provider.id}}_{{option_key}}_{{$index}}" type="{{option.input}}" name="{{option_key}}" ng-value="radio_option" ng-model="settings[provider.id][option_key]" ng-required="option.rules.indexOf(\'required\') > -1" ng-disabled="saving">{{radio_option}}\n                                        </label>\n                                    </div>\n                                </fieldset>\n\n                                <div class="alert error" ng-if="formsSubmitted[provider.id] && forms[provider.id][option_key].$invalid">\n                                    <p translate>settings.generic_field_error</p>\n                                </div>\n\n                            </div>\n\n                            <button type="submit" class="button-alpha">\n                                <div class="loading" ng-show="saving">\n                                    <div class="line"></div>\n                                    <div class="line"></div>\n                                    <div class="line"></div>\n                                </div>\n                                <span ng-hide="saving" translate>app.save</span>\n                            </button>\n\n                        </form>\n\n                    </div>\n\n                </div>\n\n            </div>\n\n        </div>\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.plans</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        <div class="full-col">\n\n            <div class="tiers">\n\n                <div class="tier" ng-if="specialPlan == \'free-pre-jun-2016\'">\n                    <div class="tier-header">\n                        <h2 class="tier-name">Mapper (Legacy)</h2>\n                        <p>This is a legacy plan, you can upgrade any time.</p>\n\n                        <strong class="tier-price">Free</strong>\n                    </div>\n\n                    <div class="tier-action">\n                        <a class="button button-alpha" disabled>&check; Subscribed</a>\n                    </div>\n\n                    <div class="tier-feature-list">\n                        <ul>\n                            <li><strong>Unlimited</strong> posts</li>\n                            <li><strong>1</strong> survey</li>\n                            <li><strong>1</strong> user</li>\n                            <li><strong>Web, email, SMS, &amp; Twitter</strong> <br />data collection</li>\n                            <li><strong>Map &amp; timeline</strong> <br />data visualization</li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="tier" ng-if="!specialPlan">\n                    <div class="tier-header">\n                        <h2 class="tier-name">Mapper</h2>\n                        <p>Put your cause on the map</p>\n\n                        <strong class="tier-price">Free</strong>\n                    </div>\n\n                    <div class="tier-action">\n                        <a class="button button-alpha" ng-show="tier == \'free\'" disabled>&check; Subscribed</a>\n                        <a href="//{{ cloudDomain }}/settings/login?subdomain={{ subdomain }}&username={{ username }}&tier=free" class="button button-alpha" ng-hide="tier == \'free\'">Choose Mapper</a>\n                    </div>\n\n                    <div class="tier-feature-list">\n                        <ul>\n                            <li><strong>Unlimited</strong> posts</li>\n                            <li><strong>1</strong> survey</li>\n                            <li><strong>1</strong> user</li>\n                            <li><strong>Web &amp; email</strong> <br />data collection</li>\n                            <li><strong>Map &amp; timeline</strong> <br />data visualization</li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="tier">\n                    <div class="tier-header">\n                        <h2 class="tier-name">Surveyor</h2>\n                        <p>Collect and monitor data</p>\n\n                        <strong class="tier-price">$99\n                            <em>/mo</em>\n                        </strong>\n                    </div>\n\n                    <div class="tier-action">\n                        <a href="//{{ cloudDomain }}/settings/login?subdomain={{ subdomain }}&username={{ username }}&tier=surveyor" class="button button-alpha" ng-show="tier == \'surveyor\'"  disabled>&check; Subscribed</a>\n                        <a href="//{{ cloudDomain }}/settings/login?subdomain={{ subdomain }}&username={{ username }}&tier=surveyor" class="button button-alpha" ng-hide="tier == \'surveyor\'" data-modal="payment">Choose Surveyor</a>\n                    </div>\n\n                    <div class="tier-feature-list">\n                        <ul>\n                            <li><strong>Unlimited</strong> posts</li>\n                            <li><strong>Unlimited</strong> surveys</li>\n                            <li><strong>5</strong> users <em>+ $10/mo per additional user</em></li>\n                            <li><strong>Web, email, SMS, &amp; Twitter</strong> <br />data collection</li>\n                            <li><strong>Map, timeline, bar chart, &amp; line chart</strong> <br />data visualization</li>\n                            <li><strong>Import &amp; Export</strong> data</li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="tier">\n                    <div class="tier-header">\n                        <h2 class="tier-name">Responder</h2>\n                        <p>Respond to real-time incidents as a team</p>\n\n                        <strong class="tier-price">$499\n                            <em>/mo</em>\n                        </strong>\n                    </div>\n\n                    <div class="tier-action">\n                        <a href="//{{ cloudDomain }}/settings/login?subdomain={{ subdomain }}&username={{ username }}&tier=responder" class="button button-alpha" ng-show="tier == \'responder\'" disabled>&check; Subscribed</a>\n                        <a ng-hide="tier == \'responder\'" class="button button-alpha" href="//{{ cloudDomain }}/settings/login?subdomain={{ subdomain }}&username={{ username }}&tier=responder">Choose Responder</a>\n                    </div>\n\n                    <div class="tier-feature-list">\n                        <ul>\n                            <li><strong>Unlimited</strong> posts</li>\n                            <li><strong>Unlimited</strong> surveys</li>\n                            <li><strong>25</strong> users <em>+ $10/mo per additional user</em></li>\n                            <li><strong>Web, email, SMS, &amp; Twitter</strong> <br />data collection</li>\n                            <li><strong>Map, timeline, bar chart, &amp; line chart</strong> <br />data visualization</li>\n                            <li><strong>Import &amp; Export</strong> data</li>\n                            <li><strong>Custom roles</strong> and permissions</li>\n                            <li><strong>Private</strong> deployments</li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="tier" ng-if="specialPlan == \'zerorated\'">\n                    <div class="tier-header">\n                        <h2 class="tier-name">Social Impact</h2>\n                        <p>Grassroots organizations, individuals and community groups with a mission</p>\n\n                        <strong class="tier-price">Free</strong>\n                    </div>\n\n                    <div class="tier-action">\n                        <a class="button button-alpha" disabled>&check; Subscribed</a>\n                    </div>\n\n                    <div class="tier-feature-list">\n                        <ul>\n                            <li><strong>Unlimited</strong> posts</li>\n                            <li><strong>Unlimited</strong> surveys</li>\n                            <li><strong>25</strong> users</li>\n                            <li><strong>Web, email, SMS, &amp; Twitter</strong> <br />data collection</li>\n                            <li><strong>Map, timeline, bar chart, &amp; line chart</strong> <br />data visualization</li>\n                            <li><strong>Import &amp; Export</strong> data</li>\n                            <li><strong>Custom roles</strong> and permissions</li>\n                            <li><strong>Private</strong> deployments</li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="tier" ng-if="specialPlan == \'zerorated-surveyor\'">\n                    <div class="tier-header">\n                        <h2 class="tier-name">Social Impact</h2>\n                        <p>Grassroots organizations, individuals and community groups with a mission</p>\n\n                        <strong class="tier-price">Free</strong>\n                    </div>\n\n                    <div class="tier-action">\n                        <a class="button button-alpha" disabled>&check; Subscribed</a>\n                    </div>\n\n                    <div class="tier-feature-list">\n                        <ul>\n                            <li><strong>Unlimited</strong> posts</li>\n                            <li><strong>Unlimited</strong> surveys</li>\n                            <li><strong>5</strong> users</li>\n                            <li><strong>Web, email, SMS, &amp; Twitter</strong> <br />data collection</li>\n                            <li><strong>Map, timeline, bar chart, &amp; line chart</strong> <br />data visualization</li>\n                            <li><strong>Import &amp; Export</strong> data</li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="tier">\n                    <div class="tier-header">\n                        <h2 class="tier-name">Solutions</h2>\n                        <p>Enterprise service from the data crowdsourcing experts</p>\n                        <h3 class="tier-feature">Contact us about a custom solution for your project</h3>\n                    </div>\n\n                    <form id="form7" name="form7" class="wufoo topLabel tier-form" accept-charset="UTF-8" autocomplete="off" enctype="multipart/form-data" method="post" novalidate action="https://ushah.wufoo.com/forms/pb6wq340260j75/#public">\n\n                        <div class="form-field">\n                            <label class="desc" id="title1" for="Field1">Your name <span id="req_1" class="req">*</span></label>\n                            <input placeholder="Your name" id="Field1" name="Field1" type="text" class="field text medium" value="" maxlength="255" tabindex="1" onkeyup="" required>\n                        </div>\n\n                        <div class="form-field">\n                            <label class="desc nodisplay" id="title2" for="Field2">Your email <span id="req_2" class="req">*</span></label>\n                            <input placeholder="you@organization.com" id="Field2" name="Field2" type="email" spellcheck="false" class="field text medium" value="" maxlength="255" tabindex="2" required>\n                        </div>\n\n                        <div class="form-field">\n                            <label class="desc nodisplay" id="title3" for="Field3">Your organization</label>\n                            <input placeholder="Your organization" id="Field3" name="Field3" type="text" class="field text medium" value="" maxlength="255" tabindex="3" onkeyup="">\n                        </div>\n\n                        <div class="form-field">\n                            <button id="saveForm" name="saveForm" class="button btTxt submit" type="submit">Continue</button>\n                        </div>\n\n                        <div class="nodisplay">\n                            <label for="comment">Do Not Fill This Out</label>\n                            <textarea name="comment" id="comment" rows="1" cols="1"></textarea>\n                            <input type="hidden" id="idstamp" name="idstamp" value="zkhl5vdgevIPMx9QV0j5WIpon8aq8lW5GuXOYyAWb/k=">\n                        </div>\n                    </form>\n\n                    <div class="tier-feature-list">\n                        <p><em>Projects include all Responder features, plus:</em></p>\n                        <ul>\n                            <li><strong>Unlimited</strong> users</li>\n                            <li><strong>Secure</strong> private server</li>\n                            <li><strong>Setup</strong> and training</li>\n                            <li><strong>Custom feature</strong> development</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div ui-view>\n    <div class="mode-context init" dropdown>\n\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a ui-sref="settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.roles</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        \x3c!-- toolbar --\x3e\n        <div class="toolbar">\n            <div class="fab" ng-show="rolesEnabled">\n                <a ui-sref="settings.roles.create" type="button" class="button button-alpha button-fab">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                    </svg>\n                    <span class="hidden" translate>role.add_role</span>\n                </a>\n            </div>\n        </div>\n        \x3c!-- end toolbar --\x3e\n\n        <div custom-roles class="main-col">\n\n            <div class="alert" ng-show="!rolesEnabled" translate="feature_limits.view_unavailable" translate-values="{value: \'Custom roles\'}"></div>\n\n            <div class="alert" ng-hide="roles.length">\n                <p ng-hide="roles.length"><em translate>empty.role</em></p>\n            </div>\n\n            <div class="listing card" ng-show="roles.length" ng-show="rolesEnabled">\n                <div class="listing-item" ng-repeat="role in roles | orderBy:\'role\'">\n                    <div class="listing-item-primary">\n                        <h2 class="listing-item-title"><a ui-sref="settings.roles.edit({id: role.id})">{{role.display_name}}</a></h2>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <layout-class layout="c"></layout-class>\n    <div class="mode-context init" ng-controller="navigation as nav" dropdown>\n        <header class="mode-context-header" ng-class="{ \'has-logo\' : nav.site.image_header }">\n            <h1 class="mode-context-title"><a ui-sref="posts.map.all" ng-bind="nav.site.name"></a></h1>\n            <img ng-if="nav.site.image_header" ng-src="{{ nav.site.image_header }}" class="deployment-logo" />\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n\n        <div class="mode-context-body">\n            <p markdown-to-html="nav.site.description"></p>\n        </div>\n    </div>\n    <main role="main">\n\n        <div class="main-col">\n\n            <div class="listing card init" ng-show="hasManageSettingsPermission()">\n               <div class="listing-item" ng-show="hasPermission(\'Manage Settings\')">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.general" translate>settings.settings_list.general</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.general_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="hasPermission(\'Manage Settings\')">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.surveys" translate>settings.settings_list.surveys</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.surveys_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="hasPermission(\'Manage Settings\')">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.datasources" translate>settings.settings_list.data_sources</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.data_sources_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="hasPermission(\'Bulk Data Import\')">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.dataImport" translate>settings.settings_list.import</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.import_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="hasPermission(\'Manage Users\')">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.users" translate>settings.settings_list.users</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.users_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="isAdmin()">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.roles" translate>settings.settings_list.roles</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.roles_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="hasPermission(\'Manage Settings\')">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.categories" translate>settings.settings_list.categories</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.categories_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="hasPermission(\'Manage Settings\')">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.webhooks" translate>settings.settings_list.webhooks</a></h2>\n                       <p class="listing-item-secondary" translate>settings.settings_list.webhooks_desc</p>\n                   </div>\n               </div>\n\n               <div class="listing-item" ng-show="planIsAvailable">\n                   <div class="listing-item-primary">\n                       <h2 class="listing-item-title"><a ui-sref="settings.plan" translate>settings.settings_list.plans</a></h2>\n                       <p class="listing-item-secondary"  translate-values="{ current_plan: tierNames[tier] }" translate>settings.settings_list.plan_desc</p>\n                   </div>\n               </div>\n           </div>\n        </div>\n    </main>\n</div>\n'},function(e,exports){e.exports="<settings-list ui-view></settings-list>"},function(e,exports){e.exports='<div>\n\n    <div class="form-field">\n        <label class="input-label" translate>settings.map_default_location</label>\n        <div id="settings-map" style="height: 300px; width: 100%;"></div>\n    </div>\n\n    <div class="form-field">\n        <label translate>settings.map_default_baselayer</label>\n        <select id="map-settings-base-layer" class="form-control" ng-model="config.default_view.baselayer" ng-change="updateMapPreviewLayer()" ng-options="index as layer.name for (index, layer) in baselayers">\n        </select>\n    </div>\n\n    <div class="form-field">\n       <label class="input-label"\n            ng-class="{\'error\': map.latitude.$valid}"\n            for="map-settings-latitude" translate>settings.map_default_latitude</label>\n        <input name="latitude" id="map-settings-latitude" type="number" step="any" ng-min="-90" ng-max="90" required\n            ng-class="{\'error\': map.latitude.$valid}"\n            ng-model="config.default_view.lat" ng-pattern="patternFloat" ng-change="updateMapPreview()" />\n    </div>\n\n    <div class="form-field">\n        <label class="input-label"\n            ng-class="{\'error\': map.latitude.$valid}"\n            for="map-settings-longitude" translate>settings.map_default_longitude</label>\n        <input name="longitude" id="map-settings-longitude" type="number" step="any" ng-min="-180" ng-max="180" required\n            ng-class="{\'error\': map.longitude.$valid}"\n            ng-model="config.default_view.lon" ng-pattern="patternFloat" ng-change="updateMapPreview()" />\n    </div>\n\n    <div class="form-field">\n        <label class="input-label" for="map-settings-zoom" translate>settings.map_default_zoom_level</label>\n        <input id="map-settings-zoom" type="number" ng-min="minZoom" ng-max="maxZoom" required class="form-control" ng-model="config.default_view.zoom" ng-pattern="onlyNumbers" ng-change="updateMapPreview()" />\n    </div>\n    <div class="form-field checkbox">\n        <input type="checkbox" ng-model="config.clustering" id="map-settings-clustering">\n        <label for="map-settings-clustering" translate>settings.map_clustering</label>\n    </div>\n</div>\n'},function(e,exports,t){e.exports='<div>\n    <div class="mode-context init" dropdown>\n\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.general</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        <form id="site" name="form" ng-submit="updateConfig()">\n\n            \x3c!-- toolbar --\x3e\n            <div class="toolbar">\n                <div class="button-group">\n                    <button type="button" class="button-flat" ng-click="cancel()" translate>app.cancel</button>\n                    <button type="submit" ng-click="updateConfig()" class="button-alpha"  ng-if="!saving_config" ng-disabled="form.$invalid || isUnchanged(site) || saving_config">{{save}}</button>\n                    <button type="submit" class="button-alpha"  ng-if="saving_config" ng-disabled="form.$invalid || isUnchanged(site) || saving_config" translate>{{saving}}\n                      <div class="loading">\n                        <div class="line"></div>\n                        <div class="line"></div>\n                        <div class="line"></div>\n                      </div>\n                    </button>\n\n\n\x3c!--                     <button type="button" ng-click="updateConfig()" class="button-alpha" type="submit" ng-disabled="form.$invalid || isUnchanged(site) || saving_config" translate>\n                        <div class="loading" ng-if="saving_config">\n                            <div class="line"></div>\n                            <div class="line"></div>\n                            <div class="line"></div>\n                        </div>\n                        <span ng-hide="saving" translate>app.save</span>\n                    </button>\n --\x3e                </div>\n            </div>\n            \x3c!-- end toolbar --\x3e\n\n            <div class="main-col">\n\n                <div class="form-sheet">\n                    <div class="form-field title">\n                        <label class="hidden" for="site-settings-name" ng-class="{ \'success\': !form.name.$invalid && form.name.$dirty, \'error\' : form.name.$invalid && form.name.$dirty }" translate>settings.deployment_name</label>\n                        <input id="name" name="name" type="text" placeholder="{{\'settings.deployment_name\' | translate}}" ng-model="site.name" ng-class="{\'error\': form.name.$invalid && form.name.$dirty}" required>\n\n                         <div class="alert error" ng-repeat="(error, value) in form.name.$error" ng-show="form.name.$dirty" >\n                            <svg class="iconic">\n                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#warning"></use>\n                            </svg>\n                            {{\'settings.valid.name.\' + error  | translate}}\n                        </div>\n                    </div>\n\n                    <div class="form-field">\n                        <label for="site-settings-description" translate>settings.site_description</label>\n\n                        <textarea id="site-settings-description" name="description" type="text" ng-model="site.description" placeholder="{{\'settings.site_description_placeholder\' | translate}}" data-min-rows=\'1\' rows=\'1\'></textarea>\n                    </div>\n\n                    <div class="form-field">\n                         <label translate>settings.deployment_logo</label>\n                         <figure ng-show="site.image_header">\n                            <img ng-src="{{ site.image_header }}" class="postcard-image deployment-logo" />\n                            <button class="button-flat" ng-click="clearHeader()">Delete logo</button>\n                         </figure>\n\n                         <file-upload container="fileContainer">\n                         </file-upload>\n                    </div>\n\n                    <div class="form-field">\n                        <label translate>settings.site_email</label>\n                        <p class="small" translate>settings.site_email_note</p>\n                        <input id="site-settings-email" type="email" placeholder="name@domain.com" value="brandon@ushahidi.com" ng-model="site.email">\n                    </div>\n                    <div class="form-field">\n                    <label translate>settings.site_language</label>\n                    <language-switch site="site"></language-switch>\n                    </div>\n                    <div class="form-field checkbox" ng-show="isPrivateEnabled">\n                         <input id="private" ng-model="site.private" type="checkbox">\n                         <label for="private" translate>settings.site_private</label>\n                    </div>\n\n                    <settings-map config="map"></settings-map>\n                </div>\n\n                <div class="form-sheet" ng-show="todo">\n\n                    {# TODO: not yet implemented #}\n\n                    <div class="form-sheet-summary">\n                        <h3 class="form-sheet-title" translate>settings.deployment_delete_this</h3>\n                    </div>\n\n                    <div class="form-field">\n                        <p translate>settings.deployment_delete_info</p>\n\n                        <button class="button-destructive">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                            </svg>\n                            <span class="button-label" translate>settings.deployment_delete</span>\n                        </button>\n                    </div>\n                </div>\n\n            </div>\n\n        </form>\n\n    </main>\n\n</div>\n'},function(e,exports){e.exports="<settings-editor></settings-editor>\n"},function(e,exports){e.exports='<dl class="modal-body" >\n\n    <dt class="list-item" ng-repeat-start="type in availableAttrTypes">\n        <a ng-click="createNewAttribute(type)" data-modal="edit-field">\n            {{type.label}}\n        </a>\n    </dt>\n    <dd ng-repeat-end="">{{type.description}}</dd>\n </dl>\n'},function(e,exports,t){e.exports=' <div class="modal-body">\n  <div class="form-field">\n      <label translate="app.name">Name</label>\n      <input type="text" ng-model="editAttribute.label" placeholder="{{ \'form.field_name_placeholder\' | translate}}">\n   </div>\n   <div class="form-field switch">\n      <label translate="survey.show_field_description">Show field description</label>\n      <div class="toggle-switch">\n          <input class="tgl init" id="show-field-description-new" type="checkbox" data-fieldgroup-toggle="field-description-new" ng-click="descriptionToggle=!descriptionToggle">\n          <label class="tgl-btn" for="show-field-description-new"></label>\n      </div>\n\n      <div class="form-field" data-fieldgroup-target="field-description-new" ng-show="descriptionToggle">\n          <input type="text" placeholder="{{ \'form.add_field_instructions_placeholder\' | translate}}" ng-model="editAttribute.instructions">\n      </div>\n  </div>\n   <div ng-if="canDisplay()">\n       <div class="form-field" ng-if="hasOptions(editAttribute)">\n          <label translate>form.field_options</label>\n          <div class="input-inline" ng-repeat="(key, option) in editAttribute.options track by $index">\n              <input type="text" placeholder="{{ \'form.field_option_placeholder\'|translate }}" ng-model="editAttribute.options[key]">\n              <button type="button" class="button-flat button-beta" ng-if="editAttribute.options.length > 1" ng-click="removeOption(editAttribute, key)">\n                <svg class="iconic">\n                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                </svg>\n                <span class="button-label hidden">Remove</span>\n              </button>\n          </div>\n          <button type="button" class="button-secondary alt" ng-click="addOption(editAttribute)"><i class="fa fa-plus"></i> <span translate>form.field_add_option</span></button>\n       </div>\n   </div>\n   \x3c!-- editing/adding categories --\x3e\n    <div class="form-field" ng-if="editAttribute.input ===\'tags\'">\n        <label translate>Which categories should be available</label>\n        <category-selector\n            available="availableCategories"\n            selected="editAttribute.options"\n        ></category-selector>\n    </div>\n    \x3c!-- End of editing/adding categories --\x3e\n        <div class="form-field" ng-if="editAttribute.input === \'relation\'">\n            <label translate>survey.field_allowed_relation_survey</label>\n            <ul name="visible-to">\n               <li ng-repeat="relationForm in availableForms | filter : filterNotCurrentForm">\n                   <label>\n                       <input type="checkbox" checklist-model="editAttribute.config.input.form" checklist-value="relationForm.id" />\n                        {{relationForm.name}}\n                   </label>\n               </li>\n            </ul>\n        </div>\n        <div class="form-field switch" ng-show="onlyOptional() && editAttribute.input !== \'tags\'">\n          <label translate="survey.required">Require this field be completed</label>\n          <div class="toggle-switch">\n             <input class="tgl" id="switchnewattribute" type="checkbox" ng-model="editAttribute.required">\n             <label class="tgl-btn" for="switchnewattribute"></label>\n          </div>\n       </div>\n\n       \x3c!-- start: media upload toggle to make caption an optional field--\x3e\n       <div class="form-field switch" ng-show="canDisableCaption()">\n         <label translate="survey.collect_image_caption">Disable Caption field</label>\n         <p data-fieldgroup-target="field-caption-disabled-warning" class="init active" translate="survey.disable_caption_field_explanation" ng-show="!editAttribute.config.hasCaption">\n           This will disable all captions for this field, but it won\'t delete them from the database. You will be able to re-enable them later.\n         </p>\n           <div class="toggle-switch">\n           <input class="tgl" id="switch-hascaption" type="checkbox" ng-model="editAttribute.config.hasCaption">\n           <label class="tgl-btn" for="switch-hascaption"></label>\n         </div>\n       </div>\n       \x3c!-- end: media upload toggle to make caption an optional field--\x3e\n       <div class="form-field switch" ng-show="canMakePrivate()">\n          <label translate="survey.make_response_private">Make responses private</label>\n          <p data-fieldgroup-target="field-private-message-3" class="init active" translate="survey.response_private_desc" ng-show="editAttribute.response_private">\n            <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#lock-locked"></use>\n            </svg>\n              Only people with permission to edit responses will be able to see responses to this field.\n          </p>\n          <div class="toggle-switch">\n             <input class="tgl" id="switchprivateresponse" type="checkbox" ng-model="editAttribute.response_private">\n             <label class="tgl-btn" for="switchprivateresponse"></label>\n          </div>\n       </div>\n       <div class="form-field switch" ng-if="canDisplay()">\n            <label translate="app.default_value">Default value</label>\n            <div class="toggle-switch">\n                <input class="tgl init" id="include-default-value-new" type="checkbox" data-fieldgroup-toggle="field-default-value-new" ng-click="defaultValueToggle=!defaultValueToggle">\n                <label class="tgl-btn" for="include-default-value-new"></label>\n            </div>\n\n            <div class="form-field" data-fieldgroup-target="field-default-value-new" ng-show="defaultValueToggle">\n              <div ng-switch="editAttribute.input">\n                  <input ng-switch-when="location" type="text" placeholder="{{ \'form.default_location_placeholder\'|translate }}" ng-model="editAttribute.default">\n                  <input ng-switch-when="date" type="text" date-time="editAttribute.default" ng-model="editAttribute.default">\n                  <input ng-switch-when="int" type="number" step="1" ng-model="editAttribute.default">\n                  <input ng-switch-when="decimal" type="number" ng-model="editAttribute.default">\n                  <input ng-switch-default type="text" placeholder="{{ \'form.default_default_placeholder\'|translate }}" ng-model="editAttribute.default">\n              </div>\n            </div>\n        </div>\n   </div>\n   <div class="form-field">\n      <button ng-show="!editAttribute.id" type="button" class="button-alpha modal-trigger" ng-click="addNewAttribute(editAttribute, activeTask)" translate="app.add_and_close">Add &amp; close</button>\n      <button ng-show="editAttribute.id" type="button" class="button-alpha modal-trigger" ng-click="addNewAttribute(editAttribute, activeTask)" translate="app.update_and_close">Update &amp; close</button>\n   </div>\n</div>\n'},function(e,exports,t){e.exports='<div>\n  \x3c!-- mode-context needs to be in each template --\x3e\n  <div class="mode-context init" dropdown>\n      <header class="mode-context-header">\n          <ol class="breadcrumbs">\n              <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n              <li><a href="/settings" translate>app.settings</a></li>\n              <li><a href="/settings/surveys" translate>app.surveys</a></li>\n          </ol>\n          <h1 ng-show="survey.id" class="mode-context-title" translate>app.edit_survey</h1>\n          <h1 ng-show="!survey.id" class="mode-context-title" translate>app.add_survey</h1>\n      </header>\n\n      <span class="mode-context-trigger" dropdown-toggle>\n          <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n          </svg>\n          <span class="label hidden" translate>app.show_more_less</span>\n      </span>\n  </div>\n\n  <main role="main">\n    \x3c!-- toolbar --\x3e\n    <div class="toolbar">\n        <div class="button-group">\n            <button type="button" class="button-flat" ng-click="cancel()" translate>app.cancel</button>\n            <button type="submit" class="button-alpha"  ng-if="!saving_survey" ng-click="saveSurvey()">{{save}}</button>\n            <button type="submit" class="button-alpha"  disabled ng-if="saving_survey">{{saving}}\n              <div class="loading">\n                <div class="line"></div>\n                <div class="line"></div>\n                <div class="line"></div>\n              </div>\n          </button>\n        </div>\n    </div>\n    \x3c!-- end toolbar --\x3e\n\n    <div class="full-col">\n      <section class="form-sheet">\n        \x3c!-- TODO: get form colour here --\x3e\n        <span class="post-band" ng-style="{backgroundColor: survey.color}"></span>\n        <div class="form-field title survey-title">\n          \x3c!--  TODO: add placeholder text--\x3e\n            <label class="hidden" translate>survey.survey_name</label>\n            <input type="text" placeholder="{{ \'survey.survey_name\' | translate }}" ng-model="survey.name">\n\n            <label class="hidden" translate>app.description</label>\n            <textarea placeholder="{{ \'survey.describe_your_survey\' | translate }}" ng-model="survey.description">Reports about streets that need resurfacing, repairs, or the removal of a hazard.</textarea>\n        </div>\n\n        <nav class="tabs-menu init" data-tabs="survey-details">\n            <ul>\n                <li id="survey-build-post-li">\n                  <a ng-click="switchTab(\'post\', \'survey-build\')" translate="survey.build">\n                    Build\n                  </a>\n                </li>\n                <li id="survey-configure-post-li">\n                  <a ng-click="switchTab(\'post\', \'survey-configure\')" translate="survey.configure">\n                    Configure\n                  </a>\n                </li>\n                <li id="survey-share-post-li">\n                  <a ng-click="switchTab(\'post\', \'survey-share\')" ng-show="survey.id" translate="survey.share">\n                    Share\n                  </a>\n                </li>\n            </ul>\n        </nav>\n\n        <div id="survey-build-post" class="survey-details tabs-target" >\n          <div class="listing init" style="margin-left: 4px;">\n            <h3 class="listing-heading hidden" translate="survey.post_fields">Fields</h3>\n\n            <div class="listing-item" ng-repeat="attribute in survey.tasks[0].attributes track by $index">\n              <div class="listing-item-select" ng-show="allowedToggleOrder(attribute)">\n                  <div class="buttons-updown">\n                     <button type="button" class="button-beta" ng-disabled="isFirstAttribute(survey.tasks[0], attribute)" ng-click="moveAttributeUp(survey.tasks[0], attribute)">\n                         <svg class="iconic">\n                             <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-top"></use>\n                         </svg>\n                         <span class="label hidden">Move up</span>\n                     </button>\n                     <button type="button" class="button-beta" ng-disabled="isLastAttribute(survey.tasks[0], attribute)" ng-click="moveAttributeDown(survey.tasks[0], attribute)">\n                         <svg class="iconic">\n                             <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n                         </svg>\n                         <span class="label hidden">Move down</span>\n                     </button>\n                 </div>\n              </div>\n              <div class="listing-item-secondary" ng-show="onlyOptional(attribute)">\n                  <button class="button-beta button-flat" ng-click="deleteAttribute(attribute, survey.tasks[0])">\n                      <svg class="iconic">\n                          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                      </svg>\n                      <span class="hidden">Delete</span>\n                  </button>\n              </div>\n\n              <div class="listing-item-primary">\n                  <div class="listing-item-image">\n                  \x3c!-- TODO: Set icon based on type --\x3e\n                      <svg class="iconic">\n                          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#ic_short_text_24px"></use>\n                      </svg>\n                  </div>\n                  <h2 class="listing-item-title">\n                    <a ng-click="openAttributeEditModal(survey.tasks[0], attribute)">\n                      {{attribute.label}}\n                    </a>\n                    <span class="listing-item-image tooltip" ng-show="attribute.response_private">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#lock-locked"></use>\n                        </svg>\n                        <span class="bug" translate="survey.response_private_desc">Only people with permission to edit responses can see responses to this field</span>\n                    </span>\n                  </h2>\n              </div>\n            </div>\n            <div class="listing-item">\n                <div class="listing-item-primary">\n                    <h2 class="listing-item-title">\n                        <a ng-click="openAttributeModal(survey.tasks[0])" class="button button-beta" data-modal="add-field">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                            </svg>\n                           <span translate="survey.add_field">Add field</span>\n                        </a>\n                    </h2>\n                </div>\n            </div>\n          </div>\n        </div>\n        <div id="survey-configure-post" class="survey-details tabs-target">\n          \x3c!--// Require review //--\x3e\n          <div class="form-field switch">\n            <label translate="survey.require_review">Require posts be reviewed before they\'re published</label>\n            <p data-fieldgroup-target="require-review-message" ng-show="survey.require_approval" translate="survey.require_review_desc">New responses to this survey will be put "under review," and therefore not immediately visible to the public. Users with permission to review the response can review and "publish" them, which would then make them visible to everyone.</p>\n            <div class="toggle-switch">\n                <input class="tgl" id="post-review" type="checkbox" ng-model="survey.require_approval">\n                <label class="tgl-btn" for="post-review"></label>\n            </div>\n          </div>\n          \x3c!--// Hide Author Information //--\x3e\n          <div class="form-field switch">\n              <label translate="survey.hide_author_information">Hide author information</label>\n              <p ng-show="survey.hide_author" data-fieldgroup-target="hide-author-message" translate="survey.hide_author_information_desc">Only people with permission to edit responses will be able to see who submitted them; and only when editing them.</p>\n              <div class="toggle-switch">\n                  <input class="tgl init" id="hide-author" type="checkbox" data-fieldgroup-toggle="hide-author-message" ng-model="survey.hide_author">\n                  <label class="tgl-btn" for="hide-author"></label>\n              </div>\n          </div>\n\n          \x3c!--// Who can add //--\x3e\n          <fieldset>\n            <legend translate="survey.who_can_add">Who can add to this survey</legend>\n            <div class="form-field radio icon-input" ng-class="{ \'checked\': survey.everyone_can_create }">\n              <label for="survey-add_everyone">\n                <svg class="iconic">\n                  <use xlink:href="'+t(0)+'#globe"></use>\n                </svg>\n                <input name="survey-add" id="survey-add_everyone" ng-value="true" checked="" type="radio" ng-model="survey.everyone_can_create">\n                <span class="label" translate="nav.everyone">Everyone</span>\n              </label>\n            </div>\n\n            <div class="form-field radio icon-input"  ng-class="{ \'checked\': !survey.everyone_can_create }">\n              <label for="survey-add_roles">\n                <svg class="iconic">\n                  <use xlink:href="'+t(0)+'#people"></use>\n                </svg>\n                <input class="init" name="survey-add" id="survey-add_roles" ng-value="false" ng-modaldata-fieldgroup-toggle="survey-add_roles" type="radio" ng-model="survey.everyone_can_create">\n                <span translate="app.specific_roles">Specific roles...</span>\n              </label>\n\n              <div class="form-fieldgroup init" data-fieldgroup-target="survey-add_roles" ng-class="{true:\'\', false:\'active\'}[survey.everyone_can_create]">\n                <div class="form-field checkbox" ng-repeat="role in roles">\n                  <label>\n                    <input type="checkbox" checklist-model="roles_allowed" checklist-value="role.id">\n                    {{role.display_name}}\n                  </label>\n                </div>\n              </div>\n            </div>\n          </fieldset>\n\n          <color-picker color-container="survey"></color-picker>\n          \x3c!-- <fieldset data-fieldset-type="color">\n              <legend><span class="swatch" style="background-color: #A51A1A;"></span>Survey color</legend>\n              <p>Your survey\'s color will be used for map markers, and the left border of the survey and its responses.</p>\n\n              <div class="form-field">\n                  <label class="hidden">Hex value</label>\n                  <div class="minicolors minicolors-theme-default minicolors-position-bottom minicolors-position-left minicolors-inline"><input type="text" data-input-type="color" value="#A51A1A" class="minicolors-input" size="7"><div class="minicolors-panel minicolors-slider-hue minicolors-with-swatches"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker" style="top: 150px;"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite" style="background-color: rgb(255, 0, 0);"><div class="minicolors-grid-inner"></div><div class="minicolors-picker" style="top: 52px; left: 127px;"><div></div></div></div><ul class="minicolors-swatches"><li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" style="background-color: rgb(165, 26, 26);"></span></li><li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" style="background-color: rgb(230, 147, 39);"></span></li><li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" style="background-color: rgb(34, 116, 180);"></span></li><li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" style="background-color: rgb(91, 170, 0);"></span></li></ul></div></div>\n              </div>\n          </fieldset> --\x3e\n        </div>\n        \x3c!-- Share Tab Options --\x3e\n        <div id="survey-share-post" class="survey-details tabs-target" ng-show="survey.id">\n          <share-menu survey-id="survey.id"></share-menu>\n        </div>\n      </section>\n      \x3c!-- Task sections --\x3e\n      <section class="form-sheet" ng-repeat="task in survey.tasks | limitTo: 1 - survey.tasks.length">\n        <div class="form-field title section-title">\n            <label class="hidden" translate="survey.task_name">Section name</label>\n            <input type="text" placeholder="{{ \'survey.untitled_task\' | translate }}" ng-change="changeTaskLabel(task)" ng-model="task.label">\n\n            <label class="hidden" translate="survey.task_description">Section description</label>\n            <textarea\n              name="description"\n              placeholder="{{ \'survey.describe_this_task\' | translate }}"\n              rows="1"\n              ng-model="task.description"\n              ></textarea>\n\n            \x3c!-- <p class="alert">\n                <svg class="iconic">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#people"></use>\n                </svg>\n                The fields in this section can only be completed and viewed by select people. <a>Change settings</a>\n            </p> --\x3e\n            <div class="section-title-actions" dropdown>\n                <button class="button-beta button-flat init" data-toggle="dropdown-menu" dropdown-toggle>\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#ellipses"></use>\n                    </svg>\n                    <span class="hidden">More</span>\n                </button>\n\n                <ul class="dropdown-menu init" dropdown-menu>\n                    <li>\n                        <a href="" data-modal="delete-post" ng-click="duplicateSection(task)">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(262)+'#ic_content_copy_24px"></use>\n                        </svg>\n                        <span class="label" translate="survey.duplicate_task">Duplicate task</span>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="" data-modal="delete-post" ng-click="deleteTask(task)">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                        </svg>\n                        <span class="label" translate="survey.delete_task">Delete task</span>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n        <nav class="tabs-menu init" data-tabs="section-1-details">\n            <ul>\n                <li class="active" ng-attr-id="{{ \'section-build-\' + task.id + \'-li\'}}">\n                  <a ng-click="switchTab(task.id, \'section-build\')" translate="survey.build">\n                    Build\n                  </a>\n                </li>\n                <li ng-attr-id="{{ \'section-configure-\' + task.id + \'-li\'}}">\n                  <a ng-click="switchTab(task.id, \'section-configure\')" translate="survey.configure">\n                    Configure\n                  </a>\n                </li>\n            </ul>\n        </nav>\n\n        <div ng-attr-id="{{ \'section-build-\' + task.id }}" class="section-1-details tabs-target active">\n            <div class="listing init">\n              <div class="listing-item" ng-repeat="attribute in task.attributes track by $index">\n                  <div class="listing-item-select">\n                      <div class="buttons-updown">\n                         <button type="button" class="button-beta" ng-disabled="isFirstAttribute(task, attribute)" ng-click="moveAttributeUp(task, attribute)">\n                             <svg class="iconic">\n                                 <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-top"></use>\n                             </svg>\n                             <span class="label hidden">Move up</span>\n                         </button>\n                         <button type="button" class="button-beta" ng-disabled="isLastAttribute(task, attribute)" ng-click="moveAttributeDown(task, attribute)">\n                             <svg class="iconic">\n                                 <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n                             </svg>\n                             <span class="label hidden">Move down</span>\n                         </button>\n                     </div>\n                  </div>\n\n                  <div class="listing-item-secondary" ng-show="onlyOptional(attribute)">\n                      <button class="button-beta button-flat" ng-click="deleteAttribute(attribute, task)">\n                          <svg class="iconic">\n                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                          </svg>\n                          <span class="hidden">Delete</span>\n                      </button>\n                  </div>\n\n                  <div class="listing-item-primary">\n                      <div class="listing-item-image">\n                          <svg class="iconic">\n                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#ic_short_text_24px"></use>\n                          </svg>\n                      </div>\n                      <h2 class="listing-item-title">\n                        <a ng-click="openAttributeEditModal(task, attribute)">\n                          {{attribute.label}}\n                        </a>\n                        <span class="listing-item-image tooltip" ng-show="attribute.response_private">\n                            <svg class="iconic">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#lock-locked"></use>\n                            </svg>\n                            <span class="bug" translate="survey.response_private_desc">Only people with permission to edit responses can see responses to this field</span>\n                        </span>\n                      </h2>\n                  </div>\n              </div>\n              <div class="listing-item">\n                  <div class="listing-item-primary">\n                      <h2 class="listing-item-title">\n                          <a ng-click="openAttributeModal(task)" class="button button-beta" data-modal="add-field">\n                              <svg class="iconic">\n                                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                              </svg>\n                             <span translate="survey.add_field">Add field</span>\n                          </a>\n                      </h2>\n                  </div>\n              </div>\n            </div>\n        </div>\n\n        <div ng-attr-id="{{ \'section-configure-\' + task.id }}" class="section-1-details tabs-target">\n          <div class="form-field switch">\n            <label translate="survey.required">Required</label>\n            <p data-fieldgroup-target="require-review-message" ng-show="task.required" translate="survey.required_desc">Require this section be completed before a post can be visible to the public.</p>\n            <div class="toggle-switch" ng-attr-id="{{ \'toggle-switch-required-\' + task.id }}">\n                <input class="tgl" ng-attr-id="{{ \'task-required-\' + task.id }}" type="checkbox" ng-model="task.required">\n                <label class="tgl-btn" for="task-required-{{task.id}}" ng-attr-id="{{ \'task-required-label-\' + task.id }}"></label>\n            </div>\n        </div>\n        <div class="form-field switch checked">\n            <label translate="survey.internal_use_task">Task is only for internal use</label>\n            \x3c!-- todo show list of roles with correct permission for clarity in message below--\x3e\n            <p data-fieldgroup-target="internal_only-message" class="active" ng-show="task.task_is_internal_only" translate="survey.internal_use_task_desc">This task will only be visible to User who have Manage Post permission.</p>\n            <div class="toggle-switch" ng-attr-id="{{ \'toggle-switch-show-\' + task.id }}">\n                <input class="tgl init" ng-attr-id="{{ \'internal_only-\' + task.id }}" type="checkbox" data-fieldgroup-toggle="internal_only-message" ng-model="task.task_is_internal_only">\n                <label class="tgl-btn" for="internal_only-{{task.id}}" ng-attr-id="{{ \'internal_only-label-\' + task.id }}"></label>\n            </div>\n        </div>\n        <div class="form-field switch checked">\n            <label translate="survey.show_this_task_to">Show this task to everyone when published</label>\n            <p data-fieldgroup-target="show_section-message" class="active" ng-show="task.show_when_published" translate="survey.show_this_task_to_desc">When a survey response is published, data from this section will be displayed.</p>\n            <div class="toggle-switch" ng-attr-id="{{ \'toggle-switch-show-\' + task.id }}">\n                <input class="tgl init" ng-attr-id="{{ \'show_section-\' + task.id }}" type="checkbox" data-fieldgroup-toggle="show_section-message" ng-model="task.show_when_published">\n\n                <label class="tgl-btn" for="show_section-{{task.id}}" ng-attr-id="{{ \'show_section-label-\' + task.id }}"></label>\n            </div>\n        </div>\n\n          \x3c!-- <fieldset>\n            <legend translate="survey.who_can_contribute_to_section">Who can contribute to fields in this section</legend>\n            <div class="form-field radio icon-input" ng-class="{ \'checked\': task.everyone_can_contribute }">\n              <label for="survey-add_everyone">\n                <svg class="iconic">\n                  <use xlink:href="'+t(0)+'#globe"></use>\n                </svg>\n                <input name="survey-add" id="survey-add_everyone" ng-value="true" checked="" type="radio" ng-model="task.everyone_can_contribute">\n                <span class="label" translate="nav.everyone">Everyone</span>\n              </label>\n            </div>\n\n            <div class="form-field radio icon-input"  ng-class="{ \'checked\': !task.everyone_can_contribute }">\n              <label for="survey-add_roles">\n                <svg class="iconic">\n                  <use xlink:href="'+t(0)+'#people"></use>\n                </svg>\n                <input class="init" name="survey-add" id="survey-add_roles" ng-value="false" ng-modaldata-fieldgroup-toggle="survey-add_roles" type="radio" ng-model="task.everyone_can_contribute">\n                <span translate="app.specific_roles">Specific roles...</span>\n              </label>\n\n              <div class="form-fieldgroup init" data-fieldgroup-target="survey-add_roles" ng-class="{true:\'\', false:\'active\'}[task.everyone_can_contribute]">\n                <div class="form-field checkbox" ng-repeat="role in roles">\n                  <label>\n                    <input type="checkbox" checklist-model="section_roles_allowed" checklist-value="role.id">\n                    {{role.display_name}}\n                  </label>\n                </div>\n              </div>\n            </div>\n          </fieldset> --\x3e\n        </div>\n      </section>\n      \x3c!-- Add nw section/task --\x3e\n      <div class="listing-item">\n          <div class="listing-item-primary">\n              <button ng-click="openTaskModal()" class="button-gamma init" data-toggle="field-type">\n                  <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                  </svg>\n                  <span class="button-label" translate="survey.add_task">Add task</span>\n              </button>\n          </div>\n      </div>\n    </div>\n  </main>\n</div>\n'},function(e,exports){e.exports='<p>\n  {{successText}}\n</p>\n\n<a class="button button-beta" ng-click="close()" ui-sref="postCreate({id: formId})" translate="notify.form.add_to_survey">Add to survey</a>\n<button class="button-flat message-trigger" ng-click="close()" translate="message.button.dismiss">\n    Dismiss\n</button>\n'},function(e,exports,t){e.exports='<div ui-view>\n    \x3c!-- mode-context needs to be in each template --\x3e\n    <layout-class layout="a"></layout-class>\n    <div class="mode-context init" dropdown>\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.surveys</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        \x3c!-- TODO: what is the surveys equivalent to rolesEnabled --\x3e\n        \x3c!-- toolbar --\x3e\n        <div class="toolbar">\n            <div class="fab">\n                <a ui-sref="settings.surveys.create" type="button" class="button button-alpha button-fab">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                    </svg>\n                    <span class="hidden" translate>form.add_post_type</span>\n                </a>\n            </div>\n        </div>\n        \x3c!-- end toolbar --\x3e\n\n        <div class="main-col">\n\n            <div class="listing card">\n                <div class="listing-item" ng-show="forms.length" ng-repeat="form in forms">\n                    <span class="post-band" ng-style="{backgroundColor: form.color}"></span>\n                    <div class="listing-item-secondary" dropdown>\n                      <button class="button-beta button-flat" data-toggle="dropdown-menu" dropdown-toggle>\n                          <svg class="iconic">\n                              <use xlink:href="'+t(0)+'#ellipses"></use>\n                          </svg>\n                          <span class="hidden">More</span>\n                      </button>\n                      <ul class="dropdown-menu init" dropdown-menu>\n                          <li>\n                              <a href="/settings/surveys/duplicate/{{form.id}}">\n                                  <svg class="iconic">\n                                      <use xlink:href="'+t(262)+'#ic_content_copy_24px"></use>\n                                  </svg>\n                                  <span class="label">Duplicate</span>\n                              </a>\n                          </li>\n                          <li>\n                              <a ng-click="deleteSurvey(form)">\n                                  <svg class="iconic">\n                                      <use xlink:href="'+t(0)+'#trash"></use>\n                                  </svg>\n                                  <span class="label">Delete</span>\n                              </a>\n                          </li>\n                      </ul>\n                    </div>\n                    <div class="listing-item-primary">\n                        <h2 class="listing-item-title"><a href="/settings/surveys/edit/{{form.id}}">{{form.name}}</a></h2>\n                        <p class="listing-item-secondary" markdown-to-html="form.description"></p>\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n    </main>\n\n</div>\n'},function(e,exports){e.exports='<div>\n  <div class="form-field title">\n     <label translate="survey.task_name">task name</label>\n     <input type="text" placeholder="{{ \'survey.name_this_task\' | translate }}" ng-model="newTask.label">\n  </div>\n  <div class="form-field">\n      <label for="task_description" translate="survey.task_description">\n          task description\n      </label>\n      <textarea id="task_description" placeholder="{{ \'survey.describe_this_task\' | translate }}" name="description" data-min-rows="1" rows="1" ng-model="newTask.description"></textarea>\n\n  </div>\n  <div class="form-field switch">\n     <label translate="survey.require_section">Require this section be completed before a post can be visible to the public</label>\n     <div class="toggle-switch">\n        <input class="tgl" id="require-toggle" type="checkbox" ng-model="newTask.required">\n        <label class="tgl-btn" for="require-toggle"></label>\n     </div>\n  </div>\n  <div class="form-field">\n      <button type="button" class="button-link modal-trigger" ng-click="closeModal()" translate="app.cancel">Cancel</button>\n      <button type="button" class="button-alpha modal-trigger" ng-click="addNewTask(newTask)" translate="app.add_and_close">Add &amp; close</button>\n  </div>\n</div>\n'},function(e,exports,t){e.exports='<form name="usersFiltersForm" role="search" class="searchbar" dropdown is-open="filtersMenuOpen" auto-close="outsideClick" ng-submit="applyFilters()" ng-model-options="{ updateOn : \'submit\' }" ng-class="{ active: status.isopen }">\n    \x3c!-- Include search bar --\x3e\n    <filter-searchbar model="filters.q"></filter-searchbar>\n\n    \x3c!-- Toggle Filters show/hide --\x3e\n    <div class="searchbar-options">\n        <a href="#" id="toggleUserSearchFilters" class="button searchbar-options-filter init" data-toggle="search-filters" dropdown-toggle>\n            <span class="button-label" translate>app.filters</span>\n            <svg class="iconic">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n        </a>\n    </div>\n\n    \x3c!-- Filters menu --\x3e\n    <div class="dropdown-menu init" data-toggle-target="search-filters" dropdown-menu>\n        <div class="dropdown-menu-body">\n            <filter-role model="filters.role"></filter-role>\n        </div>\n\n        <div class="form-field filter-actions">\n            <button type="button" class="button-link" ng-click="cancel()" translate>app.cancel</button>\n            <button type="submit" class="button-alpha" ng-disabled="applyEnabled"  translate>app.apply_filters</button>\n        </div>\n    </div>\n</form>\n'},function(e,exports,t){e.exports='<div ui-view>\n    <div class="mode-context init" dropdown>\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="/settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.users</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n        \x3c!-- toolbar --\x3e\n        <div class="toolbar">\n            <div class="fab">\n                <a ui-sref="settings.users.create" type="button" class="button button-alpha button-fab" ng-class="{\'disabled\': selectedUsers.length}">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                    </svg>\n                    <span class="hidden" translate>user.add_user</span>\n                </a>\n            </div>\n\n            <filter-users filters="filters"></filter-users>\n\n            <div class="button-group" ng-show="todo">\n                <button type="button">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#external-link"></use>\n                    </svg>\n                    <span class="button-label" translate>nav.export</span>\n                </button>\n            </div>\n        </div>\n        \x3c!-- end toolbar --\x3e\n\n        <div class="main-col">\n\n            <div class="listing card" ng-class="{\'toolbar-active\': selectedUsers.length}">\n                <div class="alert" ng-hide="users.length">\n                    <p ng-hide="users.length"><em translate>empty.user</em></p>\n                </div>\n\n                <div id="user-{{user.id}}" class="listing-item" ng-repeat="user in users | orderBy:\'realname\'" ng-class="{ \'warning\': isToggled(user) }" ng-click="toggleUser(user)">\n                    <div class="listing-item-select">\n                        <input type="checkbox" value="{{user.id}}" ng-checked="isToggled(user)">\n                    </div>\n\n                    <div class="listing-item-primary">\n                        <div class="listing-item-image">\n                            <img class="avatar" ng-src="https://www.gravatar.com/avatar/{{ user.gravatar || \'00000000000000000000000000000000\' }}?d=retro" alt="{{ user.realname }}">\n                        </div>\n\n                        <h2 class="listing-item-title"><a ui-sref="settings.users.edit({id: user.id})">{{user.realname}}</a></h2>\n                        <p class="listing-item-secondary">{{ roles[user.role].display_name }}</p>\n                    </div>\n                </div>\n                <listing-toolbar entities="users" selected-set="selectedUsers">\n                    <fieldset class="custom-fieldset init" dropdown>\n                        <legend class="dropdown-trigger init" data-toggle="dropdown-menu" dropdown-toggle>\n                            <span class="legend-label" translate>\n                                user.change_role\n                            </span>\n                            <svg class="iconic chevron">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n                            </svg>\n                        </legend>\n                        <div class="dropdown-menu init" dropdown-menu>\n                            <div class="form-field radio" ng-repeat="role in roles">\n                                <label>\n                                    <input type="radio" name="role" ng-click="changeRole(role)">\n                                        {{role.display_name}}\n                                </label>\n                            </div>\n                        </div>\n                    </fieldset>\n                    <button type="button" class="button-destructive" ng-disabled="!selectedUsers.length" ng-click="deleteUsers()">\n                        <svg class="iconic">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#trash"></use>\n                        </svg>\n                        <span class="button-label hidden">nav.delete</span>\n                    </button>\n                </listing-toolbar>\n             </div>\n            <nav class="pagination" ng-show="showPagination">\n                <ul uib-pagination ng-model="currentPage" items-per-page="itemsPerPage" total-items="totalItems" ng-change="pageChanged()" max-size="5" boundary-links="false" rotate="false"></ul>\n            </nav>\n        </div>\n    </main>\n</div>\n'},function(e,exports,t){e.exports='<div ui-view>\n    <div class="mode-context init" dropdown>\n\n        <header class="mode-context-header">\n            <ol class="breadcrumbs">\n                <li><a href="/" ng-controller="navigation as nav">{{nav.site.name}}</a></li>\n                <li><a href="settings" translate>app.settings</a></li>\n            </ol>\n            <h1 class="mode-context-title" translate>app.webhooks</h1>\n        </header>\n\n        <span class="mode-context-trigger" dropdown-toggle>\n            <svg class="iconic">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#chevron-bottom"></use>\n            </svg>\n            <span class="label hidden" translate>app.show_more_less</span>\n        </span>\n    </div>\n\n    <main role="main">\n\n        \x3c!-- toolbar --\x3e\n        <div class="toolbar">\n            <div class="fab" ng-show="webhooksEnabled">\n                <a ui-sref="settings.webhooks.create" type="button" class="button button-alpha button-fab">\n                    <svg class="iconic">\n                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+t(0)+'#plus"></use>\n                    </svg>\n                    <span class="hidden" translate>webhook.add_webhook</span>\n                </a>\n            </div>\n        </div>\n        \x3c!-- end toolbar --\x3e\n\n        <div custom-webhooks class="main-col">\n\n            <div class="alert" ng-show="!webhooksEnabled" translate="feature_limits.view_unavailable" translate-values="{value: \'Custom webhooks\'}"></div>\n\n            <div ng-show="webhooksEnabled">\n              <div class="alert" ng-hide="webhooks.length">\n                  <p ng-hide="webhooks.length"><em translate>empty.webhook</em></p>\n              </div>\n\n              <div class="listing card" ng-show="webhooks.length">\n                  <div class="listing-item" ng-repeat="webhook in webhooks | orderBy:\'webhook\'">\n                      <div class="listing-item-primary">\n                          <h2 class="listing-item-title"><a ui-sref="settings.webhooks.edit({id: webhook.id})">{{webhook.name}}</a></h2>\n                      </div>\n                  </div>\n              </div>\n\n              <uib-pagination ng-model="currentPage" items-per-page="itemsPerPage" total-items="totalItems" ng-change="pageChanged()" max-size="5" boundary-links="false" rotate="false"></uib-pagination>\n            </div>\n        </div>\n    </main>\n</div>\n'},,,function(e,exports){e.exports={app:{404:"That URL doesn't exist",powered_by_ushahidi:"Powered by Ushahidi.",support:"LAM-TECH Support",by:"by",submit:"Submit",submitting:"Submitting",submit_another:"Submit & Add Another",submit_response:"Submit a survey response",can_see_this:"can see this",collection:"Collection",collections:"Collections",create_collection:"Create collection",export_to_csv:"Export to CSV",create_new:"Create new",create_new_survey:"Create new survey",created_by:"Created by {{author}}",date_created:"Date created",date_updated:"Date updated",documentation:{title:"Documentation",description:"Learn how to set up, configure, and manage your Ushahidi deployment."},report_a_bug:{title:"Report a bug",description:"Tell us when something doesn't work the way you expected."},edit_collection:"Edit collection",features:{title:"Features",description:"See what Ushahidi can do and how it works."},forbidden:"Sorry, you're not allowed to do that.",get_notifications:"Get notifications",turn_off_notifications:"Turn off notifications",load_more:"Load more",loading:"Loading",loading_saved_searches:"Loading saved searches",more:"More",cancel:"Cancel",save:"Save",save_and_close:"Save &amp; close",add_and_close:"Add &amp; close",update_and_close:"Update &amp; close",updating:"Updating",saving:"Saving",settings:"Settings",share:"Share",specific_roles:"Specific roles...",general:"General",surveys:"Survey",add_survey:"Add Survey",edit_survey:"Edit Survey",data_sources:"Data Sources",import:"Import",users:"Users",edit_user:"Edit User",add_user:"Add User",edit:"Edit",roles:"Roles",edit_role:"Edit Role",add_role:"Add Role",webhooks:"Webhooks",edit_webhook:"Edit Webhook",add_webhook:"Add Webhook",categories:"Categories",edit_category:"Edit Category",add_category:"Add Category",categories_count:"{{count}} categories",plans:"Plans",delete:"Delete",description:"Description",color:"Color",search_users:"Search users",searching:"Searching",show_hide:"Show/Hide",fields:"Fields",no_results:"No results found.",filter_by:"Filter by...",sort_filter:"Sort & filter",apply_filters:"Apply",show_more_less:"Show more/less",filters:"Filters",filter_by_survey:"Filter by survey",configure:"Configure",post:"Post",name:"Name",key:"Key",survey_web_address:"Your survey's web address",default_value:"Default value",select_one:"Select One",sort_and_filter:"Sort & filter",saved_search:"Saved Search",tasks:"Tasks",return_to_all_posts:"Return to all posts",this_deplyment_is_private:"This deployment is private",private_deployment:"Private Deployment",mark_as:"Mark as",who_can_see_this_category:"Who can see this category?",this_category_is_child_to:"This category is a child to <strong>{{parent}}</strong>",nothing:"Nothing",who_can_see_this:"Who can see this?",add:"Add",add_new_category:"+ Add new category",sort_by:"Sort By ...",newest_first:"Newest first",oldest_first:"Oldest first"},toolbar:{searchbar:{search_entity:"Search {{entity}}",search_all_entities_for:"Search all {{entity}} for "}},color_picker:{hex_value:"Hex Value",red:"Red",gold:"Gold",blue:"Blue",green:"Green"},feature_limits:{view_unavailable:'The {{value}} view isn\'t available on your current plan. <a href="/settings/plan">Upgrade your plan</a> to get it!'},limit:{plan_limit:"Ushahidi Plan Limit",post_limit_reached:"You have reached the limit of published Posts for your plan.",admin_limit_reached:"You have reached the limit of admin users for your plan.",post_type_limit_reached:"You have reached the surveys limit for your plan.",upgrade:"Upgrade"},activity:{activity_over_time:"Activity over time",activity_by_volume:"Activity by volume",recent_activity_timeline:"Recent Activity timeline",new_post:"New Post",by:"By",context_body:"A summary of how people are interacting with {{site}}."},form:{add_field:"Add field",add_field_instructions:"Add instructions to this field",add_field_instructions_info:"These instructions will be presented as a tooltip to a user when filling in this field.",add_field_instructions_placeholder:"Explain this field...",add_post_type:"Add Survey",add_step:"Add Task",added_form_stage_attribute:"Saved field",field_allowed_relation_post_type:"Allowed surveys",choose_order_message:"Choose and order the fields that you would like to include in this survey",created_form_stage:"Saved task",currently_disabled:"This survey is currently disabled.",custom_structure:"Custom Structure",default_date_placeholder:"Default date",default_default_placeholder:"Default value",default_location_placeholder:"Nairobi, Kenya",delete_post_type:"Delete this survey",deleted_form:"Deleted Survey",deleted_form_stage:"Deleted Task",deleted_form_stage_attribute:"Deleted field",editable_by:"Editable By",edit_post_step:"Edit Task: {{step}}",edit_post_type:"Edit Survey: {{form}}",edit_post_types:"Edit Surveys",field_add_option:"Add",field_default:"Field Default",field_key:"Field Key",field_type:"Field Type",field_name:"Field Name",field_options:"Field Options",field_key_placeholder:"field-key",field_name_placeholder:"Name this field",field_option_placeholder:"Option 1",field_required:"This field is required",form_name:"Name",form_description:"Description",forms:"Forms",form_stage_settings_saved:"Saved settings",permission_public:"Public",permission_admin:"Admin",permission_self:"Only Me",post_type_settings:"Survey Settings",post_step_settings:"Task Settings",priority_changed:"Changed priority",save_and_close:"Save & Close",save_post_type:"Save Survey",save_post_step:"Save Task",saved_form:"Survey saved.",step_delete:"Delete",step_name:"Task Name",step_rename:"Rename",step_required:"This task is required",post_step:"Post",type:"type",visible_to:"Visible To"},survey:{delete_task:"Delete task",internal_use_task:"Task is only for internal use",internal_use_task_desc:"This task will only be visible to User who have Manage Post permission.",duplicate_task:"Duplicate task",show_this_task_to:"Show this task to everyone when published",show_this_task_to_desc:"When a survey response is published, data from this task will be displayed.",survey_name:"Survey name",describe_your_survey:"Describe your survey...",describe_this_task:"Describe this task...",untitled_task:"Untitled task",add_task:"Add task",title:"Title",field_allowed_relation_survey:"Allowed surveys",collect_image_caption:"Include image caption field",disable_caption_field_explanation:"This will disable and hide all existing captions for this field, but you can re-enable them at any time.",description:"Description",task_description:"Task description",post_fields:"Post fields",task_fields:"Task fields",show_task:"Show this task to everyone when the post is published",task_info:"You can add additional information to each post, like translations or verification, and assign them to people by adding <strong>Tasks</strong>. You can choose from pre-built tasks or create your own from scratch.",text_desc:"A sentence or less",textarea_desc:"Multiple sentences or paragraphs",decimal_desc:"A number with decimal places",integer_desc:"A whole number",location_desc:"A geographic location chosen via a map",date_desc:"A date with year, month, day",datetime_desc:"A date with time in hours and minutes",select_desc:"A drop down list of items",radio_desc:"Allows the user to choose only one of a predefined set of options.",checkbox_desc:"Allows the user to choose one or more of a predefined set of options.",relation_desc:"Create a relation between different surveys",upload_desc:"Allows image(s) to be uploaded to the post",video_desc:"Allows Youtube or Vimeo videos to be embed in the post",markdown_desc:"Allows the use of markdown syntax to style the field content.",tasks:"Tasks",task_visible_when_published:"This task will be visible when post is published.",show_field_description:"Show field description",add_field:"Add field",edit_field:"Edit field",build:"Build",configure:"Configure",require_section:"Require this task be completed before a post can be visible to the public",hide_author_information:"Hide author information",hide_author_information_desc:"Only people with permission to edit responses will be able to see who submitted them; and only when editing them.",share:"Share",task_name:"Task name",required_field:"Required",required:"Required",required_desc:"Require this task be completed before a post can be visible to the public.",require_field_desc:"Require this field be completed",name_this_task:"Name this task...",require_review:"Require posts be reviewed before they're published",require_review_desc:"New responses to this survey will be put 'under review', and therefore not immediately visible to the public. Users with permission to review the response can review and 'publish' them, which would then make them visible to everyone.",require_task:"Required",make_response_private:"Make responses private",response_private_desc:"Only people with permission to edit responses can see responses to this field",require_task_desc:"Require this task be completed before a post can be visible to the public",survey_permissions:"Survey permissions",who_can_add:"Who can add to this survey",who_can_contribute_to_task:"Who can contribute to fields in this task",delete:{desc:"<strong>If you delete this survey</strong>, all of its posts will also be deleted. Proceed with caution.",delete:"Delete survey",delete_this:"Delete this survey",delete_this_field:"Delete this field",delete_field:"Delete field",desc_field:"<strong>If you delete this field</strong>, all of the data that was collected within it will also be deleted. Proceed with caution."},name:"Survey name",color:{color:"Color",hex:"Hex value",red:"Red",gold:"Gold",blue:"Blue",green:"Green"},who:"Who can see this?",task:{delete:{desc:"<strong>If you delete this task</strong>, all of the data captured in it will also be deleted. Proceed with caution.",delete:"Delete task",delete_this:"Delete this task"}}},global_filter:{filter:"Filter",categories:{categories:"Categories",all_categories:"All Categories"},post_types:{post_types:"Surveys",all_types:"All Types",unstructured:"Unstructured"},post_statuses:{post_statuses:"Status",all_statuses:"Any Status",draft:"Draft",published:"Published"},post_stages:{post_stages:"Current Task",all_stages:"All Tasks"},collections:{collections:"Collections",all_collections:"All Collections",search_collections:"Search Collections"},sort:{order:{filter_type_tag:"Order",desc:"Newest first",asc:"Oldest first"},orderby:{post_date:"Post Date",created:"Date created",updated:"Date updated"},unlockedOnTop:{filter_type_tag:"Unlocked posts on top"}},filter_tabs:{order:"Order",order_group:{orderby:{post_date:"Post Date",created:"Date created",updated:"Date updated"},order:{desc:"Newest first",asc:"Oldest first"},unlocked_on_top_yes:"Yes",unlocked_on_top_no:"No"},orderby:"Order by",order_unlocked_on_top:"Unlocked posts on top",savedsearch:"Saved Search",saved_search:"Saved Search",q:"Keyword",created_after:"Start date",created_before:"End date",date_after:"Start date",date_before:"End date",center_point:"Location",tags:"Category",form:"Survey",current_stage:"Current Task",set:"Collection",status:"Status",location_value:"Within {{km}} km of {{value}}",visible_to:"Visible to",user:"User",has_location:"Post-locations",all_posts:"Show all posts",unmapped:"Show unmapped posts",mapped:"Show posts with a location",source:"Source"},more:"More",keyword:"Keyword",start_date:"Start Date",start_date_placeholder:"Jan 25, 2014",end_date:"End Date",end_date_placeholder:"April 25, 2014",location:"Location",location_placeholder:"Enter city or address",within_km:"Within",km:"Km",within_km_placeholder:"Distance",option_1:"within 1 km",option_2:"within 10 km",option_3:"within 50 km",option_4:"within 100 km",option_5:"within 500 km",clear_filters:"Clear Filters",apply_filters:"Apply",save_to_set:"Save to Set",search:"Search",date_range:"Date range",who_its_visible_to:"Who it's visible to",status:"Status",source:"Source"},graph:{all_posts:"Nothing; Show all posts",all:"All time",compare:"Compare...",compare_all:"Compare...",compare_status:"Compare status",compare_tags:"Compare categories",compare_form:"Compare surveys",compare_:"Compare ",created:"Created time",cumulative:"Show cumulative totals",cumulative_post_count:"Total post count",custom:"Custom date range",custom_display:"{{start || 'Beginning'}} to {{end || 'Now'}}",group_by_placeholder:"Graph",new_post_count:"New posts",none:"None",no_data:"No activity to show",post_count:"Post count",post_date:"Post created date",select_one:"Select one",week:"This week",month:"This month",updated:"Updated time"},message:{button:{dismiss:"Dismiss",default:"Ok",cancel:"Cancel"}},modal:{button:{close:"Close"}},nav:{404:"Whoops",about:"About",activity:"Activity",add_post:"Add Post",account_settings:"Account Settings",alerts:"Alerts",all:"All",author_tagline:"By {{author}}",appearance:"Appearance",back:"Back",category:"Category",categories:"Categories",clear:"Clear",collections:"Collections",comments:"Comments",data_sources:"Data Sources",data_import:"Data Import",deselect:"Deselect",edit_profile:"Edit Profile",edit_post_type:"Edit Survey",everyone:"Everyone",export:"Export",forbidden:"Access Denied",dashboard:"Dashboard",delete:"Delete",edit:"Edit",filters:"Filters",forgotyourpassword:"Forgot your password?",resetpassword:"Reset password",resetmypassword:"Reset my password",forms:"Forms",help:"Help",home:"Home",login:"Log in",logout:"Log out",registration:"Sign up",register:"Sign up",map_settings:"Map Settings",more:"More",notifications:"Notifications",only_author:"Only the author",only_you:"Only you",people:"People",permissions:"Permissions",plan_settings:"Plan",please_wait_loading:"Please wait. Loading...",plugins:"Plugins",posts:"Posts",posts_and_entities:"Surveys",profile:"My Profile",role:"Role",roles:"Roles",webhook:"Webhook",webhooks:"Webhooks",saved_searches:"Saved Searches",search:"Search",select_all:"Select all",selected_items:"{{selectedItems}} selected",settings:"Settings",survey_settings:"Survey settings",tags:"Categories",today:"Today",general:"General Settings",type:"Type",unknown:"Unknown",unselect_all:"Unselect All",user:"User",users:"Users",views:"Views",yesterday:"Yesterday"},views:{map:"Map",list:"Timeline",activity:"Activity",data:"Data"},post:{see_more_plural:"See {{newPostsCount}} new posts",see_more_singular:"See {{newPostsCount}} new post",add_to_form:"Add to {{form}}",posts:"Posts",there_are_no_posts:"There are no posts",in_this_deployment:" in this deployment, yet.",by:"by",task_completed:"Task completed",everyone:"Everyone",just_you:"Just you",specific_roles:"Specific roles...",can_see_this:"can see this",add_post_type:"Add {{form_name}}",edit_post_type:"Edit {{form_name}}",messages:{by_sms:"By SMS",by_email:"By Email",by_twitter:"By Twitter",reply:"Reply to Message thread",send:"Send New Message",save:"Save",title:"Conversation with author",associated_messages:"View messages associated with this post",show_only_incoming:"Show only {{provider}} not assigned to a survey yet ",imported_by:"{{messages}} imported by this deployment",Twitter:"Twitter",Email:"Email",SMS:"SMS"},post:"Post",message:"Message",message_thread:"Message Thread",all_posts:"All Posts",no_search_results:"Your search didn't match any posts",no_posts_yet:"There are no posts yet!",add_first_post:"Add the first post",create_post:"Create Post",create:"Create",change:"Change",posted_by:"Posted by",draft:"Under review",archived:"Archived",edited_by:"Edited by",export:"Export",select_all:"Select All",unselect_all:"Unselect All",per_page:"{{count}} posts",post_details:"Post Details",steps:"This post's tasks",mark_complete:"Mark as Complete",complete:"Complete",type_details:"{{type}} Details",edit_post:"Edit Post",history:"History",hide_form:"Hide {{form}}",hide_unknown_form:"Hide Unknown",publish:"Publish to...",publish_for_you:"You",publish_for_everyone:"Everyone",published:"Published",unpublished:"Unpublished",published_by:"Published by",can_see_this_post:"can see this post",location:"Location",categories:"Categories",status:"Status",type:"Type",view:"View",step:"Task",update:"Update",options:"Options",complete_draft:"Complete (Draft)",complete_published:"Complete (Published)",structure:"Structure",source:"via {{source}}",visible_to_public:"This post is visible to the public",visible_to_you:"This post is visible to just you and admins",visible_to_roles:"This post is visible to {{roles}}",show_only_form:"Show only {{form}}",show_only_unknown_form:"Show only Unknown",delete_post:"Delete post",delete_this_post:"Delete this post",delete_post_desc:"<strong>If you delete this post</strong>, all of its comments will also be deleted. Proceed with caution.",post_actions:{edit:"Edit",delete:"Delete",export:"Export",put_under_review:"Put under review",archive:"Archive",publish:"Publish"},created_at:"<strong>Created</strong> at",updated_at:"<strong>Last updated</strong> at",author:"Author",post_date:"Post date",change_author:"Change author",status_published:"Published",status_review:"Under review",status_archived:"Archived",locking:{unlocked:"Post successfully unlocked",unlock:"Unlock",lock_broken_by_other:"Your Post has been unlocked. Your current unsaved changes will be lost.",locked_message:"The report is locked because <strong>{{ user }}</strong> is working on it right now. Try editing a different post."},modify:{intro:"Select survey:",no_task_values:"There are currently no saved values for this task.",create_type:"Create {{type}}",edit_type:"Edit {{type}}: {{title}}",add_a_post:"Add a post",add_to_survey:"Add to this survey",edit_post:"Edit {{title}}",change_type:"Change type",incomplete_step:"To publish a post all required tasks must be marked as complete. The required task {{stage}} has not yet been marked complete",save_post:"Save Post",publish:"Publish to...",publish_to:"Publish to {{role}}",published_to:"Published to {{role}}",unpublish:"Revert to Draft",everyone:"Everyone",back:"Back",contact_info:"Enter your contact info (optional)",author_realname:"Name",author_email:"Email",form:{categories:"Categories",description:"Description",location:"Location",title:"Title",link:{name:"Link Name",url:"Link url",add_link:"Add Link"}}},preview:{private:"private",public:"public",read_more:"&nbsp;... Read&nbsp;More",tags:"Categories",post_actions:{post_actions:"Post Actions",select:"select",edit:"edit",set:"set",publish:"publish",unpublish:"unpublish",delete:"delete"}},valid:{no_changes:"You haven’t made any changes",invalid_state:'This post is currently in an invalid state. You\'ll need to complete all required tasks before you can re-publish this post. You can either complete the necessary tasks or give your post a different status, like "under review."',validation_fail:"Required fields are missing, these fields are marked with an * below.",title:{required:"A title is required",minlength:"Title is too short",maxlength:"Title is too long"},content:{required:"Description cannot be empty"},tags:{required:"Categories are required"},values:{required:'"{{label}}" is required',parse:'"{{label}}" could not be parsed',date:'"{{label}}" must be a date',number:'"{{label}}" must be a number'},author_name:{maxlength:"Name is too long"},author_email:{email:"Invalid email"}},media:{enter_a:"Enter a",youtube:" Youtube",current_url:"Current image",add_caption:"Add caption",upload:"Upload",add_photo:"Add photo",delete_photo:"Delete photo",replace_image:"Replace image"},video:{enter_a:"Enter a",or:" or ",vimeo:" Vimeo",video_url:" video URL"},unstructured:{add_survey:{info:"<strong>This post hasn't yet been assigned to a survey within your deployment.</strong> That's because it was submitted via {{source}}, which doesn't provide a way for the author to add their post to a specific survey.",choose:"Which survey would you like to add this post to?",title:"Add this post to a survey",save_and_edit:"Add to survey &amp; edit"},survey_title:"Unknown Survey"}},role:{add_role:"Add Role",edit_role:"Edit Role",name:"Name",description:"Description",save:"Save Role",save_add_another:"Save & Add Another",permissions:"Permissions",delete:"Delete",delete_role:"Delete this role",delete_role_desc:"<strong>If you delete this role</strong>, all of the users assigned to it will be assigned default permissions. Proceed with caution.",everyone:"Everyone",just_you:"Just you"},webhook:{add_webhook:"Add Role",edit_webhook:"Edit Role",name:"Name",shared_secret:"Shared Secret",url:"API URL",entity_type:"Entity Type",event_type:"Event Type",save:"Save Role",save_add_another:"Save & Add Another",delete:"Delete",delete_webhook:"Delete this webhook",delete_webhook_desc:"<strong>If you delete this webhook</strong>, all associated webhook events will be lost. Proceed with caution."},saved_search:{visible_to_public:"This Saved Search is visible to the public",visible_to_you:"This Saved Search is visible to just you and admins",visible_to_roles:"This Saved Search is visible to {{roles}}",featured:"Featured",featured_tooltip:'Featured searches appear to all users in <br>the "Saved Searches" menu'},collection:{visible_to_public:"This Collection is visible to the public",visible_to_you:"This Collection is visible to just you and admins",visible_to_roles:"This Collection is visible to {{roles}}"},set:{by:"by",clear_search:"Clear Search",create_collection:"Create Collection",create_new:" Create New",create_savedsearch:"Create Saved Search",description:"Description",delete_collection:"Delete this collection",delete_savedsearch:"Delete this Saved Search",default_viewing_mode:"Default viewing mode",edit_collection_settings:"Edit Collection",edit_search_settings:"Edit Saved Search",featured:"Featured",featured_collection:"This collection is featured",featured_collection_tooltip:'Featured Collections appear to all users in <br>the "Collections" menu',find_a_collection:"Find a collection...",find_a_saved_search:"Find a saved search...",delete_saved_searches:"Delete Saved Searches",add_to_collection:"Add to Collection",empty_list_collections:"No collections",empty_list_savedsearches:"No saved searches",collection_name:"Collection name",name_your_collection:"Name your collection...",name_savedsearch:"Saved Search name",visible_to_collection:"Who can see this Collection",visible_to_savedsearch:"Who can see this Saved Search",reset_savedsearch:"Reset Search",save_set:"Save Collection",save_savedsearch:"Save Search",update_savedsearch:"Update Search",edit_savedsearch:"Edit Search",set_settings:"Collection Settings",add_notification:"Add Notification",remove:"remove"},category:{add_tag:"Add Category",save_add_another:"Save & Add Another",delete_category:"Delete category",delete_this_category:"Delete this category",delete_category_desc:"<strong>If you delete this category</strong>, it will no longer be associated with any posts. Proceed with caution.",show_categories:"Show available categories",child_permissions:"Permissions for this category are managed by the parent category.",select_all:"Select All",choose_roles:"Choose Roles",create_tag:"Create Category",saved_tag:"Category saved.",deleted_tags:"Categories deleted.",manage_tags:"Manage Categories",edit_tag:"Edit Category",editor:{name:"Category Name",slug:"Category Link",slug_help:"If left blank, will be automatically generated from category name.",description:"Description",type:"Type",color:"Icon Color",icon:"Icon Name",roles_help:"Only selected roles will be able to view this category."},types:{category:"Category",status:"Status"},delete:"Delete"},tool:{manage_forms:"Manage Forms",manage_tags:"Manage Categories",manage_users:"Manage Users",manage_roles:"Manage Roles",manage_webhooks:"Manage Webhooks",manage_views:"Manage Views",manage_map_settings:"Manage Map Settings",manage_appearance_settings:"Manage Appearance Settings",manage_plugins:"Manage Plugins",appearance_settings:"Appearance Settings",map_settings:"Map Settings",site_settings:"Site Settings",settings:"Settings",tools:"Tools"},map_settings:{admin_map_settings:"Map Settings",saved_map_settings:"Map Settings saved."},settings:{appearance:"Appearance Settings",continue:"Continue",current_header:"Current background image",customize_your_new_deployment:"Customize your new deployment",embed:"Embed",embed_info:"To embed your map on another site use the code snippet below.",embed_code:'&lt;iframe width="500" height="400" src="{{url}}"&gt;&lt;/iframe&gt;',settings_list:{general:"General",general_desc:"Change your deployment's name, description, logo, and other details.",surveys:"Surveys",surveys_desc:"Create and configure the surveys your deployment collects.",data_sources:"Data Sources",data_sources_desc:"Configure email, SMS, and social media channels that help your deployment collect survey data.",import:"Import",import_desc:"Upload survey data to your deployment from a CSV file.",users:"Users",users_desc:"Create and manage the people that contribute to your deployment.",roles:"Roles",roles_desc:"Create and manage the type of permissions your users have on your deployment.",categories:"Categories",categories_desc:"Create and manage the categories people can put posts into for improved organization.",webhooks:"Webhooks",webhooks_desc:"Create webhooks that send Ushahidi Platform data to external applications when specific events are triggered.",plans:"Plans",plan_desc:"Your deployment's current plan is <strong>{{current_plan}}</strong>."},data_sources:{data_sources:"Data Sources",enable_provider_message:"Accept survey submissions from this source",hint_turn_on_off:"You can configure options for data sources, and then turn sources on and off.",hint_plugin_needs_configuring:"You need to configure this data source before you can enable it.",provider_options:"Options",configure:"Configure",options:"Options",saving_changes:"Saving",unavailable:'The datasource {{value}} is unavailable. <a href="/settings/plan">Upgrade your plan</a> to get it!'},deployment_delete_this:"Delete this deployment",deployment_delete:"Delete deployment",deployment_delete_info:"<strong>If you delete this deployment</strong>, all of its data will also be deleted. Proceed with caution.",deployment_name:"Deployment name",deployment_logo:"Deployment logo",map_default_baselayer:"Default base layer",map_clustering:"Combine nearby posts",map_default_latitude:"Default latitude",map_default_longitude:"Default longitude",map_default_zoom_level:"Default zoom level",map_default_location:"Default location",site:"Site Settings",site_email:"Contact email address",site_email_note:"Use caution, as this will be visible to anyone on your site.",site_description:"Describe your site",site_description_placeholder:"An optional one sentence description",site_timezone:"Site timezone",site_language:"Site language",site_private:"Make this deployment private",select_image:"Select image",saved_settings:"Deployment settings saved!",saved_map_settings:"Map settings saved!",features:{features:"Features",please_select_features:"Please select the features you would like to enable."},generic_field_error:"Invalid entry, please try again.",skip:"Skip this task",add_first_post:"Add Your First Post",add_first_post_subtitle:"A deployment is nothing until it has some content in it.",invite_people:"Or invite people to help you create posts.",add_new_users:"Add New Users",valid:{name:{required:"Site name is required"}}},data_import:{survey_field:"Survey field",csv_column:"CSV column",choose_which_column:"Choose which CSV column should be assigned to each survey field",each_survey_field:"Each of the survey's fields are listed below. Choose the column from your CSV file that you'd like to use to populate each of those fields.",status_explanation:"Ushahidi recognizes one of three post statuses: Published, Under review, and Archived. So be sure that each entry in the column you select has one of those three values.",defined_column:"Defined by a column in your CSV file...",imported_posts_status:"Imported posts should have their status...",marked_as:"Marked as...",see_imported_posts:"See imported posts",import_another_csv:"Import another CSV file",import_complete:"Your import is complete",complete_info:'The data from your CSV spreadsheet, <em>{{filename}}</em>, was successfully imported into your <a href="/settings/survey/{{form_id}}">{{form_name}}</a> survey.',import_another:"Import another CSV file",nearly_complete:"Your import is nearly complete",finish_info:"The data from your CSV spreadsheet is still being processed. You're welcome to leave this page or wait until the process is complete. Either way, we'll notify you when your data is ready.",next:"Next",configure_imported_posts:"Configure imported posts",configure_explanation:"Through this interface you can set values for the survey fields that were not mapped to entries in the CSV. These values will be the same for all imported posts.",import:"Import",import_explanation_csv:"Import the data from a CSV spreadsheet into your deployment as posts belonging to a specific survey",import_explanation_file_size:"The size for a single file is limited to 10 MB",import_explanation_format_location_1:"Geographic locations should be included as separate latitude and longitude columns in your CSV",import_explanation_required_fields:"All required survey fields must have an associated value set in the CSV. For example, if the field title is required then the field must be mapped to a CSV column where all rows of that column have a value set",configure_posts:"Configure Posts",configure_all_imported_posts:"Configure all imported posts",csv:"CSV",file_csv:"CSV file",import_csv:"Import CSV",import_to:"Import to ",choose_csv_file:"Choose CSV file",organize_data:"Organize data",organize_your_imported_data:"Assign CSV columns to post fields",assign_csv_message:"Assign CSV columns to post fields",csv_instructions:"Each of the column names from your CSV file are listed below. Choose the <strong>{{form_name}}</strong> field that you'd like each column to be imported to.",csv_instructions_required_fields:"Fields marked with a [*] are required and must be assigned a value.",csv_column_name:"CSV column name",post_type_title:"{{form_name}} field name",leave_empty:"Leave empty",cancel_import:"Cancel import",finish_import:"Finish import",which_survey:"which survey?"},user:{add_user:"Add User",edit_user:"Edit User",update_password:"Update Password",change_role:"Change Role",save:"Save User",save_add_another:"Save & Add Another",show_all_roles:"Show All Roles",cannot_delete_yourself:"You cannot delete your own user",cannot_change_your_own_role:"You cannot change your own role",confirm_password:"Confirm Password",delete_user:"Delete user",delete_this_user:"Delete this user",delete_user_desc:"<strong>If you delete this user</strong>, posts created by this user will no longer have author information. This cannot be undone. Proceed with caution.",edit_profile:"Edit Profile",save_profile:"Save Profile",cancel:"Cancel",email:"Email Address",failed_attempts:"Failed attempts: ",full_name:"Display Name",never:"Never",no_full_name:"No display name",number_of_users_shown:"Number of users shown",per_page:"{{count}} users",password:"Password",new_password:"New Password",register:"Register",role:"Role: ",roles:"Roles",saved_user:"User saved",deleted_user:"User deleted",search_and_filter:"Search & Filter Users",passwordreset_instructions:"Enter your email to request a password reset",passwordreset_confirm_instructions:"If your email exists in our database, you will receive a password recovery email soon.",token:"Password reset token",valid:{full_name:{required:"Display name is required",maxlength:"Display name is too long"},email:{required:"Email address is required",email:"This email address is invalid",maxlength:"This email address is too long"},password:{required:"Password is required",minlength:"This password is too short",maxlength:"This password is too long"}}},user_profile:{title:"account settings",update_password:"Update password",update_success:"Your profile was updated successfully. You may need to sign out and back in before all your changes are reflected.",button:{save:"Save &amp; close",cancel:"Cancel"},nav:{general:"General",notifications:"Notifications"}},user_create:{full_name:"Display Name",email:"Email Address",role:"Role"},notify:{contact:{save_success:"Contact saved",delete_confirm:"Do you want to remove your account?",error_message:"An error occurred while trying to remove your account",destroy_success:"Account removed successfully"},default:{proceed_warning:"This action cannot be undone. Please proceed with caution.",save_success:"Saved resource",save_error:"Unable to save resource, please try again",destroy_confirm:"Are you sure you want to delete this resource?",destroy_success:"Deleted resource",destroy_error:"Unable to delete resource, please try again",destroy_cancelled:"Delete cancelled",bulk_destroy_confirm:"Are you sure you want to delete {{count}} resources?",bulk_destroy_success:"Deleted resource",bulk_destroy_error:"Unable to delete resource, please try again",bulk_destroy_cancelled:"Delete cancelled"},data_import:{see_imported_posts:"See imported posts",file_missing:"Please choose a CSV file to upload.",form_missing:"Please select a Survey.",csv_upload:"File {{name}} successfully uploaded",csv_import_processed_errors:"<strong>Your CSV import</strong> is complete. {{processed}} records imported, {{errors}} records failed.",csv_import_success_info:'The data from your CSV spreadsheet, <em>{{filename}}</em>, was successfully imported into your <a href="/views/list">{{form_name}}</a> survey.',duplicate_fields:"Columns must be mapped to unique survey fields. The following columns have more than 1 mapping: {{duplicates}}",required_fields:"Required fields must be set to a value. The following fields have not been set: {{required}}",no_mappings:"No fields have been assigned mappings - at least one field must be mapped to continue",csv_import_cancel:"CSV import cancelled",csv_import_cancel_confirm:"Are you sure you want to cancel importing?"},general_settings:{save_success:"General settings saved"},map_settings:{save_success:"Map settings saved"},generic:{okay:"Ok",alerts:"Alerts",confirm:"Confirmation",save:"Save"},login:{failed:"Login failed, check your email and password."},register:{failed:"There were errors during registration. Check your input and try again.",success:"Registration complete! You can now log in.."},post:{delete_image_confirm:"Are you sure you want to remove this image?",save_success:"Post {{name}} saved",save_success_review:"Post {{name}} saved. Your post will be reviewed by a moderator before publishing.",save_error:"Unable to save post, please try again",publish_success:"Post has been published for {{role}}",set_draft:"Post is now visible to just you",publish_error:"Unable to publish post, please try again",unpublish_success:"Post has been unpublished",unpublish_error:"Unable to unpublish post, please try again",yes_confirm_delete:"Yes, delete this post",confirm_delete:"Confirm Delete",destroy_title:"Delete Post",delete_question:"Are you sure you want to delete your post {{post}}?",destroy_success:"Post deleted",destroy_success_bulk:"Posts deleted",destroy_confirm:"Are you sure you want to delete this post?",destroy_error:"Unable to delete post, please try again",bulk_destroy_confirm:"Are you sure you want to delete {{count}} posts?",stage_save_success:"Updated {{stage}}",export:"This will export filtered posts. Are you sure you want to continue?",update_status_success_bulk:"Status updated for {{count}} posts",leave_without_save:"Do you want to leave this report without saving?",leave_confirm_message:"If you continue, all of your changes will be lost",leave_confirm:"Continue without saving"},category:{save_success:"Saved category {{name}}",destroy_confirm:"Are you sure you want to delete this category?",destroy_confirm_desc:"Deleting this category will remove it from all existing posts. This action cannot be undone.",destroy_success:"Category deleted",destroy_error:"Unable to delete category, please try again",bulk_destroy_confirm:"Are you sure you want to delete {{count}} categories?",bulk_destroy_confirm_desc:"Deleting these categories will remove them from all existing posts. This action cannot be undone.",bulk_destroy_success:"{{count}} categories deleted"},role:{delete_question:"Are you sure you want to delete the role {{role}}?",destroy_success:"Role {{role}} deleted.",save_success:"Role {{role}} saved.",last_admin:"You can not delete the only admin role"},webhook:{delete_question:"Are you sure you want to delete the webhook {{webhook}}?",destroy_success:"Webhook {{webhook}} deleted.",save_success:"Webhook {{webhook}} saved."},datasource:{save_success:"Saved Data Source {{name}}"},user:{save_success:"User {{name}} saved",edit_success:"User {{name}} updated",destroy_confirm:"Are you sure you want to delete this user?",destroy_success:"User deleted",destroy_error:"Unable to delete user, please try again",bulk_destroy_confirm:"Are you sure you want to delete {{count}} users?",bulk_destroy_success:"Users deleted",bulk_role_change_confirm:"Are you sure you want to change the role of {{count}} users to {{role}}?",bulk_role_change_success:"User roles changed to {{role_name}}"},video:{incorrect_url:"The URL, {{url}}, you entered did not match either a Youtube or Vimeo URL format."},form:{add_to_survey:"Add to survey",save_success:"Survey {{name}} saved",save_stage_success:"Survey task {{name}} saved",save_attribute_success:"Field {{name}} added",edit_form_success:"Survey {{name}} updated",edit_stage_success:"Survey task {{name}} updated",delete_form_confirm:"Are you sure you want to delete this survey?",delete_form_confirm_desc:"This action cannot be undone. Deleting this survey will remove all of its data, including posts.",destroy_form_success:"Survey {{name}} deleted",delete_stage_confirm:"Are you sure you want to delete this task?",delete_stage_confirm_desc:"This action cannot be undone. Deleting this task will remove all of its fields, and any data in them.",destroy_stage_success:"Survey task {{name}} deleted",delete_attribute_confirm:"Are you sure you want to delete this field?",delete_attribute_confirm_desc:"This action cannot be undone. Deleting this field will remove its data from all existing posts.",destroy_attribute_success:"Field {{name}} deleted"},collection:{delete_collection_confirm:"Are you sure you want to delete this collection?",created_collection:"Collection {{collection}} created successfully",updated_collection:"Collection {{collection}} saved",add_to_collection:"Post has been added to {{collection}}",removed_from_collection:"Post has been removed from {{collection}}",bulk_add_to_collection:"{{count}} posts have been added to {{collection}}"},savedsearch:{delete_savedsearch_success:"Saved search deleted successfully.",delete_savedsearch_plural_success:"Saved searches deleted successfully.",delete_savedsearch_confirm:"Are you sure you want to delete this saved search?",savedsearch_updated:"{{savedsearch}} was updated",savedsearch_saved:"{{savedsearch}} was saved"},passwordreset:{failed:"Password reset failed",success:"Your password has been reset"},notification:{add:"You will now be notified when new posts are added to {{set}}",delete_confirm:"Are you sure you want to remove this notification?",destroy_success:"<strong>You will no longer receive notifications about</strong> {{name}}."},message:{sent_to:"Message sent to {{contact}}"},export:{in_progress:"<h3>Your CSV export is in progress...</h3>You can navigate away from this window, we'll let you know when your download is complete.",complete:"Your CSV export is complete.",complete_data_found_message:"The data from your export can be found in your browser's downloads"}},empty:{default:"No records found.",post:"No posts found.",user:"No users found.",category:"No categories found.",role:"No roles found.",webhook:"No webhooks found.",permission:"No permissions found.",form:"No forms found."},location:{search:"Search",use_current_location:"Use your current location",click_map:"<em>You can search or click the area of map where you want to place the marker.</em>",placeholder:"Search for addresses, place names, or coordinates...",search_results:"Search results",error:"Sorry we could not find a location matching your search"},notification:{title:"Notifications",contacts_heading:"How you get notifications",notifications_heading:"What you get notified about",error_message:"The notification could not be deleted at this time",send_to_address:"Send notifications to this address",button:{delete:"Delete notification"}},contact:{edit:"Edit",save_changes:"Save changes",saving_changes:"Saving changes",cancel_edit:"Cancel",add_phone_number:"Add a phone number",add_email_address:"Add an email address",edit_phone_number:"Edit your phone number",edit_email_address:"Edit your email address",error_message:"The contact could not be saved at this time",type:{phone:"Phone",email:"Email"},button:{add:"Add account",delete:"Remove account"},valid:{email:{required:"An email address is required to receive notifications",email:"This email address is invalid",maxlength:"This email address is too long"},phone:{required:"A phone number is required to receive notifications",pattern:"A valid phone number is required",minlength:"This number is too short",maxlength:"This number is too long"}}},terms_of_service:{title:"Ushahidi Terms of Service",terms_of_service:'We have updated our <a href="https://www.ushahidi.com/terms-of-service" target="_blank">Terms and Conditions</a> and <a href="https://www.ushahidi.com/privacy-policy" target="_blank">Privacy Policy</a>. Please review these documents carefully and accept the terms in order to continue to use Ushahidi\'s services.',agree:"I agree to Ushahidi's Terms of Service.",accept_and_continue:"Accept and Continue"},languages:{ach:"Acoli",ady:"Adyghe",af:"Afrikaans","af-ZA":"Afrikaans (South Africa)",ak:"Akan",sq:"Albanian","sq-AL":"Albanian (Albania)",aln:"Albanian Gheg",am:"Amharic","am-ET":"Amharic (Ethiopia)",ar:"Arabic","ar-EG":"Arabic (Egypt)","ar-SA":"Arabic (Saudi Arabia)","ar-SD":"Arabic (Sudan)","ar-SY":"Arabic (Syria)","ar-AA":"Arabic (Unitag)",an:"Aragonese",hy:"Armenian","hy-AM":"Armenian (Armenia)",as:"Assamese","as-IN":"Assamese (India)",ast:"Asturian","ast-ES":"Asturian (Spain)",az:"Azerbaijani","az@Arab":"Azerbaijani (Arabic)","az-AZ":"Azerbaijani (Azerbaijan)","az-IR":"Azerbaijani (Iran)","az@latin":"Azerbaijani (Latin)",bal:"Balochi",ba:"Bashkir",eu:"Basque","eu-ES":"Basque (Spain)",bar:"Bavarian",be:"Belarusian","be-BY":"Belarusian (Belarus)","be@tarask":"Belarusian (Tarask)",bn:"Bengali","bn-BD":"Bengali (Bangladesh)","bn-IN":"Bengali (India)",brx:"Bodo",bs:"Bosnian","bs-BA":"Bosnian (Bosnia and Herzegovina)",br:"Breton",bg:"Bulgarian","bg-BG":"Bulgarian (Bulgaria)",my:"Burmese","my-MM":"Burmese (Myanmar)",ca:"Catalan","ca-ES":"Catalan (Spain)","ca@valencia":"Catalan (Valencian)",ceb:"Cebuano",tzm:"Central Atlas Tamazight",hne:"Chhattisgarhi",cgg:"Chiga",zh:"Chinese","zh-CN":"Chinese (China)","zh-CN.GB2312":"Chinese (China) (GB2312)",gan:"Chinese (Gan)",hak:"Chinese (Hakka)","zh-HK":"Chinese (Hong Kong)",czh:"Chinese (Huizhou)",cjy:"Chinese (Jinyu)",lzh:"Chinese (Literary)",cmn:"Chinese (Mandarin)",mnp:"Chinese (Min Bei)",cdo:"Chinese (Min Dong)",nan:"Chinese (Min Nan)",czo:"Chinese (Min Zhong)",cpx:"Chinese (Pu-Xian)","zh-Hans":"Chinese Simplified","zh-TW":"Chinese (Taiwan)","zh-TW.Big5":"Chinese (Taiwan) (Big5) ","zh-Hant":"Chinese Traditional",wuu:"Chinese (Wu)",hsn:"Chinese (Xiang)",yue:"Chinese (Yue)",cv:"Chuvash",ksh:"Colognian",kw:"Cornish",co:"Corsican",crh:"Crimean Turkish",hr:"Croatian","hr-HR":"Croatian (Croatia)",cs:"Czech","cs-CZ":"Czech (Czech Republic)",da:"Danish","da-DK":"Danish (Denmark)",dv:"Divehi",doi:"Dogri",nl:"Dutch","nl-BE":"Dutch (Belgium)","nl-NL":"Dutch (Netherlands)",dz:"Dzongkha","dz-BT":"Dzongkha (Bhutan)",en:"English","en-AU":"English (Australia)","en-AT":"English (Austria)","en-BD":"English (Bangladesh)","en-BE":"English (Belgium)","en-CA":"English (Canada)","en-CL":"English (Chile)","en-CZ":"English (Czech Republic)","en-ee":"English (Estonia)","en-FI":"English (Finland)","en-DE":"English (Germany)","en-GH":"English (Ghana)","en-HK":"English (Hong Kong)","en-HU":"English (Hungary)","en-IN":"English (India)","en-IE":"English (Ireland)","en-lv":"English (Latvia)","en-lt":"English (Lithuania)","en-NL":"English (Netherlands)","en-NZ":"English (New Zealand)","en-NG":"English (Nigeria)","en-PK":"English (Pakistan)","en-PL":"English (Poland)","en-RO":"English (Romania)","en-SK":"English (Slovakia)","en-ZA":"English (South Africa)","en-LK":"English (Sri Lanka)","en-SE":"English (Sweden)","en-CH":"English (Switzerland)","en-GB":"English (United Kingdom)","en-US":"English (United States)",myv:"Erzya",eo:"Esperanto",et:"Estonian","et-EE":"Estonian (Estonia)",fo:"Faroese","fo-FO":"Faroese (Faroe Islands)",fil:"Filipino",fi:"Finnish","fi-FI":"Finnish (Finland)",frp:"Franco-Provençal (Arpitan)",fr:"French","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-CH":"French (Switzerland)",fur:"Friulian",ff:"Fulah","ff-SN":"Fulah (Senegal)",gd:"Gaelic, Scottish",gl:"Galician","gl-ES":"Galician (Spain)",lg:"Ganda",ka:"Georgian","ka-GE":"Georgian (Georgia)",de:"German","de-AT":"German (Austria)","de-DE":"German (Germany)","de-CH":"German (Switzerland)",el:"Greek","el-GR":"Greek (Greece)",kl:"Greenlandic",gu:"Gujarati","gu-IN":"Gujarati (India)",gun:"Gun",ht:"Haitian (Haitian Creole)","ht-HT":"Haitian (Haitian Creole) (Haiti)",ha:"Hausa",haw:"Hawaiian",he:"Hebrew","he-IL":"Hebrew (Israel)",hi:"Hindi","hi-IN":"Hindi (India)",hu:"Hungarian","hu-HU":"Hungarian (Hungary)",is:"Icelandic","is-IS":"Icelandic (Iceland)",io:"Ido",ig:"Igbo",ilo:"Iloko",id:"Indonesian","id-ID":"Indonesian (Indonesia)",ia:"Interlingua",iu:"Inuktitut",ga:"Irish","ga-IE":"Irish (Ireland)",it:"Italian","it-IT":"Italian (Italy)","it-CH":"Italian (Switzerland)",ja:"Japanese","ja-JP":"Japanese (Japan)",jv:"Javanese",kab:"Kabyle",kn:"Kannada","kn-IN":"Kannada (India)",pam:"Kapampangan",ks:"Kashmiri","ks-IN":"Kashmiri (India)",csb:"Kashubian",kk:"Kazakh","kk@Arab":"Kazakh (Arabic)","kk@Cyrl":"Kazakh (Cyrillic)","kk-KZ":"Kazakh (Kazakhstan)","kk@latin":"Kazakh (Latin)",km:"Khmer","km-KH":"Khmer (Cambodia)",rw:"Kinyarwanda",ky:"Kirgyz",tlh:"Klingon",kok:"Konkani",ko:"Korean","ko-KR":"Korean (Korea)",ku:"Kurdish","ku-IQ":"Kurdish (Iraq)",lad:"Ladino",lo:"Lao","lo-LA":"Lao (Laos)",ltg:"Latgalian",la:"Latin",lv:"Latvian","lv-LV":"Latvian (Latvia)",lez:"Lezghian",lij:"Ligurian",li:"Limburgian",ln:"Lingala",lt:"Lithuanian","lt-LT":"Lithuanian (Lithuania)",jbo:"Lojban","en@lolcat":"LOLCAT English",lmo:"Lombard",dsb:"Lower Sorbian",nds:"Low German",lb:"Luxembourgish",mk:"Macedonian","mk-MK":"Macedonian (Macedonia)",mai:"Maithili",mg:"Malagasy",ms:"Malay",ml:"Malayalam","ml-IN":"Malayalam (India)","ms-MY":"Malay (Malaysia)",mt:"Maltese","mt-MT":"Maltese (Malta)",mni:"Manipuri",mi:"Maori",arn:"Mapudungun",mr:"Marathi","mr-IN":"Marathi (India)",mh:"Marshallese",mw1:"Mirandese",mn:"Mongolian","mn-MN":"Mongolian (Mongolia)",nah:"Nahuatl",nv:"Navajo",nr:"Ndebele, South",nap:"Neapolitan",ne:"Nepali","ne-NP":"Nepali (Nepal)",nia:"Nias",nqo:"N'ko",se:"Northern Sami",nso:"Northern Sotho",no:"Norwegian",nb:"Norwegian Bokmål","nb-NO":"Norwegian Bokmål (Norway)","no-NO":"Norwegian (Norway)",nn:"Norwegian Nynorsk","nn-NO":"Norwegian Nynorsk (Norway)",ny:"Nyanja",oc:"Occitan (post 1500)",or:"Oriya","or-IN":"Oriya (India)",om:"Oromo",os:"Ossetic",pfl:"Palatinate German",pa:"Panjabi (Punjabi)","pa-IN":"Panjabi (Punjabi) (India)",pap:"Papiamento",fa:"Persian","fa-AF":"Persian (Afghanistan)","fa-IR":"Persian (Iran)",pms:"Piemontese","en@pirate":"Pirate English",pl:"Polish","pl-PL":"Polish (Poland)",pt:"Portuguese","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)",ps:"Pushto",ro:"Romanian","ro-RO":"Romanian (Romania)",rm:"Romansh",ru:"Russian","ru-ee":"Russian (Estonia)","ru-lv":"Russian (Latvia)","ru-lt":"Russian (Lithuania)","ru@petr1708":"Russian Petrine orthography","ru-RU":"Russian (Russia)",sah:"Sakha (Yakut)",sm:"Samoan",sa:"Sanskrit",sat:"Santali",sc:"Sardinian",sco:"Scots",sr:"Serbian","sr@Ijekavian":"Serbian (Ijekavian)","sr@ijekavianlatin":"Serbian (Ijekavian Latin)","sr@latin":"Serbian (Latin)","sr-RS@latin":"Serbian (Latin) (Serbia)","sr-RS":"Serbian (Serbia)",sn:"Shona",scn:"Sicilian",szl:"Silesian",sd:"Sindhi",si:"Sinhala","si-LK":"Sinhala (Sri Lanka)",sk:"Slovak","sk-SK":"Slovak (Slovakia)",sl:"Slovenian","sl-SI":"Slovenian (Slovenia)",so:"Somali",son:"Songhay",st:"Sotho, Southern","st-ZA":"Sotho, Southern (South Africa)",sma:"Southern Sami",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-419":"Spanish (Latin America)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-US":"Spanish (United States)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",su:"Sundanese",sw:"Swahili","sw-KE":"Swahili (Kenya)",ss:"Swati",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SE":"Swedish (Sweden)",tl:"Tagalog","tl-PH":"Tagalog (Philippines)",tg:"Tajik","tg-TJ":"Tajik (Tajikistan)",tzl:"Talossan",ta:"Tamil","ta-IN":"Tamil (India)","ta-LK":"Tamil (Sri-Lanka)",tt:"Tatar",te:"Telugu","te-IN":"Telugu (India)",tet:"Tetum (Tetun)",th:"Thai","th-TH":"Thai (Thailand)",bo:"Tibetan","bo-CN":"Tibetan (China)",ti:"Tigrinya",to:"Tongan",ts:"Tsonga",tn:"Tswana",tr:"Turkish","tr-TR":"Turkish (Turkey)",tk:"Turkmen","tk-TM":"Turkmen (Turkmenistan)",udm:"Udmurt",ug:"Uighur","ug@Arab":"Uighur (Arabic)","ug@Cyrl":"Uighur (Cyrillic)","ug@Latin":"Uighur (Latin)",uk:"Ukrainian","uk-UA":"Ukrainian (Ukraine)",vmf:"Upper Franconian",hsb:"Upper Sorbian",ur:"Urdu","ur-PK":"Urdu (Pakistan)",uz:"Uzbek","uz@Arab":"Uzbek (Arabic)","uz@Cyrl":"Uzbek (Cyrillic)","uz@Latn":"Uzbek (Latin)","uz-UZ":"Uzbek (Uzbekistan)",ve:"Venda",vec:"Venetian",vi:"Vietnamese","vi-VN":"Vietnamese (Viet Nam)",vls:"Vlaams",wa:"Walloon",war:"Wáray-Wáray",cy:"Welsh","cy-GB":"Welsh (United Kingdom)",fy:"Western Frisian","fy-NL":"Western Frisian (Netherlands)",wo:"Wolof","wo-SN":"Wolof (Senegal)",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu","zu-ZA":"Zulu (South Africa)"}}},function(e,exports,t){"use strict";t(44),t(268),t(306),t(310),t(309),t(312),t(296),t(308),t(297),t(299),t(303),t(324),t(921),t(920),window.d3=t(157),t(802),t(304),t(295),t(301),t(722),t(809),t(903),t(572),t(571),t(570),angular.module("ngRaven",[]),window.ushahidi=window.ushahidi||{};var n=window.ushahidi.backendUrl=(window.ushahidi.backendUrl||"undefined").replace(/\/$/,""),s=window.ushahidi.intercomAppId=window.ushahidi.intercomAppId||"",i=window.ushahidi.appStoreId=window.ushahidi.appStoreId||"",a=window.ushahidi.apiUrl=n+"/api/v3",o=window.ushahidi.platform_websocket_redis_adapter_url||"",r=["posts","media","forms","api","tags","savedsearches","sets","users","stats","layers","config","messages","notifications","webhooks","contacts","roles","permissions","csv","tos"];angular.module("app",["checklist-model","monospaced.elastic","ui.router","ngResource","LocalStorageModule","pascalprecht.translate","ui.bootstrap.pagination","angular-datepicker","angular.filter","ng-showdown","ngGeolocation","nvd3","angular-cache","linkify","ngRaven","ushahidi.common","ushahidi.main","ushahidi.settings","ui.bootstrap.dropdown"]).constant("CONST",{BACKEND_URL:n,API_URL:a,INTERCOM_APP_ID:s,APP_STORE_ID:i,DEFAULT_LOCALE:"en_US",OAUTH_CLIENT_ID:"ushahidiui",OAUTH_CLIENT_SECRET:"35e7f0bca957836d05ca0492211b0ac707671261",CLAIMED_ANONYMOUS_SCOPES:r,CLAIMED_USER_SCOPES:r.concat("dataproviders"),MAPBOX_API_KEY:window.ushahidi.mapboxApiKey||"pk.eyJ1IjoidXNoYWhpZGkiLCJhIjoiY2lxaXUzeHBvMDdndmZ0bmVmOWoyMzN6NiJ9.CX56ZmZJv0aUsxvH5huJBw",TOS_RELEASE_DATE:!!new Date(window.ushahidi.tosReleaseDate).toJSON()&&new Date(window.ushahidi.tosReleaseDate),PLATFORM_WEBSOCKET_REDIS_ADAPTER_URL:o}).config(["$compileProvider",function(e){e.debugInfoEnabled(!1)}]).config(["$locationProvider",function(e){e.html5Mode(!0).hashPrefix("!")}]).config(["$urlRouterProvider","$urlMatcherFactoryProvider",function(e,t){e.when("","/views/map"),e.when("/","/views/map"),e.otherwise("/404"),t.strictMode(!1)}]).config(["$showdownProvider",function(e){e.setOption("simplifiedAutoLink",!0),e.setOption("excludeTrailingPunctuationFromURLs",!0),e.setOption("openLinksInNewWindow",!0),e.setOption("tasklists",!0)}]).factory("_",function(){return t(944)}).factory("d3",function(){return window.d3}).factory("URI",function(){return t(292)}).factory("Leaflet",function(){var e=t(110);return t(702),t(701),e}).factory("moment",function(){return t(267)}).factory("io",function(){return t(936)}).factory("BootstrapConfig",["_",function(e){return window.ushahidi.bootstrapConfig?e.indexBy(window.ushahidi.bootstrapConfig,"id"):{map:{},site:{},features:{}}}]).run(["$rootScope","LoadingProgress",function(e,t){e.$on("$stateChangeError",console.log.bind(console)),t.watchTransitions()}]).run(["$rootScope",function(e){e.$on("$stateChangeError",console.log.bind(console))}]).run(function(){angular.element(document.getElementById("bootstrap-app")).removeClass("hidden"),angular.element(document.getElementById("bootstrap-loading")).addClass("hidden")})},function(e,exports,t){"use strict";e.exports=["$scope",function(e){}]},function(e,exports,t){"use strict";function n(e,t,n,s,i,a,o,r,l){function c(){e.currentUser=s.getSessionData()}function d(n,s){o.getTosEntry().then(function(){c(),e.loggedin=!0,p(),l.resetDefaults(),n&&t.url(n),s||a.reload()})}function u(n){e.currentUser=null,e.loggedin=!1,l.resetDefaults().then(function(){n&&t.url(n),a.go(a.$current.name?a.$current:"map",null,{reload:!0})})}function p(){"admin"===e.currentUser.email&&e.isAdmin()&&r.adminUserSetupModal()}var g=null;e.currentUser=null,e.loggedin=!1,function(){n.getLoginStatus()?d(!1,!0):u(!1)}(),e.hasManagePermission=function(){return!!e.isAdmin()||((e.currentUser||{}).permissions||{}).length>0},e.hasManageSettingsPermission=function(){return!!e.isAdmin()||i.intersection((e.currentUser||{}).permissions,["Manage Users","Manage Settings","Bulk Data Import"]).length>0},e.hasPermission=function(t){return!!e.isAdmin()||i.contains((e.currentUser||{}).permissions,t)},e.isAdmin=function(){return"admin"===(e.currentUser||{}).role},e.$on("event:authentication:login:succeeded",function(){d(g)}),e.$on("event:authentication:logout:succeeded",function(){u()}),e.$on("event:unauthorized",function(){var e=t.url();"/login"!==e&&(g=e),n.logout(!0),u(),n.openLogin()}),e.$on("event:forbidden",function(){if(n.getLoginStatus())t.url("/forbidden");else{var e=t.url();"/login"!==e&&(g=e,t.url("/forbidden")),n.openLogin()}})}e.exports=n,n.$inject=["$rootScope","$location","Authentication","Session","_","$state","TermsOfService","Notify","PostFilters"]},function(e,exports,t){"use strict";function n(e,t){e.factory("authInterceptor",s),t.interceptors.push("authInterceptor")}function s(e,t,n,s,i,a){function o(e){function a(t){var n=t.data.access_token;i.setSessionDataEntry("accessToken",n),i.setSessionDataEntry("accessTokenExpires",t.data.expires),i.setSessionDataEntry("grantType","client_credentials"),e.headers.Authorization="Bearer "+n,o.resolve(e)}var o=n.defer(),r={grant_type:"client_credentials",client_id:s.OAUTH_CLIENT_ID,client_secret:s.OAUTH_CLIENT_SECRET,scope:s.CLAIMED_ANONYMOUS_SCOPES.join(" ")};return t.invoke(["$http","Util",function(e,t){e.post(t.url("/oauth/token"),r).then(a,o.reject)}]),o.promise}function r(e){var t=n.defer();return d?d.then(function(n){e.headers.Authorization=n.headers.Authorization,t.resolve(e)},t.reject):(d=o(e),d.then(t.resolve,t.reject),d.finally(function(){d=null})),t.promise}function l(e){var t=n.defer();if(a.has(e,"params")&&e.params.ignore403&&(delete e.params.ignore403,e.ignorable=!0),-1!==e.url.indexOf("oauth/token")&&(e.ignorable=!0),-1===e.url.indexOf(s.API_URL))return t.resolve(e),t.promise;var o=i.getSessionDataEntry("accessToken"),r=i.getSessionDataEntry("accessTokenExpires"),l=Math.floor(Date.now()/1e3);return void 0!==o&&null!==o&&r>l&&(e.headers.Authorization="Bearer "+o),t.resolve(e),t.promise}function c(s){var i=n.defer();return 401===s.status||400===s.status?t.invoke(["Authentication","$http",function(t,n){if(t.getLoginStatus())e.$broadcast("event:unauthorized"),i.reject(s);else{if(s.config.ignorable)return i.reject(s),i.promise;r(s.config).then(function(e){i.resolve(n(e))},i.reject)}}]):403===s.status?(s.config.ignorable||e.$broadcast("event:forbidden"),i.reject(s)):i.reject(s),i.promise}var d=null;return{request:l,responseError:c}}e.exports=n,n.$inject=["$provide","$httpProvider"],s.$inject=["$rootScope","$injector","$q","CONST","Session","_"]},function(e,exports,t){"use strict";e.exports=["$rootScope","$http","$q","Util","CONST","Session","RoleEndpoint","UserEndpoint","PostLockEndpoint","_","ModalService",function(e,t,n,s,i,a,o,r,l,c,d){function u(e){a.setSessionDataEntries({userId:e.id,realname:e.realname,email:e.email,role:e.role,permissions:e.permissions,gravatar:e.gravatar,language:e.language}),g=!0}function p(){a.clearSessionData(),r.invalidateCache(),g=!1}var g=!1;return a.getSessionDataEntry("accessToken")&&"password"===a.getSessionDataEntry("grantType")&&a.getSessionDataEntry("userId")&&(a.getSessionDataEntry("accessTokenExpires")<=Math.floor(Date.now()/1e3)?p():g=!0),{login:function(r,l){var d={username:r,password:l,grant_type:"password",client_id:i.OAUTH_CLIENT_ID,client_secret:i.OAUTH_CLIENT_SECRET,scope:i.CLAIMED_USER_SCOPES.join(" ")},g=n.defer(),f=function(){g.reject(),p(),e.$broadcast("event:authentication:login:failed")},m=function(n){var i=n.data.access_token;a.setSessionDataEntry("accessToken",i),a.setSessionDataEntry("accessTokenExpires",n.data.expires),a.setSessionDataEntry("grantType","password"),t.get(s.apiUrl("/users/me")).then(function(t){o.query({name:t.data.role}).$promise.then(function(e){return t.data.permissions=c.isEmpty(e)?[]:e[0].permissions,t}).catch(function(e){return t.data.permissions=[],t}).finally(function(){u(t.data),e.$broadcast("event:authentication:login:succeeded"),g.resolve()})},f)};return t.post(s.url("/oauth/token"),d).then(m,f),g.promise},logout:function(t){l.unlock().$promise.finally(function(){p(),t||e.$broadcast("event:authentication:logout:succeeded")})},getLoginStatus:function(){return g},openLogin:function(){d.openTemplate("<login></login>","nav.login",!1,!1,!1,!1)}}}]},function(e,exports,t){"use strict";e.exports=["$scope",function(e){}]},function(e,exports,t){"use strict";function n(e,t){e.openLogin(),t.url("/")}e.exports=n,n.$inject=["Authentication","$location"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{},controller:s,template:t(577)}}function s(e,t,n,s,i,a){function o(){e.failed=!0,e.processing=!1,e.email="",e.password=""}function r(){o(),e.$parent.closeModal()}function l(){e.failed=!1,e.processing=!1,e.$parent.closeModal()}function c(n,s){e.processing=!0,t.login(n,s).then(l,o)}function d(){n.openReset()}e.email="",e.password="",e.failed=!1,e.processing=!1,e.loginSubmit=c,e.cancel=r,e.forgotPassword=d,e.showCancel=!1,function(){t.getLoginStatus()&&e.$parent.closeModal(),i.get({id:"site"},function(t){e.showCancel=!t.private})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","Authentication","PasswordReset","$location","ConfigEndpoint","ModalService"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:!0,controller:s,template:t(578)}}function s(e,t,n,s,i){function a(){e.processing=!1,i.notify("notify.passwordreset.success"),s.openLogin()}function o(t){e.failed=!0,e.processing=!1,i.apiErrors(t)}function r(){e.processing=!0,n.resetConfirm(e.token,e.password).then(a,o)}function l(){e.$parent.closeModal()}e.failed=!1,e.processing=!1,e.token=e.token||"",e.hasToken=!1,e.password="",e.submit=r,e.cancel=l,function(){s.getLoginStatus()&&e.$parent.closeModal(),e.hasToken=!!e.token}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$translate","PasswordReset","Authentication","Notify"]},function(e,exports,t){"use strict";e.exports=["PasswordReset","$location",function(e,t){e.openReset(),t.url("/")}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:!0,controller:s,template:t(579)}}function s(e,t,n){function s(){e.processing=!1,t.openResetConfirm()}function i(){e.processing=!0,t.reset(e.email).finally(s)}function a(){e.$parent.closeModal()}e.processing=!1,e.email="",e.submit=i,e.cancel=a,function(){n.getLoginStatus()&&e.$parent.closeModal()}(),e.processing=!1}e.exports=n,n.$inject=[],s.$inject=["$scope","PasswordReset","Authentication"]},function(e,exports,t){"use strict";e.exports=["$http","Util","ModalService",function(e,t,n){return{reset:function(n){var s={email:n};return e.post(t.apiUrl("/passwordreset"),s)},resetConfirm:function(n,s){var i={token:n,password:s};return e.post(t.apiUrl("/passwordreset/confirm"),i)},openReset:function(){n.openTemplate("<password-reset></password-reset>","nav.forgotyourpassword",!1,!1,!0,!1)},openResetConfirm:function(e){n.openTemplate("<password-reset-confirm></password-reset-confirm>","nav.resetpassword",!1,e,!0,!1)}}}]},function(e,exports,t){"use strict";function n(e,t){e.openRegister(),t.url("/")}e.exports=n,n.$inject=["Registration","$location"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{},controller:s,template:t(580)}}function s(e,t,n,s,i){function a(){e.processing=!0,s.register(e.realname,e.email,e.password).then(o,r)}function o(){e.failed=!1,e.processing=!1,i.success("notify.register.success"),n.openLogin()}function r(t){e.failed=!0,e.processing=!1,angular.forEach(t.data.errors,function(t){if(t.source&&t.source.pointer){var n=t.source.pointer.replace("/","");e.form[n]&&(e.form[n].$setValidity(t.title,!1),e.form[n].$validators[t.title]=function(){return!0})}}),i.apiErrors(t)}function l(){e.$parent.closeModal()}e.failed=!1,e.processing=!1,e.realname="",e.email="",e.password="",e.registerSubmit=a,e.cancel=l,function(){n.getLoginStatus()&&e.$parent.closeModal()}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$translate","Authentication","Registration","Notify"]},function(e,exports,t){"use strict";e.exports=["$rootScope","$http","$q","Util","$location","ModalService",function(e,t,n,s,i,a){return{register:function(i,a,o){var r={realname:i,email:a,password:o},l=n.defer(),c=function(t){l.reject(t),e.$broadcast("event:registration:register:failed")},d=function(t){e.$broadcast("event:registration:register:succeeded"),l.resolve(t)};return t.post(s.apiUrl("/register"),r).then(d,c),l.promise},openRegister:function(){a.openTemplate("<register></register>","nav.register",!1,!1,!0,!1)}}}]},function(e,exports,t){"use strict";var n=t(316),s=function(e){return e&&e.__esModule?e:{default:e}}(n);e.exports=["localStorageService",function(e){this.clearedSessionData={userId:void 0,realname:void 0,email:void 0,accessToken:void 0,accessTokenExpires:void 0,grantType:void 0,role:void 0,permissions:void 0,gravatar:void 0},this.sessionData=angular.copy(this.clearedSessionData);var t=this,n=function(n){(0,s.default)(n).forEach(function(t){e.set(t,n[t])});var i=angular.extend({},t.sessionData,n);t.sessionData=i},i=function(n,s){t.sessionData[n]=s,e.set(n,s)},a=function(e){return t.sessionData[e]},o=function(){return t.sessionData},r=function(){(0,s.default)(t.sessionData).forEach(function(t){e.remove(t)}),t.sessionData=angular.copy(t.clearedSessionData)};return function(){var n={};(0,s.default)(t.sessionData).forEach(function(t){n[t]=e.get(t)}),t.sessionData=n}(),{setSessionDataEntry:i,setSessionDataEntries:n,getSessionDataEntry:a,getSessionData:o,clearSessionData:r}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{},controller:s,template:t(581)}}function s(e,t,n,s,i,a,o){e.terms={accept:!1},e.tosSubmit=function(){e.terms.accept&&i.save({tos_version_date:o.TOS_RELEASE_DATE}).$promise.then(function(t){t.agreement_date&&e.$parent.confirm()})}}e.exports=n,n.$inject=[],s.$inject=["$scope","Authentication","TermsOfService","ModalService","TermsOfServiceEndpoint","Session","CONST"]},function(e,exports,t){"use strict";e.exports=["$http","Util","ModalService","Session","TermsOfServiceEndpoint","CONST","$rootScope","$q","Notify","moment",function(e,t,n,s,i,a,o,r,l,c){function d(e){var t=r.defer();return e.results.length&&c(e.results[0].agreement_date).isAfter(a.TOS_RELEASE_DATE)?t.resolve():l.confirmTos().then(function(){t.resolve()},function(){t.reject()}),t.promise}return{getTosEntry:function(){return a.TOS_RELEASE_DATE?i.get().$promise.then(function(e){return d(e)}):r.resolve(!0)}}}]},function(e,exports,t){"use strict";angular.module("ushahidi.common",["ushahidi.common.adaptive-input","ushahidi.common.dropdown","ushahidi.common.modal","ushahidi.common.custom-on-change","ushahidi.user-profile"]).service("Authentication",t(708)).service("Registration",t(718)).service("Session",t(719)).service("PasswordReset",t(715)).service("TermsOfService",t(721)).directive("login",t(711)).directive("register",t(717)).directive("passwordReset",t(714)).directive("passwordResetConfirm",t(712)).directive("termsOfService",t(720)).config(t(707)).run(t(706)).service("Notify",t(761)).service("SliderService",t(763)).directive("ushSlider",t(762)).service("ConfigEndpoint",t(767)).service("UserEndpoint",t(784)).service("FormEndpoint",t(774)).service("FormAttributeEndpoint",t(771)).service("FormRoleEndpoint",t(772)).service("FormStageEndpoint",t(773)).service("TagEndpoint",t(782)).service("RoleEndpoint",t(780)).service("WebhookEndpoint",t(785)).service("PermissionEndpoint",t(777)).service("DataProviderEndpoint",t(770)).service("MediaEndpoint",t(765)).service("MessageEndpoint",t(775)).service("PostEndpoint",t(778)).service("PostLockEndpoint",t(779)).service("CollectionEndpoint",t(766)).service("SavedSearchEndpoint",t(781)).service("DataImportEndpoint",t(769)).service("ContactEndpoint",t(768)).service("NotificationEndpoint",t(776)).service("TermsOfServiceEndpoint",t(783)).service("ViewHelper",t(796)).service("Features",t(786)).service("Util",t(795)).service("Maps",t(792)).service("Geocoding",t(787)).service("Languages",t(789)).service("IconManager",t(788)).service("FontAwesomeIcons",t(764)).service("MainsheetService",t(791)).service("ModalService",t(793)).service("TranslationService",t(794)).controller("navigation",t(729)).controller("PageMetadata",t(730)).controller("intercom",t(728)).service("LoadingProgress",t(790)).directive("publishSelector",t(754)).directive("listingToolbar",t(747)).directive("iconPicker",t(744)).directive("colorPicker",t(734)).directive("firstTimeConfig",t(742)).directive("ushMainsheetContainer",t(749)).directive("ushModalContainer",t(751)).directive("modalBody",t(750)).directive("layoutClass",t(746)).directive("embedOnly",t(737)).directive("ushLogo",t(756)).directive("filterSearchbar",t(740)).directive("filterRole",t(739)).directive("overflowToggle",t(741)).directive("focus",t(743)).directive("modeBar",t(753)).directive("fileUpload",t(738)).directive("roleSelector",t(755)).directive("addCategory",t(732)).directive("categorySelector",t(733)).directive("languageSwitch",t(745)).directive("loadingDots",t(748)).factory("socket",t(758)).constant("EVENT",{ACTIONS:{EDIT:"edit",DELETE:"delete"}}).factory("loading",t(757)).config(t(725)).config(t(726)).run(t(727)).config(t(724)).config(t(723)).run(t(759)).run(t(760)).run(["$templateCache",function(e){e.put("common/directives/mode-bar/ushahidi-logo.html",t(599))}]),t(731),t(736),t(752),t(735),t(800)},function(e,exports,t){"use strict";e.exports=["$stateProvider","$urlMatcherFactoryProvider",function(e,n){n.strictMode(!1),e.state({name:"login",url:"/login",controller:t(710),template:""}).state({name:"forbidden",url:"/forbidden",controller:t(709),template:t(576)}).state({name:"register",url:"/register",controller:t(716),template:""}).state({name:"forgotpassword",url:"/forgotpassword",controller:t(713),template:""}).state({name:"forgotpassword.confirm",url:"/forgotpassword/confirm",controller:t(254),template:""}).state({name:"forgotpassword.confirm.token",url:"/forgotpassword/confirm/:token",controller:t(254),template:""}).state({name:"404",url:"/404",controller:t(705),template:t(575)})}]},function(e,exports,t){"use strict";e.exports=["CacheFactoryProvider",function(e){angular.extend(e.defaults,{maxAge:9e5,cacheFlushInterval:36e5,storageMode:"localStorage",storagePrefix:"ush-caches.",deleteOnExpire:"aggressive"})}]},function(e,exports,t){"use strict";e.exports=["$httpProvider",function(e){e.interceptors.push("loading")}]},function(e,exports,t){"use strict";e.exports=["$translateProvider",function(e){e.useSanitizeValueStrategy("escaped"),e.translations("en",t(703)),e.useStaticFilesLoader({prefix:"locales/",suffix:".json"}),e.preferredLanguage("en"),e.fallbackLanguage("en")}]},function(e,exports,t){"use strict";e.exports=["$templateCache",function(e){e.put("uib/template/pagination/pagination.html",t(582))}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","UserEndpoint","ConfigEndpoint","$q","$window","$location",function(e,t,n,s,i,a,o){t.$on("event:authentication:login:succeeded",function(){a.self===a.top&&e.startIntercom()}),e.startIntercom=function(){""!==a.ushahidi.intercomAppId&&i.all([s.get({id:"site"}).$promise,n.getFresh({id:"me"}).$promise]).then(function(e){var t=e[0],n=e[1],s=o.host();a.Intercom("boot",{app_id:a.ushahidi.intercomAppId,email:n.email,created_at:n.created,user_id:s+"_"+n.id,deployment_url:s,realname:n.realname,last_login:n.last_login,role:n.role,company:{name:t.name,id:s,created_at:0,plan:t.tier}})})},t.$on("event:authentication:logout:succeeded",function(){e.stopIntercom()}),e.stopIntercom=function(){""!==a.ushahidi.intercomAppId&&a.Intercom("shutdown")}}]},function(e,exports,t){"use strict";function n(e,t,n,s,i){function a(){t.get({id:"site"}).$promise.then(function(e){o.site=e})}var o=this;o.site=n,o.reloadSiteConfig=a,function(){i.loadFeatures().then(function(){o.activityIsAvailable=i.isViewEnabled("activity"),o.planIsAvailable=i.isViewEnabled("plan")}),a()}(),s.$on("event:update:header",a)}e.exports=n,n.$inject=["Authentication","ConfigEndpoint","BootstrapConfig","$rootScope","Features"]},function(e,exports,t){"use strict";e.exports=["$rootScope","$location","$window","$scope","Authentication","ConfigEndpoint",function(e,t,n,s,i,a){s.siteTitle="Ushahidi",s.pageTitle=null,s.pageDescription=null,s.pageKeywords=null,s.pageRobots=null,s.appStoreId=n.ushahidi.appStoreId,s.currentFullUrl=t.absUrl(),s.reloadSiteConfig=function(){a.get({id:"site"}).$promise.then(function(e){s.siteTitle=e.name?e.name:"Ushahidi"})},e.$on("event:update:header",function(){s.reloadSiteConfig()}),s.reloadSiteConfig(),e.$on("setPageTitle",function(e,t){s.pageTitle=null,t&&t.length&&(s.pageTitle=t+" - ")}),e.$on("setPageDescription",function(e,t){s.pageDescription=null,t&&t.length&&(s.pageDescription=t)}),e.$on("setPageKeywords",function(e,t){s.pageKeywords=null,t&&t.length&&(s.pageKeywords=t)}),e.$on("setPageRobots",function(e,t){s.pageRobots=null,t&&(!0===t?s.pageRobots="index, follow":!1===t?s.pageRobots="noindex, nofollow":t.length&&(s.pageRobots=t))})}]},function(e,exports,t){"use strict";angular.module("ushahidi.common.adaptive-input",[]).directive("adaptiveForm",function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,t,n){this.classAdd=function(e){t.addClass(e)},this.classRemove=function(e){t.removeClass(e)}}]}}).directive("adaptiveInput",function(){return{require:"?^adaptiveForm",restrict:"A",link:function(e,t,n,s){function i(e){e.preventDefault(),s.classAdd("focus")}function a(e){e.preventDefault(),s.classRemove("focus"),t.val()||s.classRemove("value")}!function(){t.bind("focus",i),t.bind("blur",a)}(),e.$watch(n.ngModel,function(e){e&&s.classAdd("value")})}}})},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{formId:"=",attribute:"=",postValue:"="},controller:s,template:t(583)}}function s(e,t,n,s,i){t.showInput=!1,t.categoryName="",t.category={type:"category",icon:"tag",color:"",parent_id:null,forms:[t.formId]},function(){t.userCanAddCategory=e.hasPermission("Manage Settings")}(),t.showInputToggle=function(){t.categoryName="",t.showInput=!t.showInput},t.saveCategory=function(e){e.preventDefault(),t.category.tag=t.categoryName,t.category.slug=t.categoryName,n.saveCache(t.category).$promise.then(function(e){if(e.id){t.attribute.options.push(e),t.postValue.push(e.id);var n=angular.copy(t.attribute);n.options=n.options.map(function(e){return e.id}),n.formId=t.formId,s.saveCache(n).$promise.then(function(e){t.categoryName=""}),i.notify("category added",{response:e})}},function(e){i.apiErrors(e)})}}e.exports=n,n.$inject=[],s.$inject=["$rootScope","$scope","TagEndpoint","FormAttributeEndpoint","Notify"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{available:"=",selected:"=",form:"="},controller:s,template:t(584)}}function s(e,t){function n(){return t.each(e.available,function(n){n.children.length>0&&(n.children=t.chain(n.children).map(function(n){return t.findWhere(e.available,{id:n.id})}).filter().value())})}function s(){e.form&&e.form.$setDirty(),e.available.length===e.selected.length?e.selected.length=[]:t.each(e.available,function(n){t.contains(e.selected,n.id)||e.selected.push(n.id)})}function i(n){e.selected.includes(n.id)?e.selected=t.filter(e.selected,function(e){return e!==n.id}):(e.selected.push(n.id),e.selected.includes(n.parent.id)||e.selected.push(n.parent.id))}function a(n){e.selected.includes(n.id)?(e.selected=t.filter(e.selected,function(e){return e!==n.id}),n.children&&n.children.length&&t.each(n.children,function(n){e.selected=t.filter(e.selected,function(e){return e!==n.id})})):e.selected.push(n.id)}function o(){t.each(e.categories,function(n){t.chain(n.children).pluck("id").intersection(e.selected).value().length>0?(e.disabledCategories[n.id]=!0,t.contains(e.selected,n.id)||e.selected.push(n.id)):e.disabledCategories[n.id]=!1})}e.selectAll=s,e.selectChild=i,e.selectParent=a,e.disabledCategories=[],e.changeCategories=o,function(){null===e.selected[0]&&(e.selected=[]),e.categories=n(),e.categories=t.filter(e.categories,function(e){return null===e.parent_id}),e.changeCategories()}()}e.exports=n,n.$inject=[],s.$inject=["$scope","_"]},function(e,exports,t){"use strict";e.exports=[function(){var e=["$scope","$translate",function(e,t){e.color="#eee",e.$watch("colorContainer.color",function(){e.colorContainer.color&&(e.color=e.colorContainer.color.replace("#",""))}),e.setColor=function(t){e.colorContainer.color=t.indexOf("#")>-1?t:"#"+t}}];return{restrict:"E",replace:!0,template:t(585),scope:{colorContainer:"="},controller:e}}]},function(e,exports,t){"use strict";angular.module("ushahidi.common.custom-on-change",[]).directive("customOnChange",function(){return{restricet:"A",link:function(e,t,n){var s=e.$eval(n.customOnChange);t.bind("change",s)}}})},function(e,exports,t){"use strict";angular.module("ushahidi.common.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"active",toggleOpenClass:"active",menuOpenClass:"active"}).service("dropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t){n||(e.bind("click",s),e.bind("keydown",i)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t){n===t&&(n=null,e.unbind("click",s),e.unbind("keydown",i))};var s=function(e){if(n&&(!e||"disabled"!==n.getAutoClose())){var s=n.getToggleElement();if(!(e&&s&&s[0].contains(e.target))){var i=n.getDropdownElement();e&&"outsideClick"===n.getAutoClose()&&i&&i[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},i=function(e){27===e.which?(n.focusToggleElement(),s()):n.isKeynavEnabled()&&/(38|40)/.test(e.which)&&n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.focusDropdownEntry(e.which))}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,s,i,a,o,r,l,c){var d,u,p=this,g=e.$new(),f=s.openClass,m=s.toggleOpenClass,v=s.menuOpenClass,h=angular.noop,b=t.onToggle?n(t.onToggle):angular.noop,y=!1,w=!1;this.init=function(s){p.$element=s,t.isOpen&&(u=n(t.isOpen),h=u.assign,e.$watch(u,function(e){g.isOpen=!!e})),y=angular.isDefined(t.dropdownAppendToBody),w=angular.isDefined(t.keyboardNav),y&&p.dropdownMenu&&(r.find("body").append(p.dropdownMenu),s.on("$destroy",function(){p.dropdownMenu.remove()}))},this.toggle=function(e){return g.isOpen=arguments.length?!!e:!g.isOpen},this.isOpen=function(){return g.isOpen},g.getToggleElement=function(){return p.toggleElement},g.getAutoClose=function(){return t.autoClose||"always"},g.getElement=function(){return p.$element},g.isKeynavEnabled=function(){return w},g.focusDropdownEntry=function(e){var t=p.dropdownMenu?angular.element(p.dropdownMenu).find("a"):angular.element(p.$element).find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(p.selectedOption)?p.selectedOption=p.selectedOption===t.length-1?p.selectedOption:p.selectedOption+1:p.selectedOption=0;break;case 38:if(!angular.isNumber(p.selectedOption))return;p.selectedOption=0===p.selectedOption?0:p.selectedOption-1}t[p.selectedOption].focus()},g.getDropdownElement=function(){return p.dropdownMenu},g.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},g.$watch("isOpen",function(t,n){if(y&&p.dropdownMenu){var s=o.positionElements(p.$element,p.dropdownMenu,"bottom-left",!0),r={top:s.top+"px",display:t?"block":"none"};p.dropdownMenu.hasClass("dropdown-menu-right")?(r.left="auto",r.right=window.innerWidth-(s.left+p.$element.prop("offsetWidth"))+"px"):(r.left=s.left+"px",r.right="auto"),p.dropdownMenu.css(r)}if(a[t?"addClass":"removeClass"](p.$element,f).then(function(){angular.isDefined(t)&&t!==n&&b(e,{open:!!t})}),p.toggleElement&&m&&a[t?"addClass":"removeClass"](p.toggleElement,m),p.dropdownMenu&&v&&a[t?"addClass":"removeClass"](p.dropdownMenu,v),t)p.dropdownMenuTemplateUrl&&c(p.dropdownMenuTemplateUrl).then(function(e){d=g.$new(),l(e.trim())(d,function(e){var t=e;p.dropdownMenu.replaceWith(t),p.dropdownMenu=t})}),g.focusToggleElement(),i.open(g);else{if(p.dropdownMenuTemplateUrl){d&&d.$destroy();var u=angular.element('<ul class="dropdown-menu"></ul>');p.dropdownMenu.replaceWith(u),p.dropdownMenu=u}i.close(g),p.selectedOption=null}h(e,t)}),e.$on("$locationChangeSuccess",function(){"disabled"!==g.getAutoClose()&&(g.isOpen=!1)}),e.$on("$destroy",function(){g.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,s){s.init(t),t.addClass("dropdown")}}}).directive("dropdownMenu",function(){return{restrict:"A",require:"?^dropdown",link:function(e,t,n,s){if(s){var i=n.templateUrl;i&&(s.dropdownMenuTemplateUrl=i),s.dropdownMenu||(s.dropdownMenu=t),n.unpositioned&&e.$watch(function(){return null!==t[0].offsetParent},function(e){if(e){var n=t[0].offsetParent.offsetLeft+t[0].parentElement.offsetLeft,s={left:n+"px"};t.css(s)}})}}}}).directive("keyboardNav",function(){return{restrict:"A",require:"?^dropdown",link:function(e,t,n,s){t.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var n=angular.element(t).find("a");switch(e.keyCode){case 40:angular.isNumber(s.selectedOption)?s.selectedOption=s.selectedOption===n.length-1?s.selectedOption:s.selectedOption+1:s.selectedOption=0;break;case 38:s.selectedOption=0===s.selectedOption?0:s.selectedOption-1}n[s.selectedOption].focus()}})}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,s){if(s){t.addClass("dropdown-toggle"),s.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){s.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(s.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}})},function(e,exports,t){"use strict";function n(){return{restrict:"A",controller:s}}function s(e,t,n,s,i,a){var o=a.self!==a.top;o&&"false"===n.embedOnly?t.addClass("hidden"):o||"true"!==n.embedOnly||t.addClass("hidden")}e.exports=n,n.$inject=[],s.$inject=["$scope","$element","$attrs","$rootScope","_","$window"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",template:t(586),replace:!0,scope:{container:"=",model:"="},controller:["$scope","$attrs",function(e,t){e.required=void 0!==t.required,e.uploadFile=function(t){e.container.file=t.target.files[0];var n=new FileReader;n.onload=function(){var t=n.result;e.container.dataURI=t,e.container.changed=!0,e.container.deleted=!1,e.model="changed",e.$apply()},n.readAsDataURL(t.target.files[0])}}]}}e.exports=n},function(e,exports,t){"use strict";e.exports=[function(){var e=["$scope","$rootScope","$translate","RoleEndpoint",function(e,t,n,s){s.query().$promise.then(function(t){e.roles=t})}];return{restrict:"E",replace:!0,template:t(587),scope:{model:"="},controller:e}}]},function(e,exports,t){"use strict";e.exports=["$timeout",function(e){var n=function(t,n,s,i){t.searchResultsVisible=!1,t.form=i,t.showSearchResults=function(){t.searchResultsVisible=!0},t.hideSearchResults=function(){e(function(){t.searchResultsVisible=!1},100)}};return{restrict:"E",replace:!0,template:t(588),scope:{model:"=",placeholderEntity:"=",onClear:"&"},link:n,require:"?^form"}}]},function(e,exports,t){"use strict";function n(e){function t(t,n,s){var i=n[0].querySelector(".form-field-toggle"),a=angular.bind({},e(s.hasOverflow),t);t.$watch(a,function(e){n.toggleClass("has-overflow",e)}),angular.element(i).on("click",function(e){e.preventDefault(),a()&&n.toggleClass("show-overflow")})}return{restrict:"A",link:t}}e.exports=n,n.$inject=["$parse"]},function(e,exports,t){"use strict";e.exports=["$q","$http","$rootScope","ConfigEndpoint","_","Notify","Util","Languages",function(e,n,s,i,a,o,r,l){return{restrict:"E",template:t(589),scope:!0,link:function(t,l,c){t.modalOpen=!1,t.site={},t.saving_config=!1,t.step="customize",t.fileContainer={file:null};var d=function(){i.get({id:"site"},function(e){t.site=e,t.hasName=!!e.name,a.contains(e.allowed_privileges,"update")&&e.first_login&&(t.modalOpen=!0)})};s.loggedin&&d(),s.$on("event:authentication:login:succeeded",function(){d()}),t.skip=function(){i.update({id:"site",first_login:!1},function(){t.step="first-post"})},t.closeModal=function(){t.modalOpen=!1},t.clearHeader=function(){t.site.image_header=null};var u=function(){s.$broadcast("event:update:header")},p=function(){var s=e.defer();if(t.fileContainer.file){var i=new FormData;i.append("file",t.fileContainer.file),n.post(r.apiUrl("/media"),i,{headers:{"Content-Type":void 0}}).then(function(e){t.site.image_header=e.data.original_file_url,s.resolve()})}else s.resolve();return s.promise};t.updateConfig=function(){t.saving_config=!0,t.site.first_login=!1,p().then(function(){i.saveCache(t.site).$promise.then(function(e){t.saving_config=!1,t.step="first-post",u()})},function(e){o.apiErrors(e)})}}}}]},function(e,exports,t){"use strict";function n(e){return{restrict:"A",link:function(t,n,s){t.$watch(s.focus,function(t){t&&e(function(){n[0].focus()})})}}}e.exports=n,n.$inject=["$timeout"]},function(e,exports,t){"use strict";e.exports=["IconManager",function(e){return{restrict:"E",template:t(590),replace:!0,scope:{model:"=?ngModel",iconLibName:"="},link:function(t,n,s){t.iconSet=e.getIconSetArray(s.iconLibName),t.setIcon=function(e){t.model=e}}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{site:"=?"},controller:s,template:t(591)}}function s(e,t,n){function s(e){n.setLanguage(e),n.translate(e)}e.changeLanguage=s,e.$on("event:authentication:login:succeeded",n.setStartLanguage),e.$on("event:authentication:logout:succeeded",n.setStartLanguage),function(){t.then(function(t){e.languages=t})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","Languages","TranslationService"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{layout:"@"},controller:s}}function s(e,t,n,s){var i=n.self!==n.top,a=!!s.currentUrl()&&s.currentUrl().indexOf("map")>0;i?i&&a?t.setLayout("layout-embed"):t.setLayout("layout-embed layout-"+e.layout):t.setLayout("layout-"+e.layout)}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope","$window","Util"]},function(e,exports,t){"use strict";e.exports=[function(){var e=["$scope","$rootScope","$translate","_",function(e,t,n,s){e.selectAll=function(){Array.prototype.splice.apply(e.selectedSet,[0,e.selectedSet.length].concat(s.pluck(e.entities,"id")))},e.deselectAll=function(){e.selectedSet.splice(0)}}];return{restrict:"E",template:t(592),replace:!0,transclude:!0,scope:{entities:"=",selectedSet:"="},controller:e}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{buttonClass:"@",label:"=",disabled:"="},controller:s,template:t(593)}}function s(e){}e.exports=n,n.$inject=[],s.$inject=["$scope"]},function(e,exports,t){"use strict";function n(e,n,s){function i(t,i){function a(n){return n?n.constructor!==e.constructor?angular.extend(e.$new(),n):n.$new():t.$new()}function o(e,i,o,u){l(),c=a(u),c.closeMainsheet=r,d.html(i),n(d)(c),t.title=o,t.showMainsheet=!0,s.setState(!0)}function r(){t.showMainsheet=!1,s.setState(!1),l()}function l(){c&&c.$destroy(),d.html("")}t.closeMainsheet=r,t.showMainsheet=!1,t.title="";var c,d=i.find("mainsheet-content");s.onOpen(o,t),s.onClose(r,t)}return{restrict:"E",scope:!0,template:t(594),link:i}}e.exports=n,n.$inject=["$rootScope","$compile","MainsheetService"]},function(e,exports,t){"use strict";function n(e){function t(t,n){function s(){n.css("max-height",i())}function i(){return.66*e.innerHeight+"px"}function a(){s(),t.$digest()}s(),angular.element(e).bind("resize",a),t.$on("$destroy",function(t){angular.element(e).unbind("resize",a)})}return{restrict:"AC",link:t}}e.exports=n,n.$inject=["$window"]},function(e,exports,t){"use strict";function n(e,n,s,i,a){function o(e,o){function r(t){return t?t.constructor!==n.constructor?angular.extend(n.$new(),t):t.$new():e.$new()}function l(t,a,o,l,u,v,h){d(),g=r(u),g.closeModal=c,m.html(a),s(m)(g),e.title=o,e.icon=l?f+"#"+l:l,e.closeOnOverlayClick=void 0===v||v,e.showCloseButton=void 0===h||h,p(),e.classVisible=!0,i.setState(!0),n.toggleModalVisible(!0)}function c(){e.classVisible=!1,n.toggleModalVisible(!1),i.setState(!1),d()}function d(){g&&g.$destroy(),m.html("")}function u(t){"overlay"===t&&!0!==e.closeOnOverlayClick||(a.close(),c())}function p(){var t=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop;e.modalOffset=t+40+"px"}e.classVisible=!1,e.modalOffset=0,e.title="",e.icon=!1,e.closeOnOverlayClick=!0,e.showCloseButton=!0,e.closeButtonClicked=u;var g,f=t(0),m=o.find("modal-content");i.onOpen(l,e),i.onClose(c,e)}return{restrict:"E",template:t(595),scope:!0,link:o}}e.exports=n,n.$inject=["$timeout","$rootScope","$compile","ModalService","SliderService"]},function(e,exports,t){"use strict";angular.module("ushahidi.common.modal",[]).directive("modal",["$translate","$rootScope",function(e,n){return{restrict:"E",transclude:!0,template:t(596),scope:{title:"@?",icon:"=?",visible:"=?",closeOnOverlayClick:"=?",showCloseButton:"=?"},controller:["$scope","$attrs","$parse","$timeout",function(s,i,a,o){s.iconPath=s.icon?"/img/iconic-sprite.svg#"+s.icon:"";var r=null;s.iconPath=t(0)+"#"+s.icon,s.classVisible=!1,s.modalOffset=0,s.title=e.instant(s.title),void 0===s.closeOnOverlayClick&&(s.closeOnOverlayClick=!0),void 0===s.showCloseButton&&(s.showCloseButton=!0),s.$watch("visible",function(e,t){if(!0===e){if(!s.classVisible){s.classVisible=!0,n.toggleModalVisible();var i=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop;s.modalOffset=i+40+"px",r&&o.cancel(r)}}else!1===e&&s.classVisible&&(s.classVisible=!1,n.toggleModalVisible(),r&&o.cancel(r),r=o(function(){s.classDetached=!0},400))}),s.closeModal=function(e){"overlay"===e&&!0!==s.closeOnOverlayClick||(s.visible=!1)},s.$on("$destroy",function(e){r&&o.cancel(r)})}]}}])},function(e,exports,t){"use strict";e.exports=["Features","Authentication","Registration","ModalService","$rootScope","ConfigEndpoint","CollectionsService",function(e,n,s,i,a,o,r){return{restrict:"E",replace:!0,scope:{currentUser:"="},template:t(597),link:function(l,c,d){function u(){i.openTemplate("<account-settings></account-settings>","",!1,!1,!0,!0)}function p(){i.openTemplate(t(598),"",!1,!1,!0,!0)}function g(){l.moreActive=!l.moreActive}function f(){l.moreActive=!1}l.moreActive=!1,l.isActivityAvailable=!1,l.canRegister=!1,l.hasManageSettingsPermission=a.hasManageSettingsPermission,l.showMore=g,l.viewCollectionListing=r.showCollectionList,l.viewAccountSettings=u,l.viewSupportLinks=p,l.login=n.openLogin,l.logout=n.logout,l.register=s.openRegister,function(){l.$on("$locationChangeStart",f),e.loadFeatures().then(function(){l.isActivityAvailable=e.isViewEnabled("activity")}),o.get({id:"site"},function(e){l.canRegister=!e.private})}()}}}]},function(e,exports,t){"use strict";e.exports=[function(){var e=["$scope","$rootScope","$translate","Notify","RoleEndpoint","_",function(e,t,n,s,i,a){e.showRoles=!!e.post.published_to.length,e.canSeeThis=function(){return e.post.published_to&&e.post.published_to.length?a.map(e.post.published_to,function(t){return e.roles[t].display_name}).join(", "):"draft"===e.post.status?n.instant("post.just_you"):n.instant("post.everyone")},i.query().$promise.then(function(t){e.roles=a.indexBy(t,"name")}),e.checkIfAllSelected=function(){return e.roles.length===e.post.published_to.length},e.toggleRole=function(t){"draft"===t||""===t?(e.post.published_to=[],e.showRoles=!1):e.checkIfAllSelected()&&(e.post.published_to=[],e.showRoles=!1),e.post.status="draft"===t?t:"published"},e.toggleRolesView=function(){e.showRoles=!0}}];return{restrict:"E",template:t(600),scope:{post:"="},controller:e}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{model:"=",title:"="},controller:s,template:t(601)}}function s(e,t,n){function s(){e.model.role=[]}e.setEveryone=s,function(){t.query().$promise.then(function(t){e.roles=t})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","RoleEndpoint","$translate"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",controller:s,replace:!0,template:t(602)}}function s(){}e.exports=n,n.$inject=[],s.$inject=[]},function(e,exports,t){"use strict";function n(e,t,n){return{request:function(t){return!0!==e.getLoadingState()&&e.setLoadingState(!0),"PUT"===t.method&&-1===t.url.indexOf("lock")&&e.setSavingState(!0),t},response:function(s){return 0===n.get("$http").pendingRequests.length&&(e.setLoadingState(!1),e.setSavingState(!1)),s||t.when(s)}}}e.exports=n,n.$inject=["LoadingProgress","$q","$injector"]},function(e,exports,t){"use strict";function n(e,t,n,s,i){function a(){if(i.isFeatureEnabled("redis")){var e=n.PLATFORM_WEBSOCKET_REDIS_ADAPTER_URL;return l=s.connect(e),!0}return!1}function o(n,s){l.on(n,function(){var n=arguments;e.$apply(function(){s.apply(t.socket,n)})})}function r(n,s,i){l.emit(n,s,function(){var n=arguments;e.$apply(function(){i&&i.apply(t.socket,n)})})}var l;return{on:o,emit:r,init:a}}e.exports=n,n.$inject=["$rootScope","$window","CONST","io","Features"]},function(e,exports,t){"use strict";e.exports=["$rootScope","$location",function(e,t){e.globalLayout="layout-a",e.setLayout=function(t){e.globalLayout=t},e.modalVisible=!1,e.toggleModalVisible=function(t){e.modalVisible=void 0!==t?t:!e.modalVisible}}]},function(e,exports,t){"use strict";e.exports=["$rootScope","$translate","TranslationService","Languages",function(e,t,n,s,i){function a(e){n.translate(e)}e.rtlEnabled=!1,e.switchRtl=function(){e.rtlEnabled=!e.rtlEnabled},n.getLanguage().then(function(e){a(e)})}]},function(e,exports,t){"use strict";function n(e,n,s,r,l,c){function d(e,t){function n(e){l.openTemplate("<p>"+e+"</p>")}r(e,t).then(n,n)}function u(e,t){function n(e){l.openTemplate(e,null,null,null,!1,!0,!0,!0)}r(e,t).then(n,n)}function p(e,t){function n(e){l.openTemplate("<p>"+e+"</p>","warning","error",null,!1)}r(e,t).then(n,n)}function g(e){var n=C();n.errors=e,l.openTemplate(t(160),"warning","error",n,!1)}function f(e,n){var s=C();r(e,n).then(function(e){s.errors=e,l.openTemplate(t(160),"warning","error",s,!1)})}function m(n){var s=C();s.errors=e.pluck(n.data&&n.data.errors,"message"),s.errors&&l.openTemplate(t(160),"warning","error",s,!1)}function v(e,t){function n(e){l.openTemplate("<p>"+e+"</p>","thumb-up","confirmation")}r(e,t).then(n,n)}function h(e,t){function s(e){a.confirmText=e,l.openTemplate('<p>{{ confirmText }}</p>    <button class="button-flat" ng-click="$parent.cancel()" translate="message.button.cancel">Cancel</button>    <button class="button-beta button-flat" ng-click="$parent.confirm()" translate="message.button.default">OK</button>',!1,!1,a,!1,!1)}var i=n.defer(),a=C();return a.cancel=function(){i.reject(),l.close()},a.confirm=function(){i.resolve(),l.close()},r(e,t).then(s,s),i.promise}function b(e,t){function s(e){a.confirmText=e,c.openTemplate('<div class="form-field"><p><i translate>notify.default.proceed_warning</i></p>    <button class="button-flat" ng-click="$parent.cancel()" translate="message.button.cancel">Cancel</button>    <button class="button-beta button-flat" ng-click="$parent.confirm()" translate="message.button.default">OK</button></div>',e,!1,a,!1,!1)}var i=n.defer(),a=C();return a.cancel=function(){i.reject(),c.close()},a.confirm=function(){i.resolve(),c.close()},r(e,t).then(s,s),i.promise}function y(e,t){var n=C();n.cancel=function(){c.close()},c.openTemplate('<div class="form-field">    <button class="button-alpha" ng-click="$parent.cancel()" translate="notify.generic.okay">Ok</button></div>',e,!1,n,!1,!1)}function w(){c.openTemplate("<admin-user-setup><admin-user-setup/>","Change your email and password",!1,!1,!1,!1)}function _(){var e=n.defer(),t=C();return t.confirm=function(){e.resolve(),c.close()},c.openTemplate("<terms-of-service></terms-of-service>"," ",!1,t,!1,!1),e.promise}function k(e,t,s){function a(e){u.confirmText=e,u.confirmWarningText=t||"notify.default.proceed_warning",c.getState()?(u.cancel=function(){d.reject(),l.close()},u.confirm=function(){d.resolve(),l.close()},l.openTemplate('<p>{{ confirmText }}</p><p><i translate="{{confirmWarningText}}"></i></p>    <button class="button-flat" ng-click="$parent.cancel()" translate="message.button.cancel">Cancel</button>    <button class="button-destructive button-flat" ng-click="$parent.confirm()">    <svg class="iconic"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+o+'#trash"></use></svg>    <span translate="app.delete">Delete</span>    </button>',!1,!1,u,!1,!1)):(u.cancel=function(){d.reject(),c.close()},u.confirm=function(){d.resolve(),c.close()},c.openTemplate('<div class="form-field"><p><i translate="{{confirmWarningText}}"></i></p>    <button class="button-beta button-flat" ng-click="cancel()">Cancel</button>    <button class="button-destructive button-flat" ng-click="confirm()">    <svg class="iconic"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+o+'#trash"></use></svg>    <span translate="app.delete">Delete</span>    </button></div>',e,!1,u,!1,!1))}var d=n.defer(),u=C();return"object"===(void 0===t?"undefined":(0,i.default)(t))&&(s=t,t=!1),r(e,s).then(a,a),d.promise}function x(e,t){var i=n.defer(),a=C();return a.confirm=function(){i.resolve(),c.close()},a.save=function(){s.$broadcast("event:edit:post:data:mode:save"),s.$on("event:edit:post:data:mode:saveError",function(){i.reject(),c.close()}),s.$on("event:edit:post:data:mode:saveSuccess",function(){i.resolve(),c.close()})},c.openTemplate('<div class="form-field"><p><i translate>notify.post.leave_confirm_message</i></p>    <button class="button button-flat" ng-click="confirm()" translate>notify.post.leave_confirm</button>    <button class="button-alpha button-flat" ng-click="save()" translate>notify.generic.save</button></div>',e,!1,a,!1,!0),i.promise}function S(e,n){function s(e){i.message=e,l.openTemplate(t(603),"warning","error",i,!0,!1)}var i=C();r(e,n).then(s,s)}function C(){return a&&a.$destroy(),a=s.$new()}return{notify:d,notifyProgress:u,error:p,errors:f,errorsPretranslated:g,apiErrors:m,success:v,confirm:h,confirmModal:b,confirmDelete:k,limit:S,confirmTos:_,adminUserSetupModal:w,infoModal:y,confirmLeave:x}}var s=t(320),i=function(e){return e&&e.__esModule?e:{default:e}}(s);e.exports=n;var a,o=t(0);n.$inject=["_","$q","$rootScope","$translate","SliderService","ModalService"]},function(e,exports,t){"use strict";function n(e,n,s,i){function a(a,o){function r(t,s,o,r,d,u,v,h,b){a.loading=!1,void 0!==a.insideModal===i.getState()&&(c(),p=d?d.$new():a.$new(),p.close=l,m.html(s),n(m)(p),a.icon=o?f+"#"+o:o,a.iconClass={},r&&(a.iconClass[r]=!0),a.showCloseButton=void 0===v||v,a.closeOnNavigate=void 0!==h&&h,u=void 0===u||u,a.classVisible=!0,u&&(g=e(l,5e3)),b&&(a.loading=!0))}function l(){a.classVisible=!1,c()}function c(){p&&p.$destroy(),g&&e.cancel(g),m.html("")}function d(){a.closeOnNavigate&&l()}function u(e){l()}a.classVisible=!1,a.icon=!1,a.iconClass={},a.showCloseButton=!0,a.closeOnNavigate=!1,a.closeButtonClicked=u;var p,g=null,f=t(0),m=o.find("slider-content");a.$on("$destroy",c),a.$on("$locationChangeStart",d),s.onOpen(r,a),s.onClose(l,a)}return{restrict:"E",template:t(604),scope:{insideModal:"@?",loading:"=?"},link:a}}e.exports=n,n.$inject=["$timeout","$compile","SliderService","ModalService"]},function(e,exports,t){"use strict";function n(e,t,n){function s(t,n,s,i,a,o,l,c){r.promise.then(function(){e.$emit("slider:open",t,n,s,i,a,o,l,c)})}function i(){l.promise.then(function(){e.$emit("slider:close")})}function a(t,n){var s=e.$on("slider:open",t);n&&n.$on("$destroy",s),r.resolve()}function o(t,n){var s=e.$on("slider:close",t);n&&n.$on("$destroy",s),l.resolve()}var r=t.defer(),l=t.defer();return{open:s,openTemplate:s,close:i,onOpen:a,onClose:o}}e.exports=n,n.$inject=["$rootScope","$q","$templateRequest"]},function(e,exports,t){"use strict";e.exports=["Util","$q",function(e,t){return{getIconSet:function(){return{iconClass:"fa",iconClassPrefix:"fa-",icons:["adjust","anchor","archive","area-chart","arrows","arrows-h","arrows-v","automobile","asterisk","at","ban","bank","bar-chart-o","barcode","bars","beer","bell","bell-o","bell-slash","bell-slash-o","bicycle","binoculars","birthday-cake","bolt","bomb","book","bookmark","bookmark-o","briefcase","bug","building","building-o","bullhorn","bullseye","bus","cab","calculator","calendar","calendar-o","camera","camera-retro","car","caret-square-o-down","caret-square-o-left","caret-square-o-right","caret-square-o-up","cc","cc-amex","cc-discover","cc-mastercard","cc-paypal","cc-stripe","cc-visa","certificate","check","check-circle","check-circle-o","child","circle","circle-o","circle-thin","clock-o","cloud","cloud-download","cloud-upload","code","code-fork","coffee","cog","cogs","comment","comment-o","comments","comments-o","compass","copyright","credit-card","crop","crosshairs","cube","cubes","cutlery","dashboard","database","desktop","dot-circle-o","download","edit","ellipsis-h","ellipsis-v","envelope","envelope-o","envelope-square","eraser","exchange","exclamation","exclamation-circle","exclamation-triangle","external-link","external-link-square","eye","eye-slash","eyedropper","fax","female","fighter-jet","file-archive-o","file-audio-o","file-code-o","file-excel-o","file-image-o","file-movie-o","file-pdf-o","file-photo-o","file-picture-o","file-powerpoint-o","file-sound-o","file-video-o","file-word-o","file-zip-o","film","filter","fire","fire-extinguisher","flag","flag-checkered","flag-o","flash","flask","folder","folder-o","folder-open","folder-open-o","frown-o","futbol-o","gamepad","gavel","gear","gears","gift","glass","globe","graduation-cap","group","hdd-o","headphones","heart","heart-o","history","home","image","inbox","info","info-circle","institution","key","keyboard-o","language","laptop","leaf","legal","lemon-o","level-down","level-up","life-bouy","life-ring","life-saver","lightbulb-o","line-chart","location-arrow","lock","magic","magnet","mail-forward","mail-reply","mail-reply-all","male","map-marker","meh-o","microphone","microphone-slash","minus","minus-circle","minus-square","minus-square-o","mobile","mobile-phone","money","moon-o","mortar-board","music","navicon","newspaper-o","paint-brush","paper-plane","paper-plane-o","paw","pencil","pencil-square","pencil-square-o","phone","phone-square","photo","picture-o","pie-chart","plane","plug","plus","plus-circle","plus-square","plus-square-o","power-off","print","puzzle-piece","qrcode","question","question-circle","quote-left","quote-right","random","refresh","reorder","reply","reply-all","retweet","road","rocket","rss","rss-square","search","search-minus","search-plus","send","send-o","share","share-alt","share-alt-square","share-square","share-square-o","shield","shopping-cart","sign-in","sign-out","signal","sitemap","sliders","smile-o","soccer-ball-o","sort","sort-alpha-asc","sort-alpha-desc","sort-amount-asc","sort-amount-desc","sort-asc","sort-desc","sort-down","sort-numeric-asc","sort-numeric-desc","sort-up","space-shuttle","spinner","spoon","square","square-o","star","star-half","star-half-empty","star-half-full","star-half-o","star-o","suitcase","sun-o","support","tablet","tachometer","tag","tags","tasks","taxi","terminal","thumb-tack","thumbs-down","thumbs-o-down","thumbs-o-up","thumbs-up","ticket","times","times-circle","times-circle-o","tint","toggle-down","toggle-left","toggle-off","toggle-on","toggle-right","toggle-up","trash","trash-o","tree","trophy","truck","tty","umbrella","university","unlock","unlock-alt","unsorted","upload","user","users","video-camera","volume-down","volume-off","volume-up","warning","wheelchair","wifi","wrench","check-square","check-square-o","bitcoin","btc","cny","dollar","eur","euro","gbp","ils","inr","jpy","krw","rmb","rouble","rub","ruble","rupee","shekel","sheqel","try","turkish-lira","usd","won","yen","align-center","align-justify","align-left","align-right","bold","chain","chain-broken","clipboard","columns","copy","cut","dedent","file","file-o","file-text","file-text-o","files-o","floppy-o","font","header","indent","italic","link","list","list-alt","list-ol","list-ul","outdent","paperclip","paragraph","paste","repeat","rotate-left","rotate-right","save","scissors","strikethrough","subscript","superscript","table","text-height","text-width","th","th-large","th-list","underline","undo","unlink","angle-double-down","angle-double-left","angle-double-right","angle-double-up","angle-down","angle-left","angle-right","angle-up","arrow-circle-down","arrow-circle-left","arrow-circle-o-down","arrow-circle-o-left","arrow-circle-o-right","arrow-circle-o-up","arrow-circle-right","arrow-circle-up","arrow-down","arrow-left","arrow-right","arrow-up","arrows-alt","caret-down","caret-left","caret-right","caret-up","chevron-circle-down","chevron-circle-left","chevron-circle-right","chevron-circle-up","chevron-down","chevron-left","chevron-right","chevron-up","hand-o-down","hand-o-left","hand-o-right","hand-o-up","long-arrow-down","long-arrow-left","long-arrow-right","long-arrow-up","backward","compress","eject","expand","fast-backward","fast-forward","forward","pause","play","play-circle","play-circle-o","step-backward","step-forward","stop","youtube-play","adn","android","angellist","apple","behance","behance-square","bitbucket","bitbucket-square","css3","delicious","digg","dribbble","dropbox","drupal","empire","facebook","facebook-square","flickr","foursquare","ge","git","git-square","github","github-alt","github-square","gittip","google","google-plus","google-plus-square","google-wallet","hacker-news","html5","instagram","ioxhost","joomla","jsfiddle","lastfm","lastfm-square","linkedin","linkedin-square","linux","maxcdn","meanpath","openid","pagelines","paypal","pied-piper","pied-piper-alt","pinterest","pinterest-square","qq","ra","rebel","reddit","reddit-square","renren","skype","slack","slideshare","soundcloud","spotify","stack-exchange","stack-overflow","steam","steam-square","stumbleupon","stumbleupon-circle","tencent-weibo","trello","tumblr","tumblr-square","twitch","twitter","twitter-square","vimeo-square","vine","vk","wechat","weibo","weixin","windows","wordpress","xing","xing-square","yahoo","yelp","youtube","youtube-square","ambulance","h-square","hospital-o","medkit","stethoscope","user-md"]}}}}]},function(e,exports,t){"use strict";e.exports=["$resource","$rootScope","Util",function(e,t,n){return e(n.apiUrl("/media/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return n.transformResponse(e).results}},update:{method:"PUT"}})}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","_",function(e,t,n){return e(t.apiUrl("/collections/:collectionId"),{collectionId:"@collectionId"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return angular.fromJson(e).results}},get:{method:"GET"},update:{method:"PUT"},editableByMe:{method:"GET",isArray:!0,params:{editableBy:"me"},transformResponse:function(e){return n.filter(angular.fromJson(e).results,function(e){return n.includes(e.allowed_privileges,"update")})}},addPost:{method:"POST",url:t.apiUrl("/collections/:collectionId/posts")},removePost:{method:"DELETE",url:t.apiUrl("/collections/:collectionId/posts/:id")},delete:{method:"DELETE"}})}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","_","CacheFactory","$rootScope","UserEndpoint","Authentication","Session","$q",function(e,t,n,s,i,a,o,r,l){var c;(c=s.get("configCache"))||(c=s.createCache("configCache",{storageMode:"memory"})),c.removeExpired();var d=e(t.apiUrl("/config/:id"),{id:"@id"},{get:{method:"GET",transformResponse:function(e){return t.transformResponse(e)},cache:c},update:{method:"PUT",transformResponse:function(e){return t.transformResponse(e)}}});return d.invalidateCache=function(){return c.removeAll()},d.getFresh=function(e){return c.remove(t.apiUrl("/config/"+e.id)),d.get(e)},d.saveCache=function(e){var t=e.id?d.update:d.save;return c.removeAll(),t(e)},d}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","_","CacheFactory",function(e,t,n,s){var i;(i=s.get("userCache"))||(i=s.createCache("userCache")),i.removeExpired();var a=e(t.apiUrl("/contacts/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return angular.fromJson(e).results},cache:i},get:{method:"GET",params:{ignore403:"@ignore403"},cache:i},update:{method:"PUT"}});return a.getFresh=function(e){return i.remove(t.apiUrl("/contacts/"+e.id)),a.get(e)},a.invalidateCache=function(){return i.removeAll()},a.queryFresh=function(e){return i.removeAll(),a.query(e)},a.saveCache=function(e){var t=e.id?a.update:a.save;return i.removeAll(),t(e)},a.delete=function(e){return i.removeAll(),a.deleteEntity(e)},a}]},function(e,exports,t){"use strict";e.exports=["$q","$http","$resource","$rootScope","Util",function(e,t,n,s,i){var a=n(i.apiUrl("/csv/:id/:action"),{id:"@id",action:"@action"},{get:{method:"GET"},update:{method:"PUT"},delete:{method:"DELETE"},import:{method:"POST"}});return a.upload=function(n){var s=e.defer();return t.post(i.apiUrl("/csv"),n,{headers:{"Content-Type":void 0}}).then(function(e){s.resolve(i.transformResponse(e.data))},function(e){s.reject(e)}),s.promise},a}]},function(e,exports,t){"use strict";e.exports=["$resource","$rootScope","Util","CacheFactory",function(e,t,n,s){var i;(i=s.get("providerCache"))||(i=s.createCache("providerCache")),i.removeExpired();var a=e(n.apiUrl("/dataproviders/:id"),{id:"@id"},{query:{method:"GET",isArray:!1,transformResponse:function(e){return angular.fromJson(e)},cache:i},get:{method:"GET",cache:i},update:{method:"PUT"},options:{method:"OPTIONS"},deleteEntity:{method:"DELETE"}});return a.getFresh=function(e){return i.remove(n.apiUrl("/dataproviders/"+e.id)),a.get(e)},a.queryFresh=function(){return i.removeAll(),a.query()},a.invalidateCache=function(){return i.removeAll()},a.saveCache=function(e){var t=e.id?a.update:a.save;return i.removeAll(),t(e)},a.delete=function(e){return i.removeAll(),a.deleteEntity(e)},a}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","CacheFactory",function(e,t,n){var s;(s=n.get("attrCache"))||(s=n.createCache("attrCache")),s.removeExpired();var i=e(t.apiUrl("/forms/:formId/attributes/:id"),{formId:"@formId",id:"@id",order:"asc",orderby:"priority"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return t.transformResponse(e).results},cache:s},get:{method:"GET",cache:s},update:{method:"PUT"},deleteEntity:{method:"DELETE"}});return i.getFresh=function(e){return s.remove(t.apiUrl("/forms/"+e.formId+"/attributes/"+e.id)),i.get(e)},i.queryFresh=function(e){return s.removeAll(),i.query(e)},i.saveCache=function(e){var t=e.id?i.update:i.save;return s.removeAll(),t(e)},i.invalidateCache=function(){return s.removeAll()},i.delete=function(e){return s.removeAll(),i.deleteEntity(e)},i}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","CacheFactory",function(e,t,n){var s;(s=n.get("formRoleCache"))||(s=n.createCache("formRoleCache")),s.removeExpired();var i=e(t.apiUrl("/forms/:formId/roles/"),{formId:"@formId",order:"asc",orderby:"role_id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return t.transformResponse(e).results},cache:s},get:{method:"GET",cache:s},update:{method:"PUT"}});return i.getFresh=function(e){return s.remove(t.apiUrl("/forms/"+e.formId+"/roles/")),i.get(e)},i.invalidateCache=function(){return s.removeAll()},i.queryFresh=function(e){return s.removeAll(),i.query(e)},i.saveCache=function(e){var t=i.update;return s.removeAll(),t(e)},i}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","CacheFactory",function(e,t,n){var s;(s=n.get("stageCache"))||(s=n.createCache("stageCache")),s.removeExpired();var i=e(t.apiUrl("/forms/:formId/stages/:id"),{formId:"@formId",id:"@id",order:"asc",orderby:"priority"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return t.transformResponse(e).results},cache:s},get:{method:"GET",cache:s},update:{method:"PUT"},deleteEntity:{method:"DELETE"}});return i.getFresh=function(e){return s.remove(t.apiUrl("/forms/"+e.formId+"/stages/"+e.id)),i.get(e)},i.invalidateCache=function(){return s.removeAll()},i.queryFresh=function(e){return s.removeAll(),i.query(e)},i.saveCache=function(e){var t=e.id?i.update:i.save;return s.removeAll(),t(e)},i.delete=function(e){return s.removeAll(),i.deleteEntity(e)},i}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","CacheFactory",function(e,t,n){var s;(s=n.get("formCache"))||(s=n.createCache("formCache")),s.removeExpired();var i=e(t.apiUrl("/forms/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,cache:s,transformResponse:function(e){return t.transformResponse(e).results}},get:{method:"GET",cache:s},update:{method:"PUT"},deleteEntity:{method:"DELETE"}});return i.getFresh=function(e){return s.remove(t.apiUrl("/forms/"+e.id)),i.get(e)},i.invalidateCache=function(){return s.removeAll()},i.queryFresh=function(){return s.removeAll(),i.query()},i.saveCache=function(e){var t=e.id?i.update:i.save;return s.removeAll(),t(e)},i.delete=function(e){return s.removeAll(),i.deleteEntity(e)},i}]},function(e,exports,t){"use strict";e.exports=["$resource","Util",function(e,t){return e(t.apiUrl("/messages/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return angular.fromJson(e)}},get:{method:"GET"},allInThread:{method:"GET",params:{contact:"@contact",offset:"@offset",limit:"@limit",order:"asc",orderby:"created"},isArray:!1,transformResponse:function(e){return angular.fromJson(e)}},save:{method:"POST"}})}]},function(e,exports,t){"use strict";e.exports=["$resource","Util",function(e,t){return e(t.apiUrl("/notifications/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return angular.fromJson(e).results}},get:{method:"GET",params:{ignore403:"@ignore403"}},update:{method:"PUT"},delete:{method:"DELETE"}})}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","CacheFactory",function(e,t,n){var s;(s=n.get("permissionCache"))||(s=n.createCache("permissionCache")),s.removeExpired();var i=e(t.apiUrl("/permissions/:id"),{id:"@id"},{query:{method:"GET",transpermissionResponse:function(e){return t.transformResponse(e).results}},get:{method:"GET",cache:s}});return i.getFresh=function(e){return s.remove(t.apiUrl("/permissions/"+e.id)),i.get(e)},i.invalidateCache=function(){return s.removeAll()},i.queryFresh=function(){return s.removeAll(),i.query()},i}]},function(e,exports,t){"use strict";e.exports=["$resource","$rootScope","Util","_","$http",function(e,t,n,s,i){function a(e){return s.isArray(e.values)&&(e.values=s.object(e.values)),s.isArray(e.published_to)||(e.published_to=[]),e}var o=e(n.apiUrl("/posts/:id/:extra"),{id:"@id"},{query:{method:"GET",isArray:!1,paramSerializer:"$httpParamSerializerJQLike",params:{order:"desc",orderby:"post_date"},transformResponse:[i.defaults.transformResponse[0],function(e){return e?(e.results=e.results.map(a),e):e}]},get:{method:"GET",transformResponse:[i.defaults.transformResponse[0],function(e){return e?a(e):e}]},save:{method:"POST",transformResponse:[i.defaults.transformResponse[0],function(e){return e?a(e):e}]},update:{method:"PUT",transformResponse:[i.defaults.transformResponse[0],function(e){return e?a(e):e}]},options:{method:"OPTIONS"},geojson:{method:"GET",url:n.apiUrl("/posts/:id/geojson"),isArray:!1,paramSerializer:"$httpParamSerializerJQLike",cancellable:!0},stats:{method:"GET",url:n.apiUrl("/posts/:id/stats"),isArray:!1,paramSerializer:"$httpParamSerializerJQLike"},collections:{method:"GET",url:n.apiUrl("/posts/:id/collections"),isArray:!0}});return o.export=function(e){var t={params:e,paramSerializer:"$httpParamSerializerJQLike",responseType:"arraybuffer"};return i.get(n.apiUrl("/posts/export"),t)},t.$on("event:authentication:logout:succeeded",function(){o.query()}),o}]},function(e,exports,t){"use strict";e.exports=["$resource","$rootScope","Util","_","$http",function(e,t,n,s,i){return e(n.apiUrl("/posts/:post_id/lock/:id"),{post_id:"@post_id",id:"@id"},{getLock:{method:"PUT"},unlockByPost:{method:"DELETE"},unlock:{method:"DELETE"},options:{method:"OPTIONS"}})}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","CacheFactory",function(e,t,n){var s;(s=n.get("roleCache"))||(s=n.createCache("roleCache")),s.removeExpired();var i=e(t.apiUrl("/roles/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return t.transformResponse(e).results}},get:{method:"GET",cache:s},update:{method:"PUT"},deleteEntity:{method:"DELETE"}});return i.getFresh=function(e){return s.remove(t.apiUrl("/roles/"+e.id)),i.get(e)},i.invalidateCache=function(){return s.removeAll()},i.queryFresh=function(){return s.removeAll(),i.query()},i.saveCache=function(e){var t=e.id?i.update:i.save;return s.removeAll(),t(e)},i.delete=function(e){return s.removeAll(),i.deleteEntity(e)},i}]},function(e,exports,t){"use strict";e.exports=["$resource","Util",function(e,t){return e(t.apiUrl("/savedsearches/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return angular.fromJson(e).results}},get:{method:"GET"},update:{method:"PUT"},delete:{method:"DELETE"}})}]},function(e,exports,t){"use strict";e.exports=["$resource","$rootScope","Util","CacheFactory",function(e,t,n,s){var i;(i=s.get("tagCache"))||(i=s.createCache("tagCache")),i.removeExpired();var a=e(n.apiUrl("/tags/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,cache:i,transformResponse:function(e){return n.transformResponse(e).results}},update:{method:"PUT"},get:{method:"GET",cache:i,params:{ignore403:"@ignore403"}},deleteEntity:{method:"DELETE"}});return a.getFresh=function(e){return i.remove(n.apiUrl("/tags/"+e.id)),a.get(e)},a.queryFresh=function(e){return i.removeAll(),a.query(e)},a.invalidateCache=function(){return i.removeAll()},a.saveCache=function(e){var t=e.id?a.update:a.save;return i.removeAll(),t(e)},a.delete=function(e){return i.removeAll(),a.deleteEntity(e)},t.$on("event:authentication:logout:succeeded",function(){a.queryFresh()}),t.$on("event:authentication:login:succeeded",function(){a.queryFresh()}),a}]},function(e,exports,t){"use strict";e.exports=["$resource","Util",function(e,t){return e(t.apiUrl("/tos/"),{},{get:{method:"GET"}})}]},function(e,exports,t){"use strict";e.exports=["$resource","$rootScope","Util","CacheFactory",function(e,t,n,s){var i;(i=s.get("userCache"))||(i=s.createCache("userCache")),i.removeExpired();var a=e(n.apiUrl("/users/:id"),{id:"@id"},{query:{method:"GET",isArray:!1,paramSerializer:"$httpParamSerializerJQLike",transformResponse:function(e){return angular.fromJson(e)},cache:i},get:{method:"GET",cache:i},update:{method:"PUT"},deleteEntity:{method:"DELETE"}});return a.getFresh=function(e){return i.remove(n.apiUrl("/users/"+e.id)),a.get(e)},a.invalidateCache=function(){return i.removeAll()},a.queryFresh=function(e){return i.removeAll(),a.query(e)},a.saveCache=function(e){var t=e.id?a.update:a.save;return i.removeAll(),t(e)},a.delete=function(e){return i.removeAll(),a.deleteEntity(e)},a}]},function(e,exports,t){"use strict";e.exports=["$resource","Util","CacheFactory",function(e,t,n){var s;(s=n.get("webhookCache"))||(s=n.createCache("webhookCache")),s.removeExpired();var i=e(t.apiUrl("/webhooks/:id"),{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(e){return t.transformResponse(e).results}},get:{method:"GET",cache:s},update:{method:"PUT"},deleteEntity:{method:"DELETE"}});return i.getFresh=function(e){return s.remove(t.apiUrl("/webhooks/"+e.id)),i.get(e)},i.invalidateCache=function(){return s.removeAll()},i.queryFresh=function(){return s.removeAll(),i.query()},i.saveCache=function(e){var t=e.id?i.update:i.save;return s.removeAll(),t(e)},i.delete=function(e){return s.removeAll(),i.deleteEntity(e)},i}]},function(e,exports,t){"use strict";e.exports=["ConfigEndpoint","Util","$q",function(e,t,n){var s={features:void 0,loadFeatures:function(){var t=n.defer();return s.features?t.resolve(s.features):e.getFresh({id:"features"}).$promise.then(function(e){s.features=e,t.resolve(s.features)}),t.promise},isFeatureEnabled:function(e){return s.features[e].enabled},isViewEnabled:function(e){return s.features.views[e]},getLimit:function(e){return s.features.limits[e]}};return t.bindAllFunctionsToSelf(s)}]},function(e,exports,t){"use strict";e.exports=["$q","$http","_",function(e,t,n){function s(e){return a(e).then(function(e){return e&&e[0]&&e[0].lat&&e[0].lon?[parseFloat(e[0].lat),parseFloat(e[0].lon)]:null})}function i(e){return a(e).then(function(e){return e&&e[0]?e:null})}function a(e){return window.googlePlaces?r(e):o(e)}function o(e){return t({method:"GET",url:"//nominatim.openstreetmap.org/search",params:{q:e,format:"json"}}).then(function(e){return e.data},function(){})}function r(t){var s=e.defer();return window.googlePlaces.textSearch({query:t},function(e){s.resolve(n.map(e,function(e){return{display_name:e.name+" - "+e.formatted_address,lat:e.geometry.location.lat(),lon:e.geometry.location.lng()}}))}),s.promise}return{searchCoordinates:s,searchAllInfo:i}}]},function(e,exports,t){"use strict";e.exports=["FontAwesomeIcons","Util","_","Notify",function(e,t,n,s){var i={fontAwesome:e.getIconSet(),noun:{}},a={getIconSetArray:function(e){var t=[],s=e.split(" ");return n.each(s,function(e){var s=i[e].iconClass+" "+i[e].iconClassPrefix;n.each(i[e].icons,function(e){t.push(s+e)})}),t}};return t.bindAllFunctionsToSelf(a)}]},function(e,exports,t){"use strict";e.exports=["Util","$http",function(e,t){return t.get("locales/languages.json").then(function(e){return e.data.languages},function(){return[{rtl:!1,pluralequation:"language.pluralequation",code:"en",name:"English",nplurals:2}]})}]},function(e,exports,t){"use strict";function n(e,t,n){function s(){t.onStart({},function(t){e.isLoading=!0,"list.data.edit"===t.from().name&&(e.isSaving=!0)}),t.onFinish({},function(t){0===n.get("$http").pendingRequests.length&&(e.isLoading=!1,e.isSaving=!1)})}function i(){return e.isLoading}function a(){return e.isSaving}function o(t){e.isLoading=t}function r(t){e.isSaving=t}return{watchTransitions:s,getLoadingState:i,getSavingState:a,setLoadingState:o,setSavingState:r}}e.exports=n,n.$inject=["$rootScope","$transitions","$injector"]},function(e,exports,t){"use strict";function n(e,t){function n(t,n,s){l.promise.then(function(){e.$emit("mainsheet:open",t,n,s)})}function s(){c.promise.then(function(){e.$emit("mainsheet:close")})}function i(){return d}function a(t,n){var s=e.$on("mainsheet:open",t);n&&n.$on("$destroy",s),l.resolve()}function o(t,n){var s=e.$on("mainsheet:close",t);n&&n.$on("$destroy",s),c.resolve()}function r(t){e.$emit("mainsheet:statechange"),d=t}var l=t.defer(),c=t.defer(),d=!1;return{open:n,openTemplate:n,close:s,closeTemplate:s,getState:i,onOpen:a,onClose:o,setState:r}}e.exports=n,n.$inject=["$rootScope","$q"]},function(e,exports,t){"use strict";function n(e,n,s,i){function a(e){return o().then(function(t){var s=n.map(e,t);return s.attributionControl.setPrefix(!1),s.zoomControl.setPosition("bottomleft"),s.setMaxBounds([[-90,-360],[90,360]]),s.on("popupopen",function(e){var t=s.project(e.popup._latlng);t.y-=e.popup._container.clientHeight/2,s.panTo(s.unproject(t),{animate:!0})}),s})}function o(){return c().then(function(e){var t=g.baselayers[e.default_view.baselayer];return angular.extend(d(),{layers:[n.tileLayer(t.url,t.layerOptions)],center:[e.default_view.lat,e.default_view.lon],zoom:e.default_view.zoom,clustering:e.clustering})})}function r(){return g.baselayers}function l(e){var t=g.baselayers[e];return n.tileLayer(t.url,t.layerOptions)}function c(t){return e[t?"getFresh":"get"]({id:"map"}).$promise.then(function(e){return"MapQuest"===e.default_view.baselayer&&(e.default_view.baselayer="streets"),"MapQuestAerial"===e.default_view.baselayer&&(e.default_view.baselayer="satellite"),e})}function d(){return{scrollWheelZoom:!1,center:[-1.2833,36.8167],zoom:8,layers:[n.tileLayer(g.baselayers.streets.url,g.baselayers.streets.layerOptions)]}}function u(e,t){return n.marker(t,{icon:p(e.properties["marker-color"])})}function p(e,s,i){e=e&&/^[a-zA-Z0-9#]+$/.test(e)?e:"#959595",s=s||[32,32];var a=t(0);return n.divIcon({className:"custom-map-marker "+i,html:'<svg class="iconic" style="fill:'+e+';"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+a+'#map-marker"></use></svg><span class="iconic-bg" style="background-color:'+e+';""></span>',iconSize:s,iconAnchor:[s[0]/2,s[1]],popupAnchor:[0,0-s[1]]})}var g={baselayers:{satellite:{name:"Satellite",url:"https://api.tiles.mapbox.com/v4/{mapid}/{z}/{x}/{y}.png?access_token={apikey}",layerOptions:{apikey:i.MAPBOX_API_KEY,mapid:"mapbox.satellite",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>, &copy; <a href="https://www.mapbox.com/about/maps/"">Mapbox</a> | <a href="https://www.mapbox.com/feedback/" target="_blank">Improve the underlying map</a>'}},streets:{name:"Streets",url:"https://api.tiles.mapbox.com/v4/{mapid}/{z}/{x}/{y}.png?access_token={apikey}",layerOptions:{apikey:i.MAPBOX_API_KEY,mapid:"mapbox.streets",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>, &copy; <a href="https://www.mapbox.com/about/maps/"">Mapbox</a> | <a href="https://www.mapbox.com/feedback/" target="_blank">Improve the underlying map</a>'}},hOSM:{name:"Humanitarian",url:"//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",layerOptions:{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>, &copy; <a href="http://hot.openstreetmap.org/">Humanitarian OpenStreetMap</a> | <a href="https://www.mapbox.com/feedback/" target="_blank">Improve the underlying map</a>'}}}};return{createMap:a,getLeafletConfig:o,getBaseLayers:r,pointToLayer:u,getConfig:c,getLayer:l,pointIcon:p}}e.exports=n,n.$inject=["ConfigEndpoint","Leaflet","_","CONST"]},function(e,exports,t){"use strict";function n(e,t,n){function s(t,n,s,i,a,o){c.promise.then(function(){e.$emit("modal:open",t,n,s,i,a,o)})}function i(){d.promise.then(function(){e.$emit("modal:close")})}function a(){return u}function o(t,n){var s=e.$on("modal:open",t);n&&n.$on("$destroy",s),c.resolve()}function r(t,n){var s=e.$on("modal:close",t);n&&n.$on("$destroy",s),d.resolve()}function l(e){u=e}var c=t.defer(),d=t.defer(),u=!1;return{open:s,openTemplate:s,close:i,getState:a,onOpen:o,onClose:r,setState:l}}e.exports=n,n.$inject=["$rootScope","$q","$templateRequest"]},function(e,exports,t){"use strict";e.exports=["$rootScope","$q","$translate","$document","Languages","Session","Authentication","UserEndpoint","ConfigEndpoint","moment",function(e,n,s,i,a,o,r,l,c,d){var u=function(n){s.use(n).then(function(t){t&&(s.preferredLanguage(t),a.then(function(n){var s=n.find(function(e){return e.code===t});e.rtlEnabled=s.rtl}))}),"en"===n?d.locale("en"):t.e(0).then(function(){var e=[t(951)("./"+n+".js")];(function(){d.locale(n)}).apply(null,e)}).catch(t.oe),e.$emit("setPageTitle",s.instant(i[0].title))},p=function(){g().then(function(e){u(e)})},g=function(e){return n(function(t,s){if(o.getSessionDataEntry("language"))return void t(o.getSessionDataEntry("language"));var i=n.when(e||c.get({id:"site"}).$promise),a=n.when(!1);r.getLoginStatus()&&(a=l.get({id:"me"}).$promise),n.all({user:a,config:i}).then(function(e){t(e.user&&e.user.language?e.user.language:e.config.language?e.config.language:"en")})})};return{translate:u,setStartLanguage:p,getLanguage:g,setLanguage:function(e){o.setSessionDataEntry("language",e),r.getLoginStatus()&&l.get({id:"me"}).$promise.then(function(t){t.language=e,l.update(t)})}}}]},function(e,exports,t){"use strict";e.exports=["_","CONST","$window",function(e,t,n){var s={currentUrl:function(){return n.location.href},url:function(e){return t.BACKEND_URL+e},apiUrl:function(e){return t.API_URL+e},deploymentUrl:function(e){return/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/\n]+)/g.exec(this.apiUrl(e))[0].replace("api.","")},transformResponse:function(t,n){return n=(n||[]).concat(["allowed_methods"]),e.omit(angular.fromJson(t),n)},simpluUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},bindAllFunctionsToSelf:function(t){var n=e.functions(t);return n.length&&e.bindAll.apply(e,[t].concat(n)),t},autoMap:function(t,n,s){var i=e.map(n,function(e){return e.label.toLowerCase()}),a=e.pluck(n,"key"),o=e.object(i,a);return e.map(t,function(t,n){var s=t.toLowerCase().trim();return e.contains(i,s)?o[t]:void 0})}};return s.bindAllFunctionsToSelf(s)}]},function(e,exports,t){"use strict";e.exports=["$translate",function(e){function t(){return n}var n=[{name:"map",display_name:e.instant("views.map")},{name:"data",display_name:e.instant("views.data")}];return{views:t}}]},function(e,exports,t){"use strict";e.exports=["$rootScope","UserEndpoint","ModalService",function(e,n,s){return{restrict:"E",replace:!0,scope:{},template:t(605),link:function(e){e.user=n.getFresh({id:"me"}),e.general=!0,e.notifications=!1,e.showGeneral=function(){e.general=!0,e.notifications=!1},e.showNotifications=function(){e.general=!1,e.notifications=!0},e.$on("event:close",function(){s.close()})}}}]},function(e,exports,t){"use strict";e.exports=["$rootScope","UserEndpoint","ModalService",function(e,n,s){return{restrict:"E",replace:!0,scope:{},template:t(606),link:function(e){e.$on("event:close",function(){s.close()})}}}]},function(e,exports,t){"use strict";e.exports=["UserEndpoint","ContactEndpoint","CollectionEndpoint","SavedSearchEndpoint","NotificationEndpoint","Notify","_","$translate","$q",function(e,n,s,i,a,o,r,l,c){return{restrict:"E",replace:!0,scope:{},template:t(607),link:function(t,l){var d=function(){a.query({user:"me"}).$promise.then(function(e){r.forEach(e,function(e){s.get({collectionId:e.set.id},function(t){e.name=t.name},function(){i.get({id:e.set.id},function(t){e.name=t.name})})}),t.notifications=e})},u=function(){n.queryFresh({user:"me"}).$promise.then(function(n){r.forEach(n,function(e){e.original={contact:e.contact,can_notify:e.can_notify},e.active=!1}),0===n.length&&e.get({id:"me"},function(e){n.push({type:"email",contact:e.email,original:e.email,active:!1,isLoginEmail:!0})}),t.contacts=n})},p=function(e){return e.id||(e.can_notify=!0),n.saveCache(e).$promise},g=function(e){return e.original.contact!==e.contact||e.original.can_notify!==e.can_notify};u(),d(),t.deleteNotification=function(e){o.confirmDelete("notify.notification.delete_confirm").then(function(){a.delete({id:e.id}).$promise.then(function(){o.notify("notify.notification.destroy_success",{name:e.name}),d()},function(){o.error("notification.error_message")})})},t.deleteContact=function(e){o.confirmDelete("notify.contact.delete_confirm").then(function(){n.delete({id:e.id}).$promise.then(function(){o.notify("notify.contact.destroy_success"),u()},function(){o.error("contact.error_message")})})},t.contact={type:"email",active:!1},t.active=!1,t.toggleActive=function(e){e.active=!e.active},t.canUpdate=function(){var e=r.filter(t.contacts,function(e){return!0===e.active});return!r.isEmpty(e)&&r.every(e,function(e){return g(e)&&!r.isUndefined(e.contact)})},t.canAdd=function(){return t.contact.active?!r.isUndefined(t.contact.contact):r.find(t.contacts,function(e){return!r.isUndefined(e.contact)&&e.isLoginEmail})},t.saveContacts=function(){var e,n=[];t.saving=!0,e=r.filter(t.contacts,function(e){return!r.isUndefined(e.contact)}),r.isUndefined(t.contact.contact)||e.push(t.contact),r.forEach(e,function(e){n.push(p(e))}),c.all(n).then(function(){o.notify("notify.contact.save_success"),t.$emit("event:close")},function(){o.error("contact.error_message")}),t.saving=!1},t.cancel=function(){t.$emit("event:close")}}}}]},function(e,exports,t){"use strict";angular.module("ushahidi.user-profile",[]).directive("accountSettings",t(797)).directive("adminUserSetup",t(798)).directive("userProfile",t(801)).directive("notifications",t(799))},function(e,exports,t){"use strict";e.exports=["UserEndpoint","Notify","Session","_","$translate",function(e,n,s,i,a){return{restrict:"E",replace:!0,scope:{adminUserSetup:"="},template:t(608),link:function(t){t.state={success:!1,processing:!1,changingPassword:!1,password:""},t.saveUser=function(i){t.state.success=!1,t.state.processing=!0;var a=angular.copy(i);t.state.changingPassword&&(a.password=t.state.password),e.update({id:"me"},a).$promise.then(function(e){n.notify("user_profile.update_success"),s.setSessionDataEntries({email:e.email,realname:e.realname}),t.state.success=!0,t.state.processing=!1,t.state.changingPassword=!1,t.state.password="",t.user=e,t.$emit("event:close")},function(e){n.apiErrors(e),t.state.processing=!1})},t.cancel=function(){t.$emit("event:close")},t.user=e.getFresh({id:"me"})}}}]},function(e,exports,t){"use strict";t(923),t(924),t(925),t(933),t(934),t(926),t(927),t(928),t(929),t(930),t(931),t(932)},function(e,exports,t){"use strict";angular.module("ushahidi.activity",[]).config(t(804)).directive("activityTimeline",t(805)).directive("activityBarChart",t(807)).directive("activityTimeChart",t(808))},function(e,exports,t){"use strict";e.exports=["$stateProvider","$urlMatcherFactoryProvider",function(e,n){n.strictMode(!1),e.state({name:"activity",url:"/activity",controller:t(806),template:t(610)})}]},function(e,exports,t){"use strict";e.exports=[function(){return{restrict:"E",replace:!0,scope:{},controller:["$scope","$q","$translate","PostEndpoint","UserEndpoint","_",function(e,t,n,s,i,a){e.timeSince=function(e){var t=Math.floor((new Date-e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years":(n=Math.floor(t/2592e3))>1?n+" months":(n=Math.floor(t/86400))>1?n+" days":(n=Math.floor(t/3600))>1?n+" hours":(n=Math.floor(t/60),n>1?n+" minutes":Math.floor(t)+" seconds")};var o=function(t){t=t||{status:"all"};var n=a.extend({},t,{offset:(e.currentPage-1)*e.itemsPerPage,limit:e.itemsPerPage});e.isLoading=!0,s.query(n).$promise.then(function(t){e.posts=t.results,e.isLoading=!1;var n=new Date(e.posts[0].created);e.start_timestamp=e.timeSince(n),e.posts.forEach(function(e){e.user=i.get({id:e.user.id})})})};e.pageChanged=o,e.currentPage=1,e.itemsPerPageOptions=[10,20,50],e.itemsPerPage=e.itemsPerPageOptions[0],e.start_timestamp=null,o()}],template:t(609)}}]},function(e,exports,t){"use strict";function n(e,t,n,s){function i(){e.currentInterval=e.editableInterval,o(),e.filtersMenuOpen=!1}function a(){e.editableInterval=e.currentInterval,e.filtersMenuOpen=!1}function o(){r(e.currentInterval)}function r(t){switch(t){case"month":e.filters.created_after=n().startOf("month").toDate(),e.filters.created_before=null;break;case"all":e.filters.created_after=null,e.filters.created_before=null;break;case"custom":e.filters.created_after=e.createdAfter,e.filters.created_before=e.createdBefore;break;default:e.filters.created_after=n().startOf("week").toDate(),e.filters.created_before=null}return e.createdAfter=e.filters.created_after,e.createdBefore=e.filters.created_before,e.filters}e.isActivityAvailable=!1,e.currentInterval="all",e.editableInterval="all",e.filters={created_after:null,created_before:null},e.filtersMenuOpen=!1,e.dateOptions={format:"yyyy-mm-dd"},e.saveFilters=i,e.cancelChangeFilters=a,function(){e.$emit("event:mode:change","activity"),t("nav.activity").then(function(t){e.$emit("setPageTitle",t)}),s.loadFeatures().then(function(){e.isActivityAvailable=s.isViewEnabled("activity")}),o()}()}e.exports=n,n.$inject=["$scope","$translate","moment","Features"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"="},controller:s,template:t(611)}}function s(e,t,n,s,i,a){function o(s){s=s||a.getQueryParams(e.filters);var o=i.extend({},s,{group_by:e.groupBy.value});e.isLoading=!0,n.stats(o).$promise.then(function(n){e.options.chart.xAxis.axisLabel=t.instant(e.groupByOptions[e.groupBy.value]),n.totals[0]&&(n.totals[0].key=e.options.chart.yAxis.axisLabel),e.data=n.totals,e.isLoading=!1})}e.data=[{values:[]}],e.groupByOptions={tags:"nav.categories",form:"app.surveys",status:"post.status"},e.groupBy={value:"tags"},e.options={chart:{type:"multiBarHorizontalChart",height:450,margin:{top:0,right:40,bottom:40,left:5},x:function(e){return e.label},y:function(e){return e.total},showValues:!1,showControls:!1,valueFormat:s.format("d"),transitionDuration:500,xAxis:{axisLabel:t.instant("post.categories"),tickPadding:-10,axisLabelDistance:0},yAxis:{axisLabel:t.instant("graph.post_count"),tickFormat:s.format("d")},tooltip:{contentGenerator:function(e){return"<h3>"+e.value+"</h3><p>"+e.data.total+"</p>"}},forceY:0,barColor:s.scale.category20().range(),noData:t.instant("graph.no_data")}},e.reload=o,function(){e.$watch("filters",function(){o()},!0),a.setMode("activity")}()}e.exports=n,s.$inject=["$scope","$translate","PostEndpoint","d3","_","PostFilters"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"="},controller:s,template:t(612)}}function s(e,t,n,s,i,a){function o(t){t=t||a.getQueryParams(e.filters);var s=i.extend({},t,{timeline:1,timeline_attribute:e.timelineAttribute,group_by:e.groupBy.value});e.isLoading=!0,n.stats(s).$promise.then(function(t){!t.totals.length||i.chain(t.totals).pluck("values").pluck("length").max().value()<3?e.data=[{values:[]}]:e.data=t.totals,e.isLoading=!1})}function r(t){e.options.chart.yAxis.axisLabel=t?l:c}var l=t.instant("graph.cumulative_post_count"),c=t.instant("graph.new_post_count"),d=t.instant("graph.post_date");e.showCumulative=!0,e.isLoading=!0,e.timelineAttribute="created",e.data=[{values:[]}],e.groupByOptions={"":"graph.all_posts",tags:"nav.categories",form:"app.surveys",status:"post.status"},e.groupBy={value:""},e.options={chart:{type:"lineChart",height:450,margin:{top:0,right:65,bottom:40,left:65},showControls:!1,x:function(e){return new Date(1e3*parseInt(e.label))},y:function(t){return t[e.showCumulative?"cumulative_total":"total"]},transitionDuration:500,xAxis:{axisLabel:d,tickFormat:function(e){return s.time.format("%e %b %Y")(new Date(e))}},yAxis:{axisLabel:c,tickFormat:s.format("d")},forceY:0,tooltip:{contentGenerator:function(e){return"<h3>"+e.series[0].key+"</h3><p>"+e.point.y+" posts at "+s.time.format("%e %b %Y")(new Date(e.point.x))+"</p>"}},noData:t.instant("graph.no_data")}},e.reload=o,function(){e.$watch("filters",function(){o()},!0),e.$watch("showCumulative",r),a.setMode("activity")}()}e.exports=n,s.$inject=["$scope","$translate","PostEndpoint","d3","_","PostFilters"]},function(e,exports,t){"use strict";angular.module("ushahidi.main",["ushahidi.posts","ushahidi.activity"]),t(844),t(803)},function(e,exports,t){"use strict";function n(e,t,n,s){function i(){e.openTemplate('<collection-listing toggle-mode="false"></collection-listing>',"app.collections","grid-three-up",!1,!0,!0)}function a(t){var n={posts:t};e.openTemplate('<collection-listing toggle-mode="true" posts="posts"></collection-listing>',"app.edit_collection","grid-three-up",n,!0,!0)}function o(t){var n={collection:t};e.openTemplate('<collection-editor collection="collection"></collection-editor>',"app.edit_collection","grid-three-up",n,!1,!1)}function r(t){var n={posts:t};e.openTemplate('<collection-editor posts="posts"></collection-editor>',"app.create_collection","grid-three-up",n,!1,!1)}function l(e){t.confirm("notify.collection.delete_collection_confirm").then(function(){s.delete({collectionId:e.id}).$promise.then(function(){n.url("/")},function(e){t.apiErrors(e)})})}return{showCollectionList:i,showAddToCollection:a,editCollection:o,createCollection:r,deleteCollection:l}}e.exports=n,n.$inject=["ModalService","Notify","$location","CollectionEndpoint"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{collection:"<",posts:"="},controller:s,template:t(613)}}function s(e,t,n,s,i,a,o,r,l,c,d){function u(){e.cpyCollection={},e.cpyCollection.view="map",e.cpyCollection.role=[]}function p(){return i.hasPermission("Manage Posts")}function g(){e.$parent.closeModal()}function f(t){var n=t.id?a.update:a.save;t.id||(t.user_id=i.currentUser?i.currentUser.userId:null),t.collectionId=t.id,n(t).$promise.then(function(n){e.collection=angular.copy(n),e.$parent.closeModal(),e.posts?d.showAddToCollection(e.posts):i.$broadcast("collection:update",n),r.notify(t.id?"notify.collection.updated_collection":"notify.collection.created_collection",{collection:n.name})},function(e){r.apiErrors(e)})}e.isAdmin=i.isAdmin,e.views=l.views(),e.featuredEnabled=p,e.cancel=g,e.saveCollection=f,function(){e.collection?e.cpyCollection=angular.copy(e.collection):u(),c.query().$promise.then(function(t){e.roles=t})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$q","$location","$translate","$rootScope","CollectionEndpoint","_","Notify","ViewHelper","RoleEndpoint","CollectionsService"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",replace:!0,scope:{isToggleMode:"<toggleMode",posts:"="},controller:s,template:t(614)}}function s(e,t,n,s,i,a,o,r,l,c){function d(e){t.isToggleMode?t.collections=o.editableByMe({q:e}):t.collections=o.query({q:e})}function u(e){return 1===t.posts.length&&r.contains(t.posts[0].sets,String(e.id))}function p(e){r.each(t.posts,function(t){t.sets.push(e)})}function g(e){var n=e.id,s=e.name,l=[];r.each(t.posts,function(e){l.push(o.addPost({collectionId:n,id:e.id}))}),i.all(l).then(function(){t.addToPostsSet(String(n)),a.notify("notify.collection.add_to_collection",{collection:s})},function(e){a.apiErrors(e)})}function f(e){var n=e.id,s=e.name,l=[];r.each(t.posts,function(e){l.push(o.removePost({collectionId:n,id:e.id}))}),i.all(l).then(function(){r.each(t.posts,function(e){e.sets=r.without(e.sets,String(n))}),a.notify("notify.collection.removed_from_collection",{collection:s})},function(e){a.apiErrors(e)})}function m(e){t.isToggleMode?h(e):v(e)}function v(e){t.$parent.closeModal();var n=e.view;"list"===n||"data"===n?c.go("posts.data.collection",{collectionId:e.id}):c.go("posts.map.collection",{collectionId:e.id})}function h(e){1===t.posts.length&&r.contains(t.posts[0].sets,String(e.id))?f(e):g(e)}function b(){t.$parent.closeModal(),l.createCollection(t.posts)}t.postInCollection=u,t.toggleCollection=h,t.addToPostsSet=p,t.collectionClickHandler=m,t.createNewCollection=b,t.searchCollections=d,t.currentUser=e.currentUser,function(){d()}()}e.exports=n,n.$inject=[],s.$inject=["$rootScope","$scope","$translate","$location","$q","Notify","CollectionEndpoint","_","CollectionsService","$state"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"=",collection:"="},controller:s,template:t(615)}}function s(e,t,n,s,i,a,o,r,l,c){function d(e){return e&&r.contains(e.allowed_privileges,"update")}function u(){l.editCollection(e.collection)}function p(){l.deleteCollection(e.collection)}function g(t){var n={set:t.id};i.save(n).$promise.then(function(n){e.showNotificationLink=!1,e.notification=n,o.notify("notify.notification.add",{set:t.name})})}function f(){o.confirm("notify.notification.delete_confirm").then(function(){i.delete(e.notification).$promise.then(function(t){e.showNotificationLink=!0,o.notify("notify.notification.destroy_notification_success",{name:t.name})})})}function m(){c.clearFilters(),c.setMode("all")}e.editCollection=u,e.deleteCollection=p,e.saveNotification=g,e.removeNotification=f,e.clearFilters=m,e.showNotificationLink=!0,e.canEdit=!1,e.notification=!1,function(){e.canEdit=d(e.collection),i.query({set:e.collection.id,ignore403:!0,user:"me"},function(t){e.showNotificationLink=0===t.length,t.length&&(e.notification=t[0])},angular.noop)}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope","$translate","$state","NotificationEndpoint","CollectionEndpoint","Notify","_","CollectionsService","PostFilters"]},function(e,exports,t){"use strict";e.exports=["$rootScope","_","CollectionsService",function(e,n,s){return{restrict:"E",replace:!0,scope:{posts:"=",selectedPosts:"=",onDone:"&"},link:function(e,t,i,a){e.toggleCollection=function(){var t=n.filter(e.posts,function(t){return n.contains(e.selectedPosts,t.id)});s.showAddToCollection(t),e.onDone()}},template:t(616)}}]},function(e,exports,t){"use strict";e.exports=["$rootScope","CollectionsService",function(e,n){return{restrict:"E",replace:!0,scope:{post:"="},link:function(e,t,s,i){e.toggleCollection=function(){n.showAddToCollection([e.post])}},template:t(617)}}]},function(e,exports,t){"use strict";function n(e,n,s,i,a,o,r,l){function c(t){function i(){o.delete(t.post).then(function(){e.$broadcast("event:edit:post:status:data:mode:saveSuccess",{post:t.post,deleted:!0}),a.$current.includes.posts?a.$current.includes["posts.map"]&&a.reload():a.go("posts.data")})}function l(){return!r.isPostLockedForCurrentUser(t.post)}function c(e){if(!l())return void s.error("post.already_locked");a.go("posts.data.edit",{postId:e})}function d(i){t.post.status=i,n.update(t.post).$promise.then(function(){e.$broadcast("event:edit:post:status:data:mode:saveSuccess",{post:t.post}),s.notify("notify.post.save_success",{name:t.post.title})},function(e){s.apiErrors(e)})}t.deletePost=i,t.updateStatus=d,t.openEditMode=c,t.postIsUnlocked=l,function(){t.statuses=o.getStatuses()}()}return{restrict:"E",replace:!1,scope:{post:"="},template:t(618),link:c}}e.exports=n,n.$inject=["$rootScope","PostEndpoint","Notify","$location","$state","PostActionsService","PostLockService","_"]},function(e,exports,t){"use strict";e.exports=["_","Util","$translate","PostEndpoint","Notify","$q",function(e,t,n,s,i,a){var o={delete:function(e){var t=a.defer();return i.confirmDelete("notify.post.destroy_confirm").then(function(){s.delete({id:e.id}).$promise.then(function(){i.notify("notify.post.destroy_success",{name:e.title}),t.resolve()},function(e){i.apiErrors(e),t.reject(e)})}),t.promise},getStatuses:function(){return["published","draft","archived"]}};return t.bindAllFunctionsToSelf(o)}]},function(e,exports,t){"use strict";function n(e,n,s,i){return{restrict:"E",replace:!0,scope:{post:"="},template:t(619),link:function(t){function s(){return n.isPostLockedForCurrentUser(t.post)}function a(){n.unlockByPost(t.post).then(function(){t.post.lock=void 0})}function o(){return-1!==t.post.allowed_privileges.indexOf("update")}t.canUnlock=!1,t.user=void 0,t.unlock=a,t.showLockMessage=s,t.isAdmin=i.isAdmin,function(){t.canUnlock=o(),e.get({id:t.post.lock.user.id}).$promise.then(function(e){t.user=e})}()}}}e.exports=n,n.$inject=["UserEndpoint","PostLockService","Notify","$rootScope"]},function(e,exports,t){"use strict";function n(e,t,n,s,i,a){function o(){if(null!==e.currentUser&&i.init()){var t=e.currentUser.userId+"-lock";i.on(t,function(e){a.error("post.locking.lock_broken_by_other")})}}function r(t){return!!e.loggedin&&(!!t.lock&&(!e.currentUser||e.currentUser.userId!==parseInt(t.lock.user.id)))}function l(e){n.unlock(e).$promise.then(function(){a.success("post.locking.unlocked")},p)}function c(e){n.unlock({post_id:e.id}).$promise.then(function(){})}function d(e){var t=s.defer();return n.unlockByPost({post_id:e.id}).$promise.then(function(){a.success("post.locking.unlocked"),t.resolve()},function(e){p(e),t.reject(e)}),t.promise}function u(e){n.unlock({post_id:e.id}).$promise.then(function(){a.success("post.locking.locked")},p)}function p(e){a.apiErrors(e)}return{unlock:l,unlockByPost:d,getLock:u,createSocketListener:o,isPostLockedForCurrentUser:r,unlockSilent:c}}e.exports=n,n.$inject=["$rootScope","_","PostLockEndpoint","$q","socket","Notify"]},function(e,exports,t){"use strict";function n(e,n,s,i){return{restrict:"E",scope:{post:"=",hideDateThisWeek:"@?"},template:t(620),link:function(e){function t(){e.visibleTo=o(e.post),e.source=i.formatSource(e.post.source),e.post.user=i.loadUser(e.post),e.post.contact=i.loadContact(e.post),a()}function a(){var t=s(e.post.post_date),n=s();n.isSame(t,"day")?e.displayTime=t.fromNow():n.isSame(t,"week")&&e.hideDateThisWeek?e.displayTime=t.format("LT"):e.displayTime=t.format("LL"),e.displayTimeFull=t.format("LLL"),e.timeago=t.from(n)}function o(e){return"draft"===e.status?"draft":n.isEmpty(e.published_to)?"everyone":e.published_to.join(", ")}e.visibleTo="",e.displayTime="",e.displayTimeFull="",e.timeago="",e.hideDateThisWeek=e.hideDateThisWeek||!1,e.$watch("post.id",function(e,n){e!==n&&t()}),t()}}}e.exports=n,n.$inject=["$translate","_","moment","PostMetadataService"]},function(e,exports,t){"use strict";function n(e,t,n){var s={formatSource:function(e){return"sms"===e?"SMS":e?e.charAt(0).toUpperCase()+e.slice(1):"Web"},loadUser:function(e){return e.user&&e.user.id?t.get({id:e.user.id}):e.user},loadContact:function(e){return!e.user&&e.contact&&e.contact.id?n.get({id:e.contact.id,ignore403:!0},function(e){},angular.noop):e.contact}};return e.bindAllFunctionsToSelf(s)}e.exports=n,n.$inject=["Util","UserEndpoint","ContactEndpoint"]},function(e,exports,t){"use strict";function n(e,t,n,s,i){function a(e){return!!e&&(!!n.hasPermission("Manage Posts")||(!!e.everyone_can_create||null!==n.currentUser&&!!i.contains(e.can_create,n.currentUser.role)))}function o(){var e=s.defer();return t.query().$promise.then(function(t){n.hasPermission("Manage Posts")?e.resolve(t):e.resolve(i.filter(t,a))}),e.promise}var r={allowedSurveys:o,canCreatePostInSurvey:a};return e.bindAllFunctionsToSelf(r)}e.exports=n,n.$inject=["Util","FormEndpoint","$rootScope","$q","_"]},function(e,exports,t){"use strict";function n(e,n,s,i,a,o,r,l){function c(t,s,i){function r(){t.hideMap=!0;var i=e.geojson({id:t.postId}).$promise,a=n.createMap(s[0].querySelector("#post-map")).then(function(e){c=e});o.all({map:a,geojson:i}).then(l),t.$on("$destroy",function(){c&&(c.remove(),c=null)})}function l(e){var s=e.geojson;if(s.features&&0===s.features.length)return void(t.hideMap=!0);t.hideMap=!1;var i=a.geoJson(s,{pointToLayer:n.pointToLayer});i.addTo(c),c.fitBounds(i.getBounds()),c.getZoom()>15&&c.setZoom(15)}var c;t.hideMap=!1,r(),t.$watch("postId",function(e,t){e!==t&&(c&&(c.remove(),c=null),r())})}return{restrict:"E",scope:{postId:"="},link:c,template:t(622)}}e.exports=n,n.$inject=["PostEndpoint","Maps","_","PostFilters","Leaflet","$q","$rootScope","$compile"]},function(e,exports,t){"use strict";e.exports=["FormEndpoint","PostEndpoint","$translate","Notify","$location",function(e,n,s,i,a){return{restrict:"E",replace:!0,scope:{post:"="},template:t(621),link:function(t){s("post.unstructured.add_survey.info",{source:t.post.source}).then(function(e){t.surveyInfo=e}),t.addForm=function(){t.post.form={id:t.selectedSurvey},n.update(t.post).$promise.then(function(e){i.notify("notify.post.save_success",{name:t.post.title}),a.path("/posts/"+t.post.id+"/edit")},function(e){i.apiErrors(e)})},e.query().$promise.then(function(e){t.surveys=e,e.length>0&&(t.selectedSurvey=e[0].id)})}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",replace:!0,scope:{post:"<",$transition$:"<"},controller:s,template:t(623)}}function s(e,t,n,s,i,a,o,r,l,c,d,u,p,g,f,m,v,h,b,y){function w(){e.post.title&&e.post.title.length?e.$emit("setPageTitle",e.post.title):n("post.post_details").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.post.form&&e.post.form.id?s.all([p.get({id:e.post.form.id}),u.query({formId:e.post.form.id,postStatus:e.post.status}).$promise,d.query({formId:e.post.form.id}).$promise,c.query().$promise]).then(function(t){e.form=t[0],e.form_name=t[0].name,e.form_description=t[0].description,e.form_color=t[0].color,e.tags=t[3],e.post.title||n("post.type_details",{type:t[0].name}).then(function(t){e.$emit("setPageTitle",t)});var s=f.sortBy(t[1],"priority"),i=f.chain(t[2]).sortBy("priority").value();angular.forEach(i,function(e){this[e.key]=e},e.form_attributes),!f.isEmpty(s)&&s.length>1&&(e.visibleTask=s[1].id,s[1].hasFileIcon=!0),f.each(s,function(t){"post"===t.type?e.post_task=t:-1!==f.indexOf(e.post.completed_stages,t.id)&&(t.completed=!0)}),s=f.filter(s,function(e){return"post"!==e.type}),e.tasks=s,e.tasks_with_attributes=[],f.each(e.post.values,function(t,n){e.form_attributes[n]&&e.tasks_with_attributes.push(e.form_attributes[n].form_stage_id)}),e.tasks_with_attributes=f.uniq(e.tasks_with_attributes)}):e.tasks=[]}e.$watch("post",function(e){w()}),t.setLayout("layout-d"),e.post=e.post,e.post_task={},e.hasPermission=t.hasPermission,e.canCreatePostInSurvey=h.canCreatePostInSurvey,e.mapDataLoaded=!1,e.form_attributes=[],e.selectedPost={post:e.post},w(),e.publishedFor=function(){return"draft"===e.post.status?"post.publish_for_you":f.isEmpty(e.post.published_to)?"post.publish_for_everyone":e.post.published_to.join(", ")},e.stageIsComplete=function(t){return f.includes(e.post.completed_stages,t)},e.taskHasValues=function(t){return f.contains(e.tasks_with_attributes,t.id)},e.showTasks=function(){return e.tasks.length>1},e.isPostValue=function(t){return e.form_attributes[t]&&e.post_task&&e.form_attributes[t].form_stage_id===e.post_task.id},e.showType=function(e){return"point"!==e&&"geometry"!==e},e.activateTaskTab=function(t){e.visibleTask=t},e.publishPostTo=function(t){var n=f.where(e.tasks,{required:!0}),s=[];if(f.each(n,function(t){-1===f.indexOf(e.post.completed_stages,t.id)&&s.push(i("translate")("post.modify.incomplete_step",{stage:t.label}))}),s.length)return void m.errorsPretranslated(s);e.post=t,o.update(e.post).$promise.then(function(){var t="draft"===e.post.status?"notify.post.set_draft":"notify.post.publish_success",n="draft"===t?"draft":f.isEmpty(e.post.published_to)?"everyone":e.post.published_to.join(", ");m.notify(t,{role:n})},function(e){m.apiErrors(e)})},e.close=function(){var t=e.$transition$.$from().name;"posts.data.detail"===t||""===t||"posts.data.edit"===t?b.go("posts.data"):b.go(t),e.$parent.deselectPost()}}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope","$translate","$q","$filter","$location","PostEndpoint","CollectionEndpoint","UserEndpoint","TagEndpoint","FormAttributeEndpoint","FormStageEndpoint","FormEndpoint","Maps","_","Notify","moment","PostSurveyService","$state","$window"]},function(e,exports,t){"use strict";e.exports=["MediaEndpoint","_",function(e,n){function s(t){function s(){n.isNull(t.mediaId)||(t.mediaLoaded=!1,e.get({id:t.mediaId}).$promise.then(function(e){t.media=e,t.mediaLoaded=!0}))}s(),t.$watch("mediaId",function(e,t){e!==t&&s()})}return{restrict:"E",replace:!0,scope:{mediaId:"=",label:"@",mediaHasCaption:"="},template:t(624),link:s}}]},function(e,exports,t){"use strict";e.exports=["$rootScope","$translate","ContactEndpoint","MessageEndpoint","Notify","UserEndpoint","_","moment","ModalService",function(e,n,s,i,a,o,r,l,c){return{restrict:"E",replace:!0,scope:{post:"="},template:t(626),link:function(e){function n(){e.post.contact&&e.post.contact.id&&(e.messages=[],e.post.contact.contact?e.contact=e.post.contact:s.get({id:e.post.contact.id}).$promise.then(function(t){e.contact=t}),d())}function d(){e.post.contact.id&&i.allInThread({contact:e.post.contact.id,offset:(e.currentPage-1)*e.itemsPerPage,limit:e.itemsPerPage}).$promise.then(function(t){var n,s=t.results;e.messages=s,r.each(s,function(e,t){e.user&&(e.user=o.get({id:e.user.id})),n=e.updated||e.created,e.displayTime=u(n)}),e.totalItems=t.total_count,e.showPagination=e.totalItems>0&&e.totalItems/e.itemsPerPage>1})}function u(e){var t=l();return e=l(e),t.isSame(e,"day")?e.fromNow():e.format("LLL")}e.$watch("post.contact.id",function(e,t){e!==t&&n()}),e.currentPage=1,e.itemsPerPage=5,e.totalItems=e.itemsPerPage,e.pageChanged=d,e.showPagination=!1,n(),e.sendMessage=function(){c.close();var t={message:e.message.reply_text,direction:"outgoing",contact_id:e.post.contact.id,parent_id:e.messages[e.messages.length-1].id};i.save(t).$promise.then(function(t){d(),a.notify("notify.message.sent_to",{contact:e.contact.contact})},function(e){a.apiErrors(e)})},e.reply=function(){e.message={},c.openTemplate(t(625),"post.messages.send",!1,e,!0,!0)}}}}]},function(e,exports,t){"use strict";e.exports=["PostEndpoint","moment","_",function(e,n,s){return{restrict:"E",replace:!0,scope:{key:"=",value:"=",attribute:"=",type:"=",tags:"="},template:t(627),link:function(t){t.standardTask="standard"===t.type,t.formatTags=function(e){var n=" ";return s.each(e,function(i,a){var o=s.where(t.tags,{id:parseInt(i)});o[0]&&(i=o[0].tag,a<e.length-1?n+=i+", ":n+=i)}),n},"relation"===t.attribute.type&&(t.value=t.value.map(function(t){return e.get({id:t})})),"tags"===t.attribute.input&&(t.value=t.formatTags(t.value)),"datetime"===t.attribute.type&&("date"===t.attribute.input&&(t.value=t.value.map(function(e){return n(e).format("LL")})),"datetime"===t.attribute.input&&(t.value=t.value.map(function(e){return n(e).format("LLL")})),"time"===t.attribute.input&&(t.value=t.value.map(function(e){return n(e).format("LT")})))}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{videoUrl:"=",label:"@"},template:t(628),controller:s}}function s(e,t){!function(){e.videoUrl=t.trustAsResourceUrl(e.videoUrl[0])}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$sce"]},function(e,exports,t){"use strict";function n(e,n,s,i,a,o,r,l){function c(t,n,o,r){function l(e){n[0].querySelector(".searchbar").contains(e.target)||t.hideSearchResults()}function c(e){var t=e.latlng.wrap(),n=t.lat,s=t.lng;g(n,s),u(n,s)}function d(){r.$viewValue&&void 0!==r.$viewValue.lat&&void 0!==r.$viewValue.lon&&(g(r.$viewValue.lat,r.$viewValue.lon),f(r.$viewValue.lat,r.$viewValue.lon))}function u(e,t){r.$setViewValue({lat:e,lon:t})}function p(e,t){g(e,t),f(e,t),u(e,t)}function g(e,t){S?S.setLatLng([e,t]):(S=s.marker([e,t],{draggable:!0,icon:a.pointIcon()}),S.addTo(x),S.on("dragend",function(e){var t=e.target.getLatLng();u(t.lat,t.lng)}))}function f(e,t){x.setView([e,t],C)}function m(){r.$setViewValue(null),S&&(x.removeLayer(S),S=null)}function v(){n[0].querySelector("#searchbar-results").classList.add("active")}function h(){n[0].querySelector("#searchbar-results").classList.remove("active")}function b(e){var n=8===e.keyCode||46===e.keyCode,s=e.keyCode>47&&e.keyCode<58,i=e.keyCode>64&&e.keyCode<91;if((n||s||i)&&(t.processing=!0,t.searchTimeout&&clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(t.searchLocation,250)),13===e.keyCode)return e.preventDefault(),!1}function y(){t.processing=!0,i.searchAllInfo(t.searchLocationTerm).then(function(e){t.processing=!1,t.searchResults=e})}function w(e){t.searchLocationTerm="",u(e.lat,e.lon),g(e.lat,e.lon),f(e.lat,e.lon),t.hideSearchResults()}function _(){k.start(),t.hideSearchResults()}var k,x,S,C=8;t.processing=!1,t.searchLocationTerm="",t.searchLocation=y,t.searchTimeout,t.handleActiveSearch=b,t.clear=m,t.showSearchResults=v,t.hideSearchResults=h,t.chooseLocation=w,t.chooseCurrentLocation=_,t.searchResults=[],t.showCurrentPositionControl=!1,t.manualLatLong=p,function(){a.createMap(n[0].querySelector(".map")).then(function(e){x=e,d(),r.$render=d,x.on("click",c),x.on("locationfound",c),"https:"!==window.location.protocol&&"localhost"!==window.location.hostname||(t.showCurrentPositionControl=!0,k=s.control.locate({locateOptions:{maximumAge:6e4}}).addTo(x))}),e.on("click",l)}()}return{restrict:"E",replace:!0,require:"ngModel",scope:{id:"@",name:"@",required:"="},template:t(629),link:c}}e.exports=n,n.$inject=["$document","$http","Leaflet","Geocoding","Maps","_","Notify","$window"]},function(e,exports,t){"use strict";e.exports=["$q","$http","_","Util","$translate","MediaEndpoint","Notify",function(e,t,n,s,i,a,o){var r={saveMedia:function(t,s){var i=e.defer(),a=[];return n.each(t,function(e,t){e.changed&&(!e.id&&e.deleted?s.values[t][0]=null:e.file?a.push(r.uploadFile(e).then(function(e){s.values[t][0]=e?e.id:null})):(delete e.changed,a.push(r.update(e).then(function(e){s.values[t][0]=e?e.id:null}))))}),e.all(a).then(function(){i.resolve(s)}),i.promise},deleteMedia:function(t){return t?a.delete({id:t}).$promise:e.when()},update:function(t){var n=e.defer();return a.update(t).$promise.then(function(e){n.resolve(e)},function(e){o.apiErrors(e),n.resolve({})}),n.promise},uploadFile:function(n){var i=e.defer();return this.deleteMedia(n.id).then(function(){var e=new FormData;e.append("file",n.file),n.caption&&e.append("caption",n.caption),t.post(s.apiUrl("/media"),e,{headers:{"Content-Type":void 0}}).then(function(e){n.id=e.data.id,i.resolve(n)},function(e){o.apiErrors(e),i.resolve({})})},function(e){o.apiErrors(e),i.resolve({})}),i.promise}};return s.bindAllFunctionsToSelf(r)}]},function(e,exports,t){"use strict";e.exports=["$scope","$translate","$location","$controller","$transition$","PostEntity","PostEndpoint","FormEndpoint",function(e,t,n,s,i,a,o,r){t("post.create_post").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.post=a(),o.options().$promise.then(function(t){e.post.allowed_privileges=t.allowed_privileges}),r.getFresh({id:i.params().id}).$promise.then(function(t){e.form=t})}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{post:"<"},template:t(632),controller:s}}function s(e,t,n,s,i,o,r,l,c,d,u,p,g,f,m,v,h,b,y,w,_,k,x,S,C){function E(){return new a.default(function(t,n){if(!e.post.lock)return n();u.unlock({id:e.post.lock.id,post_id:e.post.id}).$promise.then(t,n)})}function A(){return new a.default(function(t,n){!e.editForm||e.editForm&&!e.editForm.$dirty?E().then(t,t):y.confirmLeave("notify.post.leave_without_save").then(function(){E().then(t,t)},function(){n()})})}function P(){e.post.form?e.selectForm():f.queryFresh().$promise.then(function(t){e.forms=t}),e.medias={},e.savingText=o.instant("app.saving"),e.submittingText=o.instant("app.submitting"),e.post.id&&p.createSocketListener()}function T(t){e.visibleStage=t}function F(){e.form=e.post.form,e.loadData().then(function(){r(function(){"published"!==e.post.status||I()||y.error("post.valid.invalid_state")})})}function M(){var t=[m.queryFresh({formId:e.post.form.id}).$promise,v.queryFresh({formId:e.post.form.id}).$promise,b.queryFresh().$promise];return e.post.id&&t.push(u.getLock({post_id:e.post.id}).$promise),n.all(t).then(function(t){if(e.post.id&&!t[3])return void x.go("posts.data.detail",{view:"data",postId:e.post.id});var n=e.post,s=w.sortBy(t[0],"priority"),i=w.chain(t[1]).sortBy("priority").value(),a=t[2];e.post.lock=t[3];var o=[];if(w.each(i,function(t){"title"===t.type||"description"===t.type?("title"===t.type&&(e.postTitleLabel=t.label,e.postTitleInstructions=t.instructions),"description"===t.type&&(e.postDescriptionLabel=t.label,e.postDescriptionInstructions=t.instructions)):o.push(t)}),o.map(function(t){if("upload"===t.input){e.post.values[t.key]&&e.post.values[t.key][0],e.medias[t.key]={}}"tags"===t.input&&(t.options=w.chain(t.options).map(function(e){return w.findWhere(a,{id:e})}).filter().value()),e.post.values[t.key]?"date"===t.input||"datetime"===t.input?e.post.values[t.key][0]&&(e.post.values[t.key][0]=l(e.post.values[t.key][0]).toDate()):"number"===t.input?e.post.values[t.key][0]&&(e.post.values[t.key][0]=parseFloat(e.post.values[t.key][0])):"tags"===t.input&&e.post.values[t.key]&&(e.post.values[t.key]=e.post.values[t.key].map(function(e){return parseInt(e)})):"location"===t.input?e.post.values.message_location?e.post.values[t.key]=angular.copy(e.post.values.message_location):e.post.values[t.key]=[null]:"number"===t.input?e.post.values[t.key]=[parseInt(t.default)]:"date"===t.input||"datetime"===t.input?e.post.values[t.key]=t.default?[new Date(t.default)]:[new Date]:e.post.values[t.key]=[t.default]}),w.each(s,function(e){e.attributes=w.filter(o,function(t){return t.form_stage_id===e.id})}),n.completed_stages.length===s.length-1&&s.length>1)e.setVisibleStage(s[1].id);else{var r=w.filter(s,function(e){return!w.contains(n.completed_stages,e.id)});r.length>1&&e.setVisibleStage(r[1].id)}e.tasks=s})}function I(){return g.validatePost(e.post,e.editForm,e.tasks)}function U(e){_.delete(e).then(function(){i.path("/")})}function q(){return e.post.allowed_privileges&&-1!==e.post.allowed_privileges.indexOf("change_status")}function L(){return k.saveMedia(e.medias,e.post)}function D(){return e.editForm&&!e.editForm.$dirty?(y.infoModal("post.valid.no_changes"),void t.$broadcast("event:edit:post:data:mode:saveError")):e.canSavePost()?void L().then(function(){"message_location"in e.post.values&&(e.post.values.message_location=[]);var n=g.cleanPostValues(angular.copy(e.post));e.tagKeys.length>0&&(n.tags=w.chain(n.values).pick(e.tagKeys).values().flatten().filter().uniq().value());var s;s=n.id?d.update(n):d.save(n),s.$promise.then(function(n){var s=n.status&&"published"===n.status?"notify.post.save_success":"notify.post.save_success_review";e.editForm.$dirty=!1,O=!0,x.go("posts.data.detail",{view:"data",postId:n.id}),n.id&&-1!==n.allowed_privileges.indexOf("read")&&(e.post.id=n.id),y.notify(s,{name:e.post.title}),t.$broadcast("event:edit:post:data:mode:saveSuccess",{post:n})},function(e){var n=[];w.each(e.data.errors,function(e,t){"limit::posts"===e.title?y.limit("limit.post_limit_reached"):n.push(e)}),y.errors(w.pluck(n,"message")),t.$broadcast("event:edit:post:data:mode:saveError")})}):(y.error("post.valid.validation_fail"),void t.$broadcast("event:edit:post:data:mode:saveError"))}e.everyone=s("translate")("post.modify.everyone"),e.validationErrors=[],e.visibleStage=1,e.enableTitle=!0,e.setVisibleStage=T,e.loadData=M,e.allowedChangeStatus=q,e.deletePost=U,e.canSavePost=I,e.savePost=D,e.postTitleLabel="Title",e.postDescriptionLabel="Description",e.tagKeys=[],e.save=o.instant("app.save"),e.saving=o.instant("app.saving"),e.submit=o.instant("app.submit"),e.submitting=o.instant("app.submitting"),e.hasPermission=t.hasPermission("Manage Posts"),e.selectForm=F,e.isSaving=C.getSavingState;var O=!1;e.$on("event:edit:post:reactivate",function(){P()}),e.$on("event:edit:post:data:mode:save",function(){e.savePost()});var R=S.onStart({},function(e){return!(!O&&"posts.data.edit"===e.from().name)||A()});e.$on("$destroy",function(){R()}),P()}var i=t(317),a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope","$q","$filter","$location","$translate","$timeout","moment","PostEntity","PostEndpoint","PostLockEndpoint","PostLockService","PostEditService","FormEndpoint","FormStageEndpoint","FormAttributeEndpoint","UserEndpoint","TagEndpoint","Notify","_","PostActionsService","MediaEditService","$state","$transitions","LoadingProgress"]},function(e,exports,t){"use strict";e.exports=["moment","_",function(e,n){return{restrict:"E",replace:!0,scope:{},require:"ngModel",template:t(633),link:function(t,n,s,i){function a(){t.model=e(i.$viewValue).toDate()}function o(){i.$setViewValue(t.model)}t.timeOptions={format:"HH:i",interval:15,onClose:o},t.dateOptions={format:"yyyy-mm-dd",onClose:o},t.model=null,i&&(i.$render=a)}}}]},function(e,exports,t){"use strict";e.exports=["_","Util","$translate","Notify",function(e,t,n,s){var i={cleanPostValues:function(t){return e.each(t.values,function(n,s){t.values[s]=e.filter(n),t.values[s].length||delete t.values[s]}),t},validatePost:function(t,n,s){var i=!0,a=[];return e.each(s,function(n){("post"===n.type||e.contains(t.completed_stages,n.id))&&a.push(n)}),!!n&&(!!t.form&&(!n.title.$invalid&&(!(!n.content||n.content.$invalid)&&(e.each(a,function(t){var s=e.where(t.attributes,{required:!0});e.each(s,function(t){if("checkbox"===t.input){var s=!1;e.each(t.options,function(a){e.isUndefined(n["values_"+t.id+"_"+a])||n["values_"+t.id+"_"+a].$invalid||(s=i)}),i=s}else(e.isUndefined(n["values_"+t.id])||n["values_"+t.id].$invalid)&&(e.isUndefined(n["values_"+t.id])||(n["values_"+t.id].$dirty=!0),i=!1)})}),i))))}};return t.bindAllFunctionsToSelf(i)}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{post:"=",form:"="},template:t(634),controller:s}}function s(e,t,n,s,i,a,o,r,l,c,d,u,p,g,f,m,v,h,b,y,w,_){function k(t){e.visibleStage=t}function x(){var n=[g.queryFresh({formId:e.post.form.id}).$promise,f.queryFresh({formId:e.post.form.id}).$promise,v.queryFresh().$promise];return e.post.id&&n.push(c.getLock({post_id:e.post.id}).$promise),t.all(n).then(function(t){e.post.id&&!t[3]&&_.go("postEdit",{id:e.post.id});var n=e.post,s=b.sortBy(t[0],"priority"),i=b.chain(t[1]).sortBy("priority").value(),a=t[2],r=[];if(b.each(i,function(t){"title"===t.type||"description"===t.type?("title"===t.type&&(e.postTitleLabel=t.label,e.postTitleInstructions=t.instructions),"description"===t.type&&(e.postDescriptionLabel=t.label,e.postDescriptionInstructions=t.instructions)):r.push(t)}),r.map(function(t){if("upload"===t.input){e.post.values[t.key]&&e.post.values[t.key][0],e.medias[t.key]={}}"tags"===t.input&&(t.options=b.chain(t.options).map(function(e){return b.findWhere(a,{id:e})}).filter().value()),e.post.values[t.key]?"date"===t.input||"datetime"===t.input?e.post.values[t.key][0]&&(e.post.values[t.key][0]=o(e.post.values[t.key][0]).toDate()):"number"===t.input?e.post.values[t.key][0]&&(e.post.values[t.key][0]=parseFloat(e.post.values[t.key][0])):"tags"===t.input&&e.post.values[t.key]&&(e.post.values[t.key]=e.post.values[t.key].map(function(e){return parseInt(e)})):"location"===t.input?e.post.values.message_location?e.post.values[t.key]=angular.copy(e.post.values.message_location):e.post.values[t.key]=[null]:"number"===t.input?e.post.values[t.key]=[parseInt(t.default)]:"date"===t.input||"datetime"===t.input?e.post.values[t.key]=t.default?[new Date(t.default)]:[new Date]:e.post.values[t.key]=[t.default]}),b.each(s,function(e){e.attributes=b.filter(r,function(t){return t.form_stage_id===e.id})}),n.completed_stages.length===s.length-1&&s.length>1)e.setVisibleStage(s[1].id);else{var l=b.filter(s,function(e){return!b.contains(n.completed_stages,e.id)});l.length>1&&e.setVisibleStage(l[1].id)}e.tasks=s})}function S(){return d.validatePost(e.post,e.postForm,e.tasks)}function C(){c.unlock(e.post.lock).$promise.then(function(t){e.post.id?_.go("posts.data.detail",{view:"data",postId:e.post.id}):_.go("posts.data")})}function E(e){y.delete(e).then(function(){s.path("/")})}function A(){return e.post.allowed_privileges&&-1!==e.post.allowed_privileges.indexOf("change_status")}function P(){return w.saveMedia(e.medias,e.post)}function T(){if(e.saving_post=!0,!e.canSavePost())return h.error("post.valid.validation_fail"),void(e.saving_post=!1);P().then(function(){"message_location"in e.post.values&&(e.post.values.message_location=[]);var t=d.cleanPostValues(angular.copy(e.post));e.tagKeys.length>0&&(t.tags=b.chain(t.values).pick(e.tagKeys).values().flatten().filter().uniq().value());var n;n=t.id?l.update(t):l.save(t),n.$promise.then(function(t){var n=t.status&&"published"===t.status?"notify.post.save_success":"notify.post.save_success_review";t.id&&-1!==t.allowed_privileges.indexOf("read")?(e.saving_post=!1,e.post.id=t.id,h.notify(n,{name:e.post.title}),_.go("posts.data.detail",{postId:t.id})):(h.notify(n,{name:e.post.title}),_.go("posts.map.all"))},function(t){var n=[];b.each(t.data.errors,function(e,t){"limit::posts"===e.title?h.limit("limit.post_limit_reached"):n.push(e)}),h.errors(b.pluck(n,"message")),e.saving_post=!1})})}e.everyone=n("translate")("post.modify.everyone"),e.isEdit=!!e.post.id,e.validationErrors=[],e.visibleStage=1,e.enableTitle=!0,e.setVisibleStage=k,e.loadData=x,e.allowedChangeStatus=A,e.deletePost=E,e.canSavePost=S,e.savePost=T,e.cancel=C,e.postTitleLabel="Title",e.postDescriptionLabel="Description",e.tagKeys=[],e.save=i.instant("app.save"),e.saving=i.instant("app.saving"),e.submit=i.instant("app.submit"),e.submitting=i.instant("app.submitting"),function(){e.post.form=e.form,e.loadData().then(function(){a(function(){"published"!==e.post.status||S()||h.error("post.valid.invalid_state")})}),e.medias={},e.savingText=i.instant("app.saving"),e.submittingText=i.instant("app.submitting"),e.post.id&&u.createSocketListener()}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$q","$filter","$location","$translate","$timeout","moment","PostEntity","PostEndpoint","PostLockEndpoint","PostEditService","PostLockService","FormEndpoint","FormStageEndpoint","FormAttributeEndpoint","UserEndpoint","TagEndpoint","Notify","_","PostActionsService","MediaEditService","$state"]},function(e,exports,t){"use strict";e.exports=["CONST",function(e){return function(t){return angular.extend({},{title:"",content:"",locale:e.DEFAULT_LOCALE,values:{},completed_stages:[],published_to:[],post_date:new Date},t)}}]},function(e,exports,t){"use strict";e.exports=["$http","MediaEndpoint","MediaEditService","Util","Notify","$q",function(e,n,s,i,a,o){return{restrict:"E",replace:!0,require:"ngModel",scope:{media:"=",name:"@",mediaHasCaption:"<"},template:t(631),link:function(e,t,i,o){function r(){o.$viewValue&&(e.mediaId=parseInt(o.$viewValue),e.media.id!==e.mediaId&&n.get({id:e.mediaId}).$promise.then(function(t){e.media=t,e.media.changed=!1}))}function l(e){e&&o.$setDirty()}function c(e){"changed"===e&&o.$setDirty()}function d(){return!e.media.id&&!e.media.changed||e.media.deleted}function u(){return e.media.dataURI||e.media.id}function p(){return e.media.id}function g(t){a.confirmDelete("notify.post.delete_image_confirm").then(function(){s.deleteMedia(t).then(function(){e.media={},e.media.changed=!0,e.media.deleted=!0,e.mediaId=null})})}e.media={id:null,file:null,caption:"",dataURI:null,changed:!1},e.mediaId=null,e.showAdd=d,e.showReplace=u,e.showDelete=p,e.deleteMedia=g,function(){r(),e.$watch("media.changed",l),e.$watch("mediaId",c),o.$render=r}()}}}]},function(e,exports,t){"use strict";e.exports=["PostEndpoint","_",function(e,n){return{restrict:"E",replace:!0,scope:{id:"@",name:"@",model:"=",required:"=",attribute:"="},template:t(638),link:function(t){t.noResults=!1,t.searching=!1,t.$watch(function(){return t.model},function(n,s){t.selectedPost&&t.selectedPost.id===n||(t.selectedPost=e.get({id:t.model}))}),t.search=function(n){n.preventDefault();var s={q:t.searchTerm};t.attribute.config.input&&t.attribute.config.input.form&&(s.form=t.attribute.config.input.form.join(",")),t.noResults=!1,t.searching=!0,e.query(s).$promise.then(function(e){t.searching=!1,t.results=e.results,e.results.length||(t.noResults=!0)})},t.selectPost=function(e){t.model=e.id,t.selectedPost=e,t.results=null},t.clearPost=function(){t.model=null,t.selectedPost=null}}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{form:"=",post:"=",stages:"=",attributes:"=",visibleStage:"=",medias:"="},template:t(635),controller:s}}function s(e,t,n,s,i,a){function o(t){e.visibleStage=t}function r(t){return e.post.completed_stages.indexOf(t)>-1}function l(t){t=parseInt(t),a.includes(e.post.completed_stages,t)?e.post.completed_stages=a.without(e.post.completed_stages,t):e.post.completed_stages.push(t)}e.setVisibleStage=o,e.stageIsComplete=r,e.toggleStageCompletion=l,function(){e.setVisibleStage(e.visibleStage)}()}e.exports=n,n.$inject=[],s.$inject=["$scope","FormEndpoint","FormStageEndpoint","FormAttributeEndpoint","PostEditService","_"]},function(e,exports,t){"use strict";function n(e,n,s,i){function a(t){function i(e){t.post.status=e,t.form.status.$setDirty()}function a(){return t.post.allowed_privileges&&-1!==t.post.allowed_privileges.indexOf("change_status")}function o(){return!1}function r(){t.showEditAuthorButton=!1,t.showEditAuthorForm=!0}function l(){return!t.showEditAuthorForm&&!t.post.author_realname&&t.post.user}function c(){return!t.showEditAuthorForm&&t.post.author_realname}function d(){t.post.author_realname||t.post.user?(t.showEditAuthorButton=!0,t.showEditAuthorForm=!1):(t.showEditAuthorButton=!1,t.showEditAuthorForm=!0)}function u(){t.displayCreated=s(t.post.created).format("LLL"),t.post.updated&&(t.displayUpdated=s(t.post.updated).format("LLL"))}t.changeStatus=i,t.allowedChangeStatus=a,t.allowedChangeOwner=o,t.editAuthor=r,t.showUserRealname=l,t.showAuthorRealname=c,t.loadAuthorFormDefaults=d,function(){t.source=n.formatSource(t.post.source),t.post.user=n.loadUser(t.post),t.statuses=e.getStatuses(),u()}()}return{restrict:"E",scope:{post:"=",form:"="},template:t(636),link:a}}e.exports=n,n.$inject=["PostActionsService","PostMetadataService","moment","$rootScope"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{form:"=",post:"=",attribute:"=",postField:"=",medias:"=",categories:"="},controller:s,template:t(637)}}function s(e,t){function n(){return!t.isUndefined(e.postField)||t.contains(e.post.completed_stages,e.attribute.form_stage_id)}function s(e){return!!t.contains(g,e.input)}function i(e){return"date"===e.input}function a(e){return"datetime"===e.input}function o(e){return"text"===e.input}function r(e){return"textarea"===e.input}function l(e){return"checkbox"===e.input}function c(t){return 0===t.cardinality||e.post.values[t.key].length<t.cardinality}function d(t,n){return e.post.values[t.key].length>1}function u(t){e.post.values[t.key].push(null)}function p(t,n){e.post.values[t.key].splice(n,1)}var g=["checkbox","radio","tags"];e.isDate=i,e.isDateTime=a,e.isText=o,e.isTextarea=r,e.isCheckbox=l,e.dateFormat={format:"yyyy-mm-dd"},e.canAddValue=c,e.canRemoveValue=d,e.addValue=u,e.removeValue=p,e.taskIsMarkedCompleted=n,e.isFieldSetStructure=s}e.exports=n,n.$inject=[],s.$inject=["$scope","_"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{videoUrl:"="},template:t(639),controller:s}}function s(e,t,n,s){function i(t){a(t);var n=angular.element(document.getElementById(e.previewId));void 0===e.videoUrl?n.empty():(n.empty(),n.html(r()).wrap('<div class="video_embed-fluid" />'))}function a(n){if(n){var s=n.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);e.videoUrl=void 0,s?s[3].indexOf("youtu")>-1?(e.videoUrl="https://www.youtube.com/embed/"+s[6],e.video=t.trustAsResourceUrl(e.videoUrl)):s[3].indexOf("vimeo")>-1?(e.videoUrl="https://player.vimeo.com/video/"+s[6],e.video=t.trustAsResourceUrl(e.videoUrl)):o(n):o(n)}}function o(e){s.error("notify.video.incorrect_url",{url:e})}function r(){return'<iframe src="'+e.video+'" frameborder="0" allowfullscreen>'}e.constructIframe=i,function(){e.video=t.trustAsResourceUrl(e.videoUrl),e.previewId=e.videoId?e.videoId:n.simpluUUID()}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$sce","Util","Notify"]},function(e,exports,t){"use strict";angular.module("ushahidi.posts",[]).directive("postActions",t(816)).directive("postMetadata",t(820)).service("PostMetadataService",t(821)).service("PostSurveyService",t(822)).service("PostLockService",t(819)).directive("postLock",t(818)).directive("postMessages",t(827)).directive("postAddForm",t(824)).directive("postValue",t(828)).directive("postMediaValue",t(826)).directive("postVideoView",t(829)).directive("postDetailMap",t(823)).directive("postDetailData",t(825)).service("PostActionsService",t(817)).service("PostEntity",t(837)).service("PostEditService",t(835)).service("MediaEditService",t(831)).directive("postMedia",t(838)).directive("postVideoInput",t(843)).directive("postDatetime",t(834)).directive("postLocation",t(830)).directive("postRelation",t(839)).directive("postEditor",t(836)).directive("postValueEdit",t(842)).directive("postTabs",t(840)).directive("postToolbox",t(841)).directive("filterPostSortingOptions",t(865)).directive("filterPostOrderAscDesc",t(864)).directive("filterUnlockedOnTop",t(871)).directive("postDataEditor",t(833)).service("PostViewService",t(886)).directive("postViewMap",t(883)).directive("postViewCreate",t(881)).directive("postCard",t(877)).directive("postPreviewMedia",t(879)).directive("addPostButton",t(852)).directive("addPostSurveyList",t(853)).directive("addPostTextButton",t(854)).directive("modeContext",t(876)).directive("modeContextFormFilter",t(875)).directive("filterBySurvey",t(857)).directive("filterBySurveyDropdown",t(856)).directive("postToolbar",t(880)).directive("filterByDatasource",t(855)).directive("postViewData",t(882)).directive("filterPosts",t(866)).directive("filterCategory",t(859)).directive("filterDate",t(860)).directive("filterForm",t(861)).directive("filterVisibleTo",t(872)).directive("filterStatus",t(869)).directive("filterSource",t(868)).directive("filterLocation",t(863)).directive("filterHasLocation",t(862)).directive("postActiveSearchFilters",t(858)).service("PostFilters",t(878)).service("FilterTransformers",t(870)).directive("filtersDropdown",t(873)).directive("filterSavedSearch",t(867)).directive("sortAndFilterCounter",t(874)).directive("postShare",t(888)).directive("shareMenu",t(890)).directive("shareMenuModal",t(889)).directive("postExport",t(887)).directive("postViewUnavailable",t(885)).directive("savedSearchEditor",t(847)).directive("savedSearchCreate",t(846)).directive("savedSearchUpdate",t(851)).directive("savedSearchModal",t(850)).directive("savedSearchListEditorModal",t(849)).directive("savedSearchModeContext",t(848)).service("CollectionsService",t(810)).directive("collectionModeContext",t(813)).directive("collectionEditor",t(811)).directive("collectionListing",t(812)).directive("collectionToggleButton",t(814)).directive("collectionToggleLink",t(815)).config(t(845)).run(["Leaflet",function(e){e.Icon.Default.imagePath="/img"}])},function(e,exports,t){"use strict";e.exports=["$stateProvider","$urlMatcherFactoryProvider",function(e,n){n.strictMode(!1);var s=["$transition$","CollectionEndpoint","PostFilters",function(e,t,n){return e.params().collectionId?t.get({collectionId:e.params().collectionId}).$promise:"collection"===n.getMode()?n.getModeEntity("collection"):void 0}],i=["$transition$","SavedSearchEndpoint","PostFilters",function(e,t,n){return e.params().savedSearchId?t.get({id:e.params().savedSearchId}).$promise:"savedsearch"===n.getMode()?n.getModeEntity("savedsearch"):void 0}];e.state({name:"posts",abstract:!0,params:{filterState:{value:null,squash:!0}},resolve:{collection:s,savedSearch:i,filters:["PostFilters",function(e){return e.getFilters()}]},onEnter:["$transition$","PostFilters",function(e,t){e.params().filterState&&t.setFilters(e.params().filterState)}]}).state({url:"^/savedsearches/{savedSearchId:int}",name:"posts.savedsearchRedirector",resolve:{savedSearch:i},onEnter:["$state","savedSearch",function(e,t){"data"===t.view||"list"===t.view?e.go("posts.data",{savedSearchId:t.id}):e.go("posts.map.all",{savedSearchId:t.id})}]}).state({url:"^/collections/{collectionId:int}",name:"posts.collectionRedirector",resolve:{collection:s},onEnter:["$state","collection",function(e,t){"data"===t.view||"list"===t.view?e.go("posts.data.collection",{collectionId:t.id}):e.go("posts.map.collection",{collectionId:t.id})}]}).state({url:"/views/data",name:"posts.data",params:{filterState:{value:null,squash:!0},activeCol:{value:"timeline",squash:!0}},component:"postViewData",resolve:{post:["$transition$","PostEndpoint",function(e,t){if(e.params().postId)return t.get({id:e.params().postId}).$promise}]},onEnter:["$state","PostFilters",function(e,t){"savedsearch"===t.getMode()?e.go("posts.data.savedsearch",{savedSearchId:t.getModeId()}):"collection"===t.getMode()&&e.go("posts.data.collection",{collectionId:t.getModeId()})}]}).state({url:"^/savedsearches/{savedSearchId:int}/data",name:"posts.data.savedsearch",params:{activeCol:{value:"timeline",squash:!0}},resolve:{savedSearch:i},onEnter:["PostFilters","$state","savedSearch",function(e,t,n){n&&e.getModeId()!==n.id&&(e.setMode("savedsearch",n),e.setFilters(n.filter))}]}).state({url:"^/collections/{collectionId:int}/data",name:"posts.data.collection",onEnter:["$state","PostFilters","collection",function(e,t,n){t.setMode("collection",n)}],params:{activeCol:{value:"timeline",squash:!0}},resolve:{collection:s}}).state({name:"posts.map",abstract:!0,component:"postViewMap",params:{filterState:{value:null,squash:!0}}}).state({url:"/views/map",name:"posts.map.all",views:{"mode-context":"modeContext"},onEnter:["$state","PostFilters",function(e,t){"savedsearch"===t.getMode()?e.go("posts.map.savedsearch",{savedSearchId:t.getModeId()}):"collection"===t.getMode()&&e.go("posts.map.collection",{collectionId:t.getModeId()})}]}).state({url:"^/savedsearches/{savedSearchId:int}/map",name:"posts.map.savedsearch",views:{"mode-context":"savedSearchModeContext"},onEnter:["$state","PostFilters","savedSearch",function(e,t,n){n&&t.getModeId()!==n.id&&(t.setMode("savedsearch",n),t.setFilters(n.filter))}],resolve:{savedSearch:i}}).state({url:"^/collections/{collectionId:int}/map",name:"posts.map.collection",views:{"mode-context":"collectionModeContext"},onEnter:["$state","PostFilters","collection",function(e,t,n){t.setMode("collection",n)}],resolve:{collection:s}}).state({name:"posts.data.detail",url:"^/posts/:postId",component:"postDetailData",params:{activeCol:{value:"post",squash:!0}},resolve:{post:["$transition$","PostEndpoint",function(e,t){return t.get({id:e.params().postId}).$promise}]}}).state({name:"posts.data.edit",url:"^/posts/:postId/edit",component:"postDataEditor",params:{activeCol:{value:"post",squash:!0}},resolve:{post:["$transition$","PostEndpoint",function(e,t){return t.get({id:e.params().postId}).$promise}]}}).state({name:"posts.noui",url:"/map/noui",controller:t(884),template:t(674),params:{view:{value:"noui",squash:!0}}}).state({name:"postCreate",url:"/posts/create/:id",controller:t(832),template:t(630)})}]},function(e,exports,t){"use strict";e.exports=["$rootScope","ModalService","PostFilters",function(e,n,s){return{restrict:"E",template:t(643),link:function(t,i,a){t.savedSearch={view:"map",role:[]},t.hasFilters=function(){return s.hasFilters(t.filters)},t.saveSearch=function(){t.savedSearch.filter=t.filters,t.savedSearch.user_id=e.currentUser?e.currentUser.userId:null,n.openTemplate('<saved-search-editor saved-search="savedSearch"></saved-search-editor>',"set.create_savedsearch","star",t,!1,!1)},t.clearFilters=function(){s.clearFilters()}}}}]},function(e,exports,t){"use strict";e.exports=["$q","$location","$rootScope","$translate","SavedSearchEndpoint","_","Notify","ViewHelper","RoleEndpoint","PostFilters",function(e,n,s,i,a,o,r,l,c,d){return{restrict:"E",replace:!0,template:t(644),scope:{savedSearch:"="},link:function(e,t,n){if(!e.savedSearch)throw{message:"savedsearchEditor must be passed a saved-search parameter"};e.featuredEnabled=function(){return s.hasPermission("Manage Posts")},e.isAdmin=s.isAdmin,e.views=l.views(),e.cpySavedSearch=o.clone(e.savedSearch),e.save=function(t){e.isSaving=!0,(t.id?a.update:a.save)(t).$promise.then(function(t){e.savedSearch=o.clone(t),e.$parent.closeModal(),d.setMode("savedsearch",t),s.$broadcast("savedSearch:update"),r.notify("notify.savedsearch.savedsearch_saved",{savedsearch:t.name}),e.isSaving=!1},function(t){r.apiErrors(t),e.isSaving=!1})},e.cancel=e.$parent.closeModal}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"=",savedSearch:"="},controller:s,template:t(640)}}function s(e,t,n,s,i,a,o,r,l,c){function d(e){return e&&r.contains(e.allowed_privileges,"update")}function u(){l.openTemplate('<saved-search-editor saved-search="savedSearch"></saved-search-editor>',"set.edit_search_settings","star",e,!1,!1)}function p(){o.confirm("notify.savedsearch.delete_savedsearch_confirm").then(function(){a.delete({id:e.savedSearch.id}).$promise.then(function(){n.go("posts.map.all"),s.$broadcast("savedSearch:update")},function(e){o.apiErrors(e)})})}function g(t){var n={set:t.id};i.save(n).$promise.then(function(n){e.showNotificationLink=!1,e.notification=n,o.notify("notify.notification.add",{set:t.name})})}function f(){o.confirm("notify.notification.delete_confirm").then(function(){i.delete(e.notification).$promise.then(function(t){e.showNotificationLink=!0,o.notify("notify.notification.destroy_notification_success",{name:t.name})})})}function m(){c.clearFilters(),c.setMode("all")}e.showNotificationLink=!0,e.canEdit=!1,e.notification=!1,e.collectionView="map",e.saveNotification=g,e.removeNotification=f,e.editSavedSearch=u,e.deleteSavedSearch=p,e.clearFilters=m,function(){e.canEdit=d(e.savedSearch),i.query({set:e.savedSearch.id,ignore403:!0,user:"me"},function(t){e.showNotificationLink=0===t.length,t.length&&(e.notification=t[0])},angular.noop)}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$translate","$state","$rootScope","NotificationEndpoint","SavedSearchEndpoint","Notify","_","ModalService","PostFilters"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{searches:"="},controller:s,template:t(641)}}function s(e,t,n,s,i,a,o,r,l,c,d){e.selectedSavedSearches=[],e.processing=!1,e.close=function(){d.close()},e.delete=function(){if(!c.isEmpty(e.selectedSavedSearches)){e.processing=!0;var t=c.map(e.selectedSavedSearches,function(e){return l.delete({id:e}).$promise});a.all(t).then(function(i){s.$broadcast("savedSearch:update"),c.forEach(e.selectedSavedSearches,function(t){delete e.searches[t]}),t.length>1?o.notify("notify.savedsearch.delete_savedsearch_plural_success"):o.notify("notify.savedsearch.delete_savedsearch_success"),n()},function(e){o.apiErrors(e),n()});var n=function(){e.processing=!1,d.close()}}}}e.exports=n,n.$inject=[],s.$inject=["$scope","$element","$attrs","$rootScope","$location","$q","Notify","UserEndpoint","SavedSearchEndpoint","_","ModalService"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:!0,controller:s,template:t(642)}}function s(e,t,n,s,i,a,o,r,l,c){function d(t){e.searches=[],t=t||{},o.query(t).$promise.then(function(t){e.searches=r.filter(t,function(e){var t=!0===(e.user&&e.user.id===r.result(s.currentUser,"userId"));return e.featured||t}),e.loading=!1},function(t){e.loading=!1})}function u(){l.openTemplate('<saved-search-editor saved-search="savedSearch"></saved-search-editor>',"set.create_savedsearch","star",e,!1,!1)}function p(e){d({q:e})}function g(t){l.close(),e.$parent.closeModal();var n=t.view;"list"===n||"data"===n?c.go("posts.data.savedsearch",{savedSearchId:t.id},{reload:!0}):c.go("posts.map.savedsearch",{savedSearchId:t.id},{reload:!0})}e.searchSearches=p,e.createNewSearch=u,e.goToSearch=g,e.loading=!1,function(){e.loading=!0,d()}(),e.$on("event:authentication:logout:succeeded",d),e.$on("event:authentication:login:succeeded",d),e.$on("savedSearch:update",d)}e.exports=n,n.$inject=[],s.$inject=["$scope","$element","$attrs","$rootScope","$location","UserEndpoint","SavedSearchEndpoint","_","ModalService","$state"]},function(e,exports,t){"use strict";e.exports=["$q","$rootScope","SavedSearchEndpoint","_","Notify","PostFilters",function(e,n,s,i,a,o){return{restrict:"E",template:t(645),link:function(e,t,n){if(!e.savedSearch)throw{message:"savedsearchEditor must be passed a saved-search parameter"};e.filtersChanged=function(){return!angular.equals(e.filters,e.savedSearch.filter)},e.saveSearch=function(){e.savedSearch.filter=o.getQueryParams(e.filters),e.isSaving=!0,s.update(e.savedSearch).$promise.then(function(t){e.isSaving=!1,a.notify("notify.savedsearch.savedsearch_updated",{savedsearch:t.name}),e.resetSearch()},function(t){e.isSaving=!1,a.apiErrors(t)})},e.resetSearch=function(){o.setFilters(e.savedSearch.filter),e.savedSearch.filter=angular.copy(o.getFilters())}}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:!0,replace:!0,controller:s,template:t(646)}}function s(e,t,n,s,i){function a(){s.allowedSurveys().then(function(t){e.forms=t,t.length>0&&(e.disabled=!1)},function(e){t.apiErrors(e)})}function o(){1===e.forms.length?i.path("/posts/create/"+e.forms[0].id):n.openTemplate("<add-post-survey-list></add-post-survey-list>","app.submit_response",e)}e.forms=[],e.disabled=!0,e.handleClick=o,function(){a()}()}e.exports=n,n.$inject=[],s.$inject=["$scope","Notify","MainsheetService","PostSurveyService","$location"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:!0,controller:s,template:t(647)}}function s(e,t){function n(n){e.closeMainsheet(),t.path("posts/create/"+n.id)}e.handleClick=n}e.exports=n,n.$inject=[],s.$inject=["$scope","$location"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:!0,controller:s,template:t(648)}}function s(e,t,n,s){function i(e){n.close(),s.path("/posts/create/"+e)}function a(){1===e.forms.length?i(e.forms[0].id):(e.buttonToggle=!e.buttonToggle,e.buttonToggle?e.buttonOptionsStyle={opacity:1,display:"flex"}:e.buttonOptionsStyle={opacity:0,display:"none"})}e.forms=[],e.buttonToggle=!1,e.buttonOptionsStyle={opacity:0,display:"none"},e.toggleButton=a,e.createPost=i,e.disabled=!1,function(){t.allowedSurveys().then(function(t){e.forms=t,t.length>0&&(e.disabled=!1)})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","PostSurveyService","SliderService","$location"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"=",postStats:"="},replace:!0,controller:s,template:t(650)}}function s(e,t,n,s,i){function a(t){var n=e.filters.source.indexOf(t);-1!==n?e.filters.source.splice(n,1):e.filters.source.push(t)}function o(){if(e.providers=s.map(e.postStats,function(e){var t={};return t.label="sms"===e.type?"SMS":e.type.substr(0,1).toUpperCase()+e.type.substr(1),t.heading=l(t.label),t.total=r(e.type),t}),e.providers=s.chain(e.providers).compact().uniq().value(),e.dataSources){var t=["nexmo","twilio","frontlinesms","smssync"];s.each(e.dataSources,function(n,i){if(n){var a=s.contains(t,i)?"SMS":i.substr(0,1).toUpperCase()+i.substr(1);if(s.filter(e.providers,{label:a}).length<1){var o={};o.label=a,o.heading=l(o.label),o.total=r(i),e.providers.push(o)}}})}e.providers=s.sortBy(e.providers,"label")}function r(t){var n=s.findWhere(e.postStats,{type:t.toLowerCase()});return n&&n.total?n.total:0}function l(e){switch(e){case"Twitter":return"Tweets";case"SMS":return"SMS";case"Email":return"Emails";case"Web":return"Web";default:return" "}}function c(t){e.filters.form.indexOf("none")<0&&e.filters.form.push("none"),e.filters.source=[t.toLowerCase()]}function d(t){-1!==e.filters.source.indexOf(t.toLowerCase())&&(e.filters.source=[],s.each(e.providers,function(n){n.label!==t&&e.filters.source.push(n.label.toLowerCase())}))}function u(t){e.filters.form=["none"],e.filters.source=[t.toLowerCase()],i.path("/views/data")}function p(){return t.isAdmin()}e.dataSources=[],e.providers=[],e.formatHeading=l,e.showOnly=c,e.hide=d,e.featureEnabled=p,e.showOnlyIncoming=u,e.assignStatsToProviders=o,e.getTotals=r,e.toggleFilters=a,e.$watch("postStats",function(e){o()}),function(){e.featureEnabled()&&n.get({id:"data-provider"}).$promise.then(function(t){e.dataSources=t.providers,o()})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope","ConfigEndpoint","_","$location"]},function(e,exports,t){"use strict";function n(){return{restrict:"A",replace:!0,controller:s}}function s(e,t){function n(){e.filtersMenuOpen=!0}e.filtersMenuOpen=!1,function(){t.$on("filters:open:dropdown",function(){n()})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"="},replace:!0,controller:s,template:t(651)}}function s(e,t){function n(){t.$emit("filters:open:dropdown")}e.openFilters=n}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope"]},function(e,exports,t){"use strict";function n(e,n,s,i,a,o){function r(e,t){function n(t,n,o){var c=angular.copy(s.getUIActiveFilters(t));if(a.rawFilters=angular.copy(t),"savedsearch"===s.getMode()?!0!==o&&e.savedSearch&&f.id===s.getModeId()||(e.collection=null,f=angular.copy(s.getModeEntity("savedsearch")),e.savedSearch=s.getModeEntity("savedsearch")):(e.savedSearch=null,f=null),e.userCanUpdateSavedSearch=!1,e.uiFilters=c,e.savedSearch){var d=s.getUIActiveFilters(f.filter);e.savedSearch.filter=r(e.savedSearch.filter,d,e.uiFilters,t);var u=l(d,e.savedSearch.filter),p=l(t,e.savedSearch.filter);e.userCanUpdateSavedSearch=i.contains(e.savedSearch.allowed_privileges,"update")&&(u||p),e.uiFilters=s.cleanUIFilters(e.uiFilters,e.savedSearch.filter)}}function r(e,t,n,i){e=s.getUIActiveFilters(e),e=s.cleanRemovedValuesFromObject(i,e);var a=s.getUIActiveFilters(e),o=s.getUIActiveFilters(t),r=s.getUIActiveFilters(n),l=s.addIfCurrentObjectMatchesOriginal(a,o,r);return s.getUIActiveFilters(l)}function l(e,t){return i.filter(e,function(e,n){return i.isArray(e)?0!==i.difference(t[n],e).length||0!==i.difference(e,t[n]).length:t[n]!==e}).length>0}function c(e,t){return a.transformers[t]?a.transformers[t](e):e}function d(t,n,i,a){a.preventDefault(),a.stopPropagation(),i?(i.filter=s.clearFilterFromArray(t,n,i.filter),s.clearFilter(t,n),e.savedSearch=i):s.clearFilter(t,n)}function u(t,n){n.preventDefault(),n.stopPropagation(),f=null,e.savedSearch=null,s.setMode("all",null),i.each(t.filter,function(e,t){i.isArray(e)?i.each(e,function(e,n){s.clearFilter(t,e)}):s.clearFilter(t,e)})}function p(t,n){n.preventDefault(),n.stopPropagation(),e.collection=null,s.setMode("all",null),s.setFilter("status",s.getDefaults().status)}function g(){return!e.collection&&!i.isEmpty(e.uiFilters)&&!e.savedSearch&&o.loggedin}e.uiFilters={},e.savedSearch=null,e.collection=s.getModeEntity("collection");var f;e.removeFilter=d,e.transformFilterValue=c,e.removeSavedSearch=u,e.removeCollection=p,e.showSaveSavedSearchButton=g,e.userCanUpdateSavedSearch=!1,function(){e.$on("savedSearch:update",function(){n(s.getActiveFilters(s.getFilters()),null,!0)}),e.$on("collection:update",function(){n(s.getActiveFilters(s.getFilters()),null,!0)}),e.$watch(function(){return s.getModeId()},function(t,n){t!==n&&"collection"===s.getMode()&&(e.collection=s.getModeEntity("collection"),e.savedSearch=null,f=null)},!0),a.requestsFiltersData().then(function(t){e.$watch(function(){return s.getActiveFilters(s.getFilters())},n,!0)})}(),e.isArray=angular.isArray}return{restrict:"E",scope:!0,require:"ngModel",template:t(652),link:r}}e.exports=n,n.$inject=["$translate","$filter","PostFilters","_","FilterTransformers","$rootScope"]},function(e,exports,t){"use strict";function n(e,n){function s(t,s,i,a){function o(){a.$viewValue&&Array.prototype.splice.apply(t.selectedCategories,[0,t.selectedCategories.length].concat(a.$viewValue))}function r(e){a.$setViewValue(angular.copy(e))}a&&(t.categories=[],t.parents=[],t.selectedCategories=[],function(){e.query().$promise.then(function(e){t.categories=e,n.each(t.categories,function(e){if(e.children){var s=[];n.each(e.children,function(i){n.each(t.categories,function(e){e.id===parseInt(i.id)&&s.push(e)}),e.children=s})}}),t.parents=n.filter(t.categories,function(e){if(null===e.parent_id)return e}),t.selectedCategories&&0!==t.selectedCategories.length||(t.selectedCategories=n.pluck(t.categories,"id"))}),t.$watch("selectedCategories",r,!0),t.$watch(function(){return a.$viewValue},o,!0),a.$render=o}())}return{restrict:"E",replace:!0,scope:{},require:"ngModel",link:s,template:t(653)}}e.exports=n,n.$inject=["TagEndpoint","_"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{dateBeforeModel:"=",dateAfterModel:"="},controller:s,template:t(654)}}function s(e){e.options={format:"yyyy-mm-dd"}}e.exports=n,n.$inject=[],s.$inject=["$scope"]},function(e,exports,t){"use strict";function n(e){function n(t,n,s,i){function a(){Array.prototype.splice.apply(t.selectedForms,[0,t.selectedForms.length].concat(i.$viewValue))}function o(e){i.$setViewValue(angular.copy(e))}i&&(t.forms=[],t.selectedForms=[],function(){t.forms=e.query(),t.$watch("selectedForms",o,!0),t.$watch(function(){return i.$viewValue},a,!0),i.$render=a}())}return{restrict:"E",replace:!0,scope:{},require:"ngModel",link:n,template:t(655)}}e.exports=n,n.$inject=["FormEndpoint"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",replace:!0,scope:{hasLocation:"="},require:"ngModel",link:s,template:t(656)}}function s(e,t,n,s){function i(e){s.$setViewValue(angular.copy(e))}!function(){e.$watch("hasLocation",i,!0)}()}e.exports=n,n.$inject=[]},function(e,exports,t){"use strict";function n(e,n){function s(t,s,i){function a(e,n){t.locationSearchText||(t.locationSearchText=t.centerPointModel)}function o(){t.locationSearchText?r(t.locationSearchText).then(function(e){t.centerPointModel=e}):t.centerPointModel=""}function r(s){var i=n.defer(),a=/\-?[0-9]+(\.[0-9]+)?\s*,\s*\-?[0-9]+(\.[0-9]+)?/;if(s)return a.test(s)?i.resolve(s):(t.geocoding=!0,e.searchCoordinates(s).then(function(e){if(!e)return void i.reject();t.geocoding=!1,i.resolve(e[0]+","+e[1])})),i.promise}t.geocoding=!1,t.locationSearchText="",t.$watch("centerPointModel",a),t.$watch("locationSearchText",o)}return{restrict:"E",replace:!0,scope:{centerPointModel:"=",withinKmModel:"="},link:s,template:t(657)}}e.exports=n,n.$inject=["Geocoding","$q"]},function(e,exports,t){"use strict";function n(e,n,s){function i(e,t,n,s){function i(){e.selectedValue={value:s.$viewValue,labelTranslateKey:"global_filter.sort.order."+s.$viewValue}}function a(e){s.$setViewValue(angular.copy(e?e.value.toString():""),"radio")}e.selectedValue={value:"desc",labelTranslateKey:"global_filter.sort.order.desc"},e.activeOrderOptions={labelTranslateKey:"global_filter.sort.order.filter_type_tag",options:[{value:"desc",labelTranslateKey:"global_filter.sort.order.desc"},{value:"asc",labelTranslateKey:"global_filter.sort.order.asc"}]},function(){s.$render=i,e.$watch("selectedValue",a,!0)}()}return{restrict:"E",require:"ngModel",scope:{},template:t(658),link:i}}e.exports=n,n.$inject=["moment","$rootScope","_"]},function(e,exports,t){"use strict";function n(e,n,s){function i(e,t,n,i){function a(){e.orderValue={value:i.$viewValue,labelTranslateKey:"global_filter.sort.orderby."+i.$viewValue}}function o(e){s.isUndefined(e.value)&&(e={value:e}),i.$setViewValue(angular.copy(e.value))}e.orderValue={value:"created",labelTranslateKey:"global_filter.sort.orderby.created"},e.orderByOptions={value:"created",labelTranslateKey:"global_filter.sort.orderby.filter_type_tag",options:[{value:"post_date",labelTranslateKey:"global_filter.sort.orderby.post_date"},{value:"updated",labelTranslateKey:"global_filter.sort.orderby.updated"},{value:"created",labelTranslateKey:"global_filter.sort.orderby.created"}]},function(){i.$render=a,e.$watch("orderValue",o,!0)}()}return{restrict:"E",require:"ngModel",scope:{},template:t(659),link:i}}e.exports=n,n.$inject=["moment","$rootScope","_"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"=",onOpen:"&",onClose:"&"},replace:!0,controller:s,template:t(660)}}function s(e,t,n,s,i){function a(){t.reactiveFilters=!0,e.status.isopen=!1}function o(){t.clearFilter("q","")}function r(){e.status.isopen=!0}function l(){e.status.isopen=!1}function c(t){t&&i&&i[0].contains(t.target)||e.$apply(l)}e.searchSavedToggle=!1,e.status={isopen:!1},e.hideDropdown=l,e.showDropdown=r,e.removeQueryFilter=o,e.applyFilters=a,t.reactiveFilters=!1,function(){s.on("click",c),e.$on("$destroy",function(){s.off("click",c)}),e.$watch("status.isopen",function(t){t?e.onOpen():e.onClose()})}()}e.exports=n,n.$inject=[],s.$inject=["$scope","PostFilters","$state","$document","$element"]},function(e,exports,t){"use strict";function n(e,n,s,i,a){function o(t,i,o,r){function l(e){var t=a.getModeEntity("savedsearch"),n=!!t&&e.id===t.id;e&&e.hasOwnProperty("filter")&&!n?(a.setFilters(e.filter),a.setMode("savedsearch",e)):null===e&&null!==a.getModeId()&&a.setMode("all"),r.$setViewValue(e)}function c(e,n){e!==n&&(void 0===e||null===e?t.selectedSavedSearch=null:t.searchesLength>0&&(t.selectedSavedSearch=t.searches[e]))}function d(){return t.loading=!0,e.query({}).$promise.then(function(e){var i=n.filter(e,function(e){var t=!0===(e.user&&e.user.id===n.result(s.currentUser,"userId"));return e.featured||t});t.searches=n.indexBy(i,"id"),t.searchesLength=n.keys(t.searches).length,t.loading=!1})}t.selectedSavedSearch=null,t.searches=[],t.searchesLength=0,t.loading=!1,function(){d().then(function(){r.$viewValue?t.selectedSavedSearch=t.searches[r.$viewValue.id]:a.getModeId()&&(t.selectedSavedSearch=t.searches[a.getModeId()]),t.$watch("selectedSavedSearch",l,!0)}),t.$on("savedSearch:update",d),t.$watch(a.getModeId,c)}()}return{restrict:"E",require:"ngModel",scope:{},link:o,template:t(661)}}e.exports=n,n.$inject=["SavedSearchEndpoint","_","$rootScope","ModalService","PostFilters"]},function(e,exports,t){"use strict";function n(e){function n(t,n,s,i){function a(){Array.prototype.splice.apply(t.selectedSources,[0,t.selectedSources.length].concat(i.$viewValue))}function o(e){i.$setViewValue(angular.copy(e))}t.selectedSources=[],t.hasPermission=e.hasPermission,function(){t.$watch("selectedSources",o,!0),t.$watch(function(){return i.$viewValue},a,!0),i.$render=a}()}return{restrict:"E",replace:!0,scope:{},require:"ngModel",link:n,template:t(662)}}e.exports=n,n.$inject=["$rootScope"]},function(e,exports,t){"use strict";function n(e,n){function s(t,s,i,a){function o(){Array.prototype.splice.apply(t.selectedStatuses,[0,t.selectedStatuses.length].concat(a.$viewValue))}function r(e){a.$setViewValue(angular.copy(e))}t.statuses=e.getStatuses(),t.selectedStatuses=[],t.hasPermission=n.hasPermission,function(){t.$watch("selectedStatuses",r,!0),t.$watch(function(){return a.$viewValue},o,!0),a.$render=o}()}return{restrict:"E",replace:!0,scope:{},require:"ngModel",link:s,template:t(663)}}e.exports=n,n.$inject=["PostActionsService","$rootScope"]},function(e,exports,t){"use strict";function n(e,t,n,s,i,a,o,r,l,c,d){var u,p,g,f,m,v=[],h=this;return this.rawFilters={},this.requestsFiltersData=function(){return d.all([s.query().$promise,i.query().$promise,n.query().$promise,t.query().$promise,a.query({}).$promise,o.query({}).$promise]).then(function(t){u=e.indexBy(t[0],"name"),p=e.indexBy(t[1],"id"),g=e.indexBy(t[2],"id"),f=e.indexBy(t[3],"id"),m=e.indexBy(t[4],"id"),v=e.indexBy(t[5],"id")})},this.transformers={order_unlocked_on_top:function(e){var t="true"===e?"yes":"no";return l.instant("global_filter.filter_tabs.order_group.unlocked_on_top_"+t)},order:function(e){return l.instant("global_filter.filter_tabs.order_group.order."+e.toLowerCase())},orderby:function(e){return l.instant("global_filter.filter_tabs.order_group.orderby."+e)},tags:function(e){return g[e]?g[e].tag:e},user:function(e){return p[e]?p[e].realname:e},saved_search:function(e){return e?m[e.id].name:""},set:function(e){return e?v[e.id].name:""},center_point:function(e){return l.instant("global_filter.filter_tabs.location_value",{value:h.rawFilters.location_text?this.rawFilters.location_text:e,km:h.rawFilters.within_km})},created_before:function(e){return c("date","longdate")(e)},created_after:function(e){return c("date","longdate")(e)},date_before:function(e){return c("date","longdate")(e)},date_after:function(e){return c("date","longdate")(e)},status:function(e){return l.instant("post."+e)},source:function(e){return r.formatSource(e)},form:function(e){return f[e]?f[e].name:e}},h}e.exports=n,n.$inject=["_","FormEndpoint","TagEndpoint","RoleEndpoint","UserEndpoint","SavedSearchEndpoint","CollectionEndpoint","PostMetadataService","$translate","$filter","$q"]},function(e,exports,t){"use strict";function n(e){function n(e,t,n,s){function i(){e.unlockedOnTop={value:s.$viewValue,labelTranslateKey:"global_filter.sort.unlockedOnTop.filter_type_tag"}}function a(e){s.$setViewValue(angular.copy(e?e.value.toString():""))}e.unlockedOnTop={value:"true",labelTranslateKey:"global_filter.sort.unlockedOnTop.filter_type_tag"},function(){s.$render=i,e.$watch("unlockedOnTop",a,!0)}()}return{restrict:"E",require:"ngModel",template:t(664),scope:{},link:n}}e.exports=n,n.$inject=["_"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",replace:!0,scope:{statusModel:"=",publishedToModel:"="},controller:s,template:t(665)}}function s(e,t,n){function s(){"draft"===e.statusModel?e.visible_to="draft":"all"===e.statusModel?e.visible_to="everyone":"published"!==e.statusModel||e.publishedToModel?e.visible_to=e.publishedToModel:e.visible_to="everyone"}function i(){"everyone"===e.visible_to?(e.statusModel="all",e.publishedToModel=""):"draft"===e.visible_to?(e.statusModel="draft",e.publishedToModel=""):(e.statusModel="published",e.publishedToModel=e.visible_to)}e.roles=[],e.visible_to="",e.hasPermission=n.hasPermission,function(){e.roles=t.query()}(),e.$watch("statusModel",s),e.$watch("publishedToModel",s),e.$watch("visible_to",i)}e.exports=n,n.$inject=[],s.$inject=["$scope","RoleEndpoint","$rootScope"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{dropdownStatus:"=",filters:"="},controller:s,template:t(666)}}function s(e,t,n,s,i,a){function o(){var t=n.getModeEntity("savedsearch");e.canUpdateSavedSearch=t&&a.contains(t.allowed_privileges,"update")}e.canUpdateSavedSearch=!1,e.$watch(n.getModeId,function(t,n){n===t&&void 0!==e.canUpdateSavedSearch||o()}),e.savedSearch={view:"map",role:[]},e.clearFilters=function(){a.contains(["savedsearch","collection"],n.getMode())&&n.getModeId()&&(n.setMode("all"),t.$current.includes["posts.map"]?t.go("posts.map.all"):t.go("posts.data")),e.filters=n.clearFilters(),e.dropdownStatus.isopen=!e.dropdownStatus.isopen,e.canUpdateSavedSearch=!1},e.saveSavedSearchModal=function(){e.savedSearch.filter=e.filters,e.savedSearch.user_id=i.currentUser?i.currentUser.userId:null,s.openTemplate('<saved-search-editor saved-search="savedSearch"></saved-search-editor>',"set.create_savedsearch","star",e,!1,!1)},e.editSavedSearchModal=function(t){var a="edit"===t?"set.edit_savedsearch":"set.update_savedsearch";e.savedSearch=n.getModeEntity("savedsearch"),e.savedSearch.filter=n.getActiveFilters(e.filters),e.savedSearch.user_id=i.currentUser?i.currentUser.userId:null,s.openTemplate('<saved-search-editor saved-search="savedSearch"></saved-search-editor>',a,"star",e,!1,!1)}}e.exports=n,n.$inject=[],s.$inject=["$scope","$state","PostFilters","ModalService","$rootScope","_"]},function(e,exports,t){"use strict";function n(e){function n(t,n,s,i){function a(){t.filtersCount=e.countFilters()}t.$watch(function(){return e.countFilters()},a,!0)}return{restrict:"E",scope:{},link:n,template:t(667)}}e.exports=n,n.$inject=["PostFilters"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:!0,controller:s,template:t(668)}}function s(e,t,n,s,i,a,o,r,l,c,d){function u(e){var t=l.getQueryParams(e),s=a.extend({},t,{group_by:"form",include_unmapped:!0});return s.form&&delete s.form,s.tags&&delete s.tags,s.source&&delete s.source,n.stats(s)}function p(t){e.sourceStats=g(t),e.unmapped=t.unmapped?t.unmapped:0,a.each(e.forms,function(n){var s=a.filter(t.totals[0].values,function(t){return t.id===n.id&&a.contains(e.filters.source,t.type)});n.post_count=0,s&&(n.post_count=a.reduce(s,function(e,t){return t.total?e+t.total:0},n.post_count))})}function g(t){var n=[],s=["email","sms","twitter","web"];return a.each(s,function(s){var i=a.filter(t.totals[0].values,function(t){var n=null===t.id?"none":t.id;return t.type===s&&a.contains(e.filters.form,n)});if(i&&i.length>0){var o={total:0};o.total=a.reduce(i,function(e,t){return t.total?e+t.total:e},o.total),o.type=s,n.push(o)}}),n}function f(t,n){a.contains(e.filters.tags,t.id)?(a.each(t.children,function(t){e.filters.tags.push(t.id)}),e.filters.form.splice(0,e.filters.form.length,n)):a.each(t.children,function(t){var n=e.filters.tags.indexOf(t.id);-1!==n&&e.filters.tags.splice(n,1)})}function m(){e.showLanguage=!e.showLanguage}function v(t){e.filters.form.splice(0,e.filters.form.length,t),e.filters.tags.splice(0,e.filters.tags.length)}function h(){e.forms.length>1&&e.filters.tags.splice(0,e.filters.tags.length)}function b(){return 1===e.unmapped?e.unmapped+" post":e.unmapped+" posts"}function y(){var e=l.getDefaults();e.form.push("none"),e.has_location="unmapped",l.setFilters(e),d.path("/views/data")}function w(t){var n=e.filters.form.indexOf(t);-1!==n&&e.filters.form.splice(n,1)}e.forms=[],e.showOnly=v,e.selectParent=f,e.hide=w,e.hasManageSettingsPermission=o.hasManageSettingsPermission,e.canAddToSurvey=r.canCreatePostInSurvey,e.showLanguage=!1,e.languageToggle=m,e.unmapped=0,e.location=d,e.goToUnmapped=y,e.getUnmapped=b,e.changeForms=h,e.unknown=[],function(){e.forms=t.query(),e.tags=s.query();var n=u(e.filters);i.all([e.forms.$promise,n.$promise,e.tags.$promise]).then(function(t){if(t[1]&&t[1].totals&&t[1].totals[0]){var n=t[2];a.each(a.where(n,{parent_id:null}),function(e){e&&e.children&&(e.children=a.filter(a.map(e.children,function(e){return a.findWhere(n,{id:parseInt(e.id)})})))}),angular.forEach(e.forms,function(t,s){var i=a.pluck(t.tags,"id");e.forms[s].tags=a.filter(a.map(n,function(e){return!(null!==e.parent_id||(e=a.clone(e),e.children=a.clone(e.children),!a.contains(i,e.id)))&&(e.children=a.filter(e.children,function(e){return a.contains(i,e.id)}),e)}))}),p(t[1])}})}(),e.$watch(function(){return e.filters},function(e,t){var n=a.omit(e,function(e,n,s){return a.isEqual(t[n],e)});a.keys(n).length>0&&u(l.getFilters()).$promise.then(p)},!0)}e.exports=n,n.$inject=[],s.$inject=["$scope","FormEndpoint","PostEndpoint","TagEndpoint","$q","_","$rootScope","PostSurveyService","PostFilters","$timeout","$location"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"="},controller:s,template:t(669)}}function s(e){}e.exports=n,n.$inject=[],s.$inject=["$scope"]},function(e,exports,t){"use strict";function n(e,n,s){return{restrict:"E",replace:!0,scope:{post:"=",canSelect:"=",selectedPosts:"=",shortContent:"@",externalClickAction:"=clickAction",selectedPost:"="},template:t(649),link:function(t,s){function i(){return n.isPostLockedForCurrentUser(t.post)}function a(n){n&&e.get({id:n.id},function(e){t.post.form=e})}function o(e){var n=s.find("post-actions")[0];e&&s&&n.contains(e.target)||t.externalClickAction(t.post)}t.isPostLocked=i,t.clickAction=o,function(){a(t.post.form)}(),t.stopClickPropagation=function(e){e.stopPropagation()}}}}e.exports=n,n.$inject=["FormEndpoint","PostLockService","$rootScope"]},function(e,exports,t){"use strict";function n(e,t,n,s){function i(t,n){return e.each(t,function(s,i){if(!e.isArray(t[i])&&t.hasOwnProperty(i)&&!e.isEmpty(n[i])||!e.isArray(t[i])&&t[i]===m()[i])delete t[i];else if(e.isArray(t[i])){var a=e.difference(s,n[i]);0===a.length?delete t[i]:t[i]=a}}),t}function a(t,n,s){return e.mapObject(n,function(i,a){return e.isArray(i)?e.every(n[a],function(t){return e.contains(s[a],t)})?e.intersection(n[a],s[a]):e.intersection(t[a],s[a]):s[a]})}function o(t,n){var s=e.pick(n,e.without(e.keys(t),e.keys(n)));return s=e.mapObject(s,function(s,i){return e.isArray(n[i])?e.filter(n[i],function(e){return t[i].indexOf(e)>-1}):t[i]})}function r(){var e=this;return l().then(function(){e.clearFilters()})}function l(){return s.all([n.query().$promise,t.query().$promise]).then(function(t){A=e.pluck(t[0],"id"),E=t[1],E.push({id:"none"}),C.form=C.form||[],0===C.form.length&&Array.prototype.splice.apply(C.form,[0,0].concat(e.pluck(E,"id")))})}function c(){return C}function d(e){return"all"===e.status&&(e.status=["published","draft","archived"]),angular.extend(C,m(),e)}function u(e,t){return C[e]=t,C}function p(){return angular.copy(m(),C),this.reactiveFilters=!0,C}function g(e,t){C=this.clearFilterFromArray(e,t,C)}function f(e,t,n){return Array.isArray(n[e])&&n[e].length>1?n[e].splice(n[e].indexOf(t),1):n[e]=m()[e],n}function m(){return{q:"",date_after:"",date_before:"",status:"collection"===P?["published","draft","archived"]:["published","draft"],published_to:"",center_point:"",has_location:"all",within_km:"1",current_stage:[],tags:A,saved_search:"",orderby:"created",order:"desc",order_unlocked_on_top:"true",form:e.pluck(E,"id"),set:[],user:!1,source:["sms","twitter","web","email"]}}function v(t){var n=m(),s=e.omit(t,function(t,s,i){return"saved_search"===s||("reactiveFilters"===s||!e.isDate(t)&&(!("tags"!==s&&"form"!==s||!e.isArray(n[s])||0!==e.difference(t,n[s]).length||0!==e.difference(n[s],t).length)||(e.isObject(t)||e.isArray(t)?e.isEmpty(t):!t)))});return t.center_point?(s.center_point=t.center_point,s.within_km=t.within_km||10):delete s.within_km,"collection"===P&&(s.set=[k()].concat(s.set)),s}function h(t){var n=m();return e.omit(t,function(t,s,i){return n[s]===t||("saved_search"===s||("within_km"===s||(!!e.isEqual(n[s],t)||(!(!e.isArray(n[s])||0!==e.difference(t,n[s]).length||0!==e.difference(n[s],t).length)||e.isEmpty(t)&&!e.isDate(t)))))})}function b(t){var n=m();return e.omit(t,function(t,s,i){return"reactiveFilters"===s||("saved_search"===s||("within_km"===s||(!!e.isEqual(n[s],t)||(!(!e.isArray(n[s])||0!==e.difference(t,n[s]).length||0!==e.difference(n[s],t).length)||e.isEmpty(t)&&!e.isDate(t)))))})}function y(t){return!e.isEmpty(b(t))}function w(e,t){e!==P&&"collection"===(P=e)&&this.clearFilters(),T=t}function _(){return P}function k(){return T?T.id:null}function x(e){return _()===e?T:null}function S(){var t=e.keys(this.getActiveFilters(this.getFilters())).length;return"collection"===P&&t++,t}var C=window.filterState=m(),E=[],A=[],P="all",T=null;return l(),{resetDefaults:r,getDefaults:m,getQueryParams:v,getFilters:c,setFilters:d,setFilter:u,clearFilters:p,clearFilter:g,clearFilterFromArray:f,hasFilters:y,getActiveFilters:b,getUIActiveFilters:h,setMode:w,getMode:_,getModeId:k,getModeEntity:x,countFilters:S,cleanUIFilters:i,cleanRemovedValuesFromObject:o,addIfCurrentObjectMatchesOriginal:a,reactiveFilters:!0}}e.exports=n,n.$inject=["_","FormEndpoint","TagEndpoint","$q"]},function(e,exports,t){"use strict";e.exports=["FormAttributeEndpoint","MediaEndpoint","_",function(e,n,s){return{restrict:"E",replace:!0,scope:{post:"="},template:t(670),link:function(t){t.post.form&&e.query({formId:t.post.form.id}).$promise.then(function(e){var i=s.find(e,function(e){return"media"===e.type});i&&!s.isUndefined(t.post.values[i.key])&&n.get({id:t.post.values[i.key]}).$promise.then(function(e){t.media=e,t.hasCaption=!i.config||i.config.hasCaption})})}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"=",selectedPost:"="},controller:s,template:t(671)}}function s(e,t,n,s,i,a){function o(){return!(!e.selectedPost||!e.hasPermission)&&(!!e.selectedPost&&!s.isPostLockedForCurrentUser(e.selectedPost))}function r(){t.$broadcast("event:edit:post:data:mode:save")}function l(){return"posts.data.edit"===i.$current.name}function c(){o()&&i.go("posts.data.edit",{postId:e.selectedPost.id})}function d(){i.go("posts.data.detail",{postId:e.selectedPost.id})}function u(){e.filtersActive=!0}function p(){e.filtersActive=!1}e.setEditMode=c,e.savePost=r,e.hasPermission=t.hasPermission("Manage Posts"),e.editEnabled=o,e.isLoading=a.getLoadingState,e.isSaving=a.getSavingState,e.editMode=l,e.cancel=d,e.hideOtherActions=u,e.showOtherActions=p,e.filtersActive=!1}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope","Notify","PostLockService","$state","LoadingProgress"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",replace:!0,scope:{},controller:s}}function s(e,t,n,s,i,a){e.$on("mainsheet:statechange",function(){s.getState()&&"/views/create"===i.path()&&i.path("/views/map")}),function(){n.allowedSurveys().then(function(e){t.forms=e,e.length>0&&(t.disabled=!1),1===t.forms.length?i.path("/posts/create/"+t.forms[0].id):s.openTemplate("<add-post-survey-list></add-post-survey-list>","app.submit_response",t)},function(e){a.apiErrors(e)})}()}e.exports=n,n.$inject=[],s.$inject=["$rootScope","$scope","PostSurveyService","MainsheetService","$location","Notify"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{post:"<",collection:"<",savedSearch:"<"},controller:s,template:t(672)}}function s(e,t,n,s,i,a,o,r,l,c,d,u,p,g,f,m,v){function h(){e.selectedPost={post:null,next:{}}}function b(){e.selectedPost.post&&e.posts[0]&&y(e.selectedPost.post).then(function(t){t&&(e.selectedPost.post=e.posts[0],f.go("posts.data.detail",{view:"data",postId:e.posts[0].id}))})}function y(t){var a=l.defer();if(e.hasFilters()){var o=n.getQueryParams(e.filters),r=s.extend({},o,{post_id:t.id});i.query(r).$promise.then(function(e){0===e.count?a.resolve(!0):a.reject(!1)})}else a.reject(!1);return a.promise}function w(e){y(e).then(function(t){t&&_(e)})}function _(t){e.posts.forEach(function(n,s){if(n.id===t.id){var i=e.posts[s+1];e.posts.splice(s,1),e.posts.length?(M(e.posts),e.selectedPost.post&&(e.selectedPost.post=i,f.go("posts.data.detail",{view:"data",postId:e.selectedPost.post.id}))):(e.selectedPost={post:null,next:{}},E(!1,!1))}})}function k(t){var s=e.hasFilters()?e.filters.status:n.getDefaults().status,i=!1;return s.forEach(function(e){t.status===e&&(i=!0)}),i}function x(t){var n=s.findIndex(e.posts,function(e){return e.id===t.id});e.posts.splice(n,1,t)}function S(){var t=l.defer();return"posts.data.edit"!==f.$current.name?t.resolve():e.formData.form&&!e.formData.form.$dirty?t.resolve():p.confirmLeave("notify.post.leave_without_save").then(function(){t.resolve()},function(e){t.reject()}),t.promise}function C(t,n){return S().then(function(){e.selectedPost.post=t,f.go("posts.data.detail",{postId:t.id})},function(){})}function E(t,r,l,c){t=t||n.getQueryParams(e.filters);var d=s.extend({},t,{limit:e.itemsPerPage});!0===r&&(d.offset=(e.currentPage-1)*e.itemsPerPage),i.query(d).$promise.then(function(t){l&&I(),Array.prototype.push.apply(e.posts,t.results),e.posts.length>0&&e.posts[0].created&&(z=o(e.posts[0].created).utc().add(1,"s")),M(t.results),e.totalItems=t.total_count,0!==e.posts.count||n.hasFilters(e.filters)||a.showNoPostsSlider(),c&&c()})}function A(){p.confirmDelete("notify.post.bulk_destroy_confirm",{count:e.selectedPosts.length}).then(function(){function t(e){p.apiErrors(e)}function n(t){p.notify("notify.post.destroy_success_bulk");var n=s.pluck(t,"id");angular.forEach(e.groupedPosts,function(t,i){e.groupedPosts[i]=s.reject(t,function(e){return s.contains(n,e.id)})}),e.posts=s.reject(e.posts,function(e){return s.contains(n,e.id)}),D(),e.posts.length||E(!1,!1,!0)}var a=s.map(e.selectedPosts,function(t){return e.selectedPosts=s.without(e.selectedPosts,t),i.delete({id:t}).$promise});l.all(a).then(n,t)})}function P(t){var n=s.filter(e.posts,function(t){return s.contains(e.selectedPosts,t.id)}),a=e.selectedPosts.length,o=s.map(n,function(e){return e.status=t,i.update(e).$promise});l.all(o).then(function(){p.notify("notify.post.update_status_success_bulk",{count:a}),n.forEach(function(e){k(e)||_(e)}),D()},function(e){p.apiErrors(e)})}function T(e){var t=o(),n=o().subtract(1,"days");return s.groupBy(e,function(e){var s=o(e.post_date);return t.isSame(s,"d")?r.instant("nav.today"):n.isSame(s,"d")?r.instant("nav.yesterday"):s.fromNow()})}function F(){return n.hasFilters(e.filters)}function M(t){angular.forEach(T(t),function(t,n){angular.isArray(e.groupedPosts[n])?Array.prototype.unshift.apply(e.groupedPosts[n],t):e.groupedPosts[n]=t})}function I(){e.posts=[],e.groupedPosts={},e.totalItems=e.itemsPerPage,e.currentPage=1,e.selectedPosts=[],V=[],e.newPostsCount=0,z=o().utc()}function U(){e.currentPage++,E(!1,!0,!1)}function q(){e.bulkActionsSelected=!0}function L(){e.bulkActionsSelected=""}function D(){e.selectedPosts.splice(0)}function O(){return s.any(e.posts,function(e){return s.intersection(e.allowed_privileges,["update","delete","change_status"]).length>0})}function R(){var t=n.getQueryParams(e.filters),a=o(t.date_before).utc();if(z.isSameOrBefore(a)&&"desc"===t.order&&"created"===t.orderby){var r=t,l=s.extend({},r,{order:e.filters.order,orderby:e.filters.orderby,created_after:z.format()});i.query(l).$promise.then(function(t){Array.prototype.unshift.apply(V,t.results),e.newPostsCount+=t.count,t.count>0&&(z=o(t.results[0].created).utc().add(1,"s"))})}}function N(){Array.prototype.unshift.apply(e.posts,V),M(V),e.totalItems=e.totalItems+e.newPostsCount,V=[],e.newPostsCount=0,g.document.getElementById("post-data-view-top").scrollTop=0}function j(t){e.posts.length&&R(),B=d(j,t,!0,t)}e.currentPage=1,e.selectedPosts=[],e.itemsPerPageOptions=[10,20,50],e.itemsPerPage=e.itemsPerPageOptions[1],e.totalItems=e.itemsPerPage,e.posts=[],e.groupedPosts={},e.deletePosts=A,e.hasFilters=F,e.userHasBulkActionPermissions=O,e.statuses=c.getStatuses(),e.changeStatus=P,e.showPost=C,e.loadMore=U,e.isLoading=m.getLoadingState,e.clearSelectedPosts=D,e.newPostsCount=0;var V=[];e.addNewestPosts=N,e.selectBulkActions=q,e.bulkActionsSelected="",e.closeBulkActions=L,e.selectedPost={post:e.post,next:{}},e.formData={form:{}},e.getPosts=E,e.shouldWeRunCheckForNewPosts=!0,e.activeCol=f.params.activeCol,e.deselectPost=h,e.removePostThatDoesntMatchFilters=w;var B,z=o().utc(),G=[];G.push(e.$on("event:edit:post:data:mode:saveSuccess",function(t,n){var s=n.post;e.removePostThatDoesntMatchFilters(s)})),G.push(e.$on("event:edit:post:status:data:mode:saveSuccess",function(e,t){var n=t.post;!t.deleted&&k(n)||_(n)})),G.push(v.onSuccess({to:"posts.data.**"},function(){e.activeCol=f.params.activeCol})),G.push(v.onSuccess({to:"posts.data.*"},function(){e.selectedPost.post=s.findWhere(e.posts,{id:parseInt(f.params.postId,10)})})),e.$on("$destroy",function(){G.forEach(Function.prototype.call,Function.prototype.call)}),function(){if(r("post.posts").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.filters=n.getFilters(),e.selectedPost.post){var i=n.getQueryParams(e.filters);i.created_before=e.selectedPost.post.created,E(i,!1),e.shouldWeRunCheckForNewPosts=!1}else E(!1,!1);e.$watch(function(){return n.reactiveFilters},function(){!0===n.reactiveFilters&&(e.filters.reactToFilters=!e.filters.reactToFilters||!e.filters.reactToFilters)},!0),e.$watch(function(){return e.filters},function(e,t){!0===n.reactiveFilters&&e!==t&&(E(!1,!1,!0,b),n.reactiveFilters=!1)},!0),e.$watch("selectedPosts.length",function(){e.$emit("post:list:selected",e.selectedPosts)}),e.$on("$destroy",function(e){d.cancel(B)}),e.$on("event:edit:leave:form:complete",function(){s.isEmpty(e.selectedPost.next)||(e.selectedPost.post=e.selectedPost.next,e.selectedPost.next={},t.$broadcast("event:edit:post:reactivate"))}),e.$on("event:edit:post:data:mode:saveSuccess",function(e,t){t.post&&x(t.post)}),e.shouldWeRunCheckForNewPosts&&j(3e4)}()}e.exports=n,n.$inject=[],s.$inject=["$scope","$rootScope","PostFilters","_","PostEndpoint","PostViewService","moment","$translate","$q","PostActionsService","$timeout","$location","Notify","$window","$state","LoadingProgress","$transitions"]},function(e,exports,t){"use strict";function n(e,n,s,i,a,o,r,l,c,d,u,p){function g(t,c,g,f){function m(){C&&(S.removeLayer(C),C=void 0)}function v(e){var t=a.geoJson(e,{pointToLayer:n.pointToLayer,onEachFeature:k});S.options.clustering?(C=C||a.markerClusterGroup(),angular.forEach(t.getLayers(),function(e){C.addLayer(e)})):C=t,C.addTo(S),e.features.length>0&&S.fitBounds(t.getBounds()),S.getZoom()>15&&S.setZoom(15),d(function(){S.invalidateSize()},1)}function h(){t.$watch(function(){return t.filters},function(e,t){var n=s.omit(e,function(e,n,i){return s.isEqual(t[n],e)});s.keys(n).length>0&&(b(),m(),y())},!0)}function b(){s.each(T,function(e){e.$cancelRequest()}),T=[]}function y(e){w(e).then(v)}function w(n,a,o){a=a||0,o=o||1,n=n||i.getQueryParams(t.filters);var r=s.extend(n,{limit:E,offset:a,has_location:"mapped"}),l=e.geojson(r);return T.push(l),l.$promise.then(function(e){if(0===a&&e.total>E&&(P=Math.floor((e.total-E)/E),P+=(e.total-E)%E>0?1:0),P>0&&1===o){var t=P>A?A:P;for(P-=A;t>0;)t-=1,a+=E,w(n,a,t).then(v)}return e})}function _(e){u.go("posts.data.detail",{postId:e.id},{reload:!0})}function k(e,t){t.on("click",function(t){var n=t.layer;n instanceof a.FeatureGroup&&(n=n.getLayers()[0]),n.getPopup()?n.openPopup():x(e).then(function(e){var t=r.$new();t.post=e,t.goToPost=_,t.selectedPost={post:e};var s=l('<post-card selected-post="selectedPost" post="post" short-content="true" click-action="goToPost"></post-card>')(t);n.bindPopup(s[0],{minWidth:"300",maxWidth:"300",className:"pl-popup"}),n.openPopup()})})}function x(t){return e.get({id:t.properties.id}).$promise}var S,C,E=200,A=5,P=0,T=[];!function(){p("post.posts").then(function(e){t.title=e,t.$emit("setPageTitle",e)});var e=w(),s=t.noui?"#map-noui":"#map-full-size",a=n.createMap(c[0].querySelector(s)),r=a.then(function(e){S=e});o.all({map:r,posts:e}).then(function(e){return v(e.posts),e}).then(h),t.$watch(function(){return i.getModeId()},function(e){"savedsearch"===i.getMode()?u.go("posts.map.savedsearch",{savedSearchId:i.getModeId()}):"collection"===i.getMode()?u.go("posts.map.collection",{collectionId:i.getModeId()}):u.go("posts.map.all")}),t.$on("$destroy",function(){S&&S.remove()})}()}return{restrict:"E",replace:!0,scope:{noui:"@",$transition$:"<",filters:"<"},template:t(673),link:g}}e.exports=n,n.$inject=["PostEndpoint","Maps","_","PostFilters","Leaflet","$q","$rootScope","$compile","$location","$timeout","$state","$translate"]},function(e,exports,t){"use strict";function n(e,t,n,s,i){t.setLayout("layout-embed"),e.filters=i.getFilters(),e.$emit("event:allposts:show")}e.exports=n,n.$inject=["$scope","$rootScope","$translate","$transition$","PostFilters"]},function(e,exports,t){"use strict";e.exports=[function(){return{restrict:"E",replace:!0,scope:{view:"="},template:t(675)}}]},function(e,exports,t){"use strict";e.exports=["_","Util","$translate","$rootScope","SliderService",function(e,t,n,s,i){function a(){return o&&o.$destroy(),o=s.$new()}var o,r={showNoPostsSlider:function(){var e=a();n(["post.there_are_no_posts","post.in_this_deployment"]).then(function(t){e.noPostText=t,i.openTemplate('<p><strong>{{noPostText["post.there_are_no_posts"]}}</strong>{{noPostText["post.in_this_deployment"]}}</p><add-post-text-button></add-post-text-button><button class="button-flat message-trigger" ng-click="close()">Dismiss</button>',"file",!1,e,!1,!1,!0)})}};return t.bindAllFunctionsToSelf(r)}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"="},controller:s,template:t(676)}}function s(e,t,n,s,i,a,o,r,l,c,d){function u(){g(!0);var e=s.get({id:"site"}).$promise,t=f();p(e,t,n.export(t))}function p(e,t,n){a.all([e,n]).then(function(e){m(e,t.format)},function(e){g(!1,e)})}function g(t,n){e.loading=t,n?i.apiErrors(n):!0===t?i.notifyProgress('<p translate="notify.export.in_progress"></p>'):i.notify('<h3 translate="notify.export.complete">Your CSV export is complete.</h3><p translate="notify.export.complete_data_found_message">The data from your export can be found in your browser\'s downloads<p>')}function f(){e.filters&&!r.isEmpty(e.filters)||(e.filters=o.getDefaults());return angular.extend({},o.getQueryParams(e.filters),{format:"csv"})}function m(t,n){var s=t[0].name+"-"+(new Date).toISOString().substring(0,10)+"."+n;return v(s,t[1].data,"csv"),e.loadingStatus(!1),s}function v(e,t,n){var s=function(){return r.isFunction(File)?new File([t],e,{type:n}):new Blob([t],{type:n})}();if(r.isUndefined(l.navigator.msSaveBlob)){var i=l.URL||l.webkitURL,a=i.createObjectURL(s);if(e){var o=angular.element("<a/>");o.attr({href:a,download:e}),angular.element(document.body).append(o),o[0].click(),o[0].remove()}else c.url(a);d(function(){i.revokeObjectURL(a)},100)}else l.navigator.msSaveBlob(s,e)}e.loading=!1,e.getQuery=f,e.prepareExport=u,e.showCSVResults=m,e.requestExport=p,e.loadingStatus=g,e.exportPostsConfirmation=function(){i.confirm("notify.post.export").then(function(e){u()})}}e.exports=n,n.$inject=[],s.$inject=["$scope","$translate","PostEndpoint","ConfigEndpoint","Notify","$q","PostFilters","_","$window","$location","$timeout"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",replace:!0,scope:{filters:"=",button:"=?",postId:"=?"},controller:s,template:t(677)}}function s(e,t,n){function s(){return e.button}function i(){return t.location.href.indexOf("post")>0}function a(){var t='<share-menu-modal filters="filters" post-id="'+e.postId+'"></share-menu-modal>';n.openTemplate(t,"app.share","share",e,!0,!0)}e.loading=!1,e.openShareMenu=a,e.isButton=s,e.isAdd=i}e.exports=n,n.$inject=[],s.$inject=["$scope","$window","ModalService"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{surveyId:"=",postId:"=",filters:"="},replace:!0,controller:s,template:t(678)}}function s(e,t,n){}e.exports=n,n.$inject=[],s.$inject=["$scope","Util","$window"]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{filters:"=",surveyId:"=",postId:"="},replace:!0,controller:s,template:t(679)}}function s(e,t,n){function s(){return!(n.location.href.indexOf("post")>0)}e.loading=!1,e.shareUrl=t.currentUrl(),e.isExportable=s,function(){e.postId&&(e.shareUrl=n.location.origin+"/posts/"+e.postId),e.surveyId&&(e.shareUrl=n.location.origin+"/posts/create/"+e.surveyId),e.shareUrlEncoded=encodeURIComponent(e.shareUrl)}()}e.exports=n,n.$inject=[],s.$inject=["$scope","Util","$window"]},function(e,exports,t){"use strict";e.exports=["$scope","$translate","$rootScope","$location","$q","TagEndpoint","Notify","_",function(e,t,n,s,i,a,o,r){function l(e){o.apiErrors(e)}if(!1===n.hasManageSettingsPermission())return s.path("/");t("tool.manage_tags").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.$emit("event:mode:change","settings"),e.refreshView=function(){a.queryFresh().$promise.then(function(t){e.allCategories=t,e.categories=r.map(r.where(t,{parent_id:null}),function(e){return e&&e.children&&(e.children=r.map(e.children,function(e){return r.findWhere(t,{id:parseInt(e.id)})})),e})}),e.selectedCategories=[]},e.refreshView(),e.deleteCategory=function(t){o.confirmDelete("notify.category.destroy_confirm","notify.category.destroy_confirm_desc").then(function(){a.delete(t).$promise.then(function(){o.notify("notify.category.destroy_success",{name:t.tag}),e.refreshView()},l)})},e.deleteCategories=function(){o.confirmDelete("notify.category.bulk_destroy_confirm","notify.category.bulk_destroy_confirm_desc",{count:e.selectedCategories.length}).then(function(){var t=[];angular.forEach(e.selectedCategories,function(e){t.push(a.delete({id:e}).$promise)}),i.all(t).then(function(){o.notify("notify.category.bulk_destroy_success",{count:e.selectedCategories.length}),e.refreshView()},l)})},e.isToggled=function(t){return e.selectedCategories.indexOf(t.id)>-1},e.toggleCategory=function(t){var n=e.selectedCategories.indexOf(t.id);n>-1?e.selectedCategories.splice(n,1):e.selectedCategories.push(t.id)}}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$location","$translate","$q","Notify","_",function(e,t,n,s,i,a,o){if(!1===t.hasManageSettingsPermission())return n.path("/");t.setLayout("layout-c"),e.$emit("event:mode:change","settings")}]},function(e,exports,t){"use strict";e.exports=["$rootScope","$translate","$location","Notify","Features",function(e,t,n,s,i){return{restrict:"A",link:function(t,n,s){t.importComplete=!1,e.$on("event:import:complete",function(e,n){t.collectionId=n.collectionId,t.filename=n.filename,t.form=n.form,t.importComplete=!0})}}}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$location","$translate","FormEndpoint","Notify","_",function(e,t,n,s,i,a,o){if(!1===t.hasManageSettingsPermission())return n.path("/");t.setLayout("layout-c"),e.$emit("event:mode:change","settings"),e.fileContainer={file:null},i.query().$promise.then(function(t){e.forms=t})}]},function(e,exports,t){"use strict";e.exports=["$translate","$rootScope","$q","$location","FormEndpoint","FormStageEndpoint","FormAttributeEndpoint","DataImportEndpoint","Notify","ImportNotify","Features","CollectionEndpoint","moment","_",function(e,t,n,s,i,a,o,r,l,c,d,u,p,g){return{restrict:"A",link:function(i,f,m){function v(e){i.selectedStatus=e}function h(e){i.statusOption=e}function b(e){return i.statusOption===e}function y(e){return i.selectedStatus===e}function w(e){i.selectedForm=e}function _(e){return!!i.selectedForm&&i.selectedForm.id===e.id}function k(){l.confirm("notify.data_import.csv_import_cancel_confirm").then(function(){l.notify("notify.data_import.csv_import_cancel"),x(i.csv),s.url("/settings/data-import/")})}function x(){r.delete(i.csv)}function S(e){return i.activeStep===e}function C(){if(!i.fileContainer.file)return void l.error("notify.data_import.file_missing");if(!i.selectedForm)return void l.error("notify.data_import.form_missing");var e=new FormData;e.append("file",i.fileContainer.file),e.append("form_id",i.selectedForm.id),r.upload(e).then(function(e){l.notify("notify.data_import.csv_upload",{name:i.fileContainer.file.name}),i.stepOneComplete=!0,i.activeStep=2,i.csv=e,E()},function(e){l.apiErrors(e)})}function E(e){n.all([a.getFresh({form_id:i.selectedForm.id}).$promise,o.getFresh({form_id:i.selectedForm.id}).$promise]).then(function(e){i.selectedForm.tasks=e[0].results,i.selectedForm.attributes=A(e[1].results),T(i.selectedForm.attributes),P(i.selectedForm.tasks)})}function A(t){var n=g.chain(t).where({type:"point"}).reduce(function(e,t){return e.concat({key:t.key+".lat",label:t.label+" (Latitude)",priority:t.priority,required:t.required},{key:t.key+".lon",label:t.label+" (Longitude)",priority:t.priority,required:t.required})},[]).value(),s=g.find(t,{type:"title"}),i=g.find(t,{type:"description"}),a=s?s.label:e.instant("post.modify.form.title"),o=i?i.label:e.instant("post.modify.form.description");return t=g.chain(t).reject({type:"point"}).reject({type:"title"}).reject({type:"description"}).concat(n).push({key:"title",label:a,priority:0,required:!0},{key:"content",label:o,priority:1,required:!0}).sortBy("priority").value()}function P(e){g.each(e,function(e){e.required&&(i.hasRequiredTask=!0)})}function T(e){g.each(e,function(e,t){e.required&&(i.required_fields.push(e.key),i.required_fields_map[e.key]=e.label)})}function F(){i.csv.maps_to=L(),M()&&(i.csv.fixed={form:i.selectedForm.id},i.selectedStatus&&(i.isStatusOption("mark_as")?i.csv.fixed.status=i.selectedStatus:i.csv.maps_to[i.selectedStatus]="status"),U(i.csv))}function M(){if(g.every(i.csv.maps_to,g.isEmpty))return l.error("notify.data_import.no_mappings"),!1;var e=D();if(e.length>0)return l.error("notify.data_import.duplicate_fields",{duplicates:e.join(", ")}),!1;var t=q(i.csv.maps_to);return!!g.isEmpty(t)||(l.error("notify.data_import.required_fields",{required:t.join(", ")}),!1)}function I(e){var t=n.defer(),s=p().format("h:mm a MMM Do YYYY"),i={};i.name="Imported "+s,i.view="list",i.visible_to=["admin"];var a=[];return u.save(i).$promise.then(function(s){g.each(e,function(e){a.push(u.addPost({collectionId:s.id,id:e}))}),n.all(a).then(function(){t.resolve(s)})}),t.promise}function U(e){r.update(e).$promise.then(function(){r.import({id:e.id,action:"import"}).$promise.then(function(n){var s=n.processed,a=n.errors;I(n.created_ids).then(function(n){c.importComplete({processed:s,errors:a,collectionId:n.id,form_name:i.selectedForm.name,filename:e.filename}),t.$emit("event:import:complete",{form:i.form,filename:e.filename,collectionId:n.id})})},function(e){l.apiErrors(e)})},function(e){l.apiErrors(e)}),s.url("/settings/data-after-import")}function q(e){var t=[],n=g.difference(i.required_fields,g.toArray(e));return g.isEmpty(n)||g.each(n,function(e){t.push(i.required_fields_map[e])}),t}function L(){var e=g.clone(i.maps_to);e=g.invert(e),e=g.omit(e,"");var t=g.keys(e);return g.each(i.csv.columns,function(n,s){e[s]=g.contains(t,s.toString())?e[s]:null}),e}function D(){var e=g.omit(i.maps_to,function(e,t,n){return""===e});return g.chain(e).map(function(e){return i.csv.columns[e]}).countBy(function(e){return e}).pick(function(e,t){return e>1}).allKeys().value()}i.setStatus=v,i.setStatusOption=h,i.isStatusOption=b,i.isStatusSelected=y,i.setSelectedForm=w,i.isSelectedForm=_,i.cancelImport=k,i.deleteDataImport=x,i.isActiveStep=S,i.completeStepOne=C,i.completeStepTwo=F,function(){i.selectedForm,i.activeStep=1,i.stepOneComplete=!1,i.stepTwoComplete=!1,i.maps_to={},i.required_fields=[],i.required_fields_map={},i.hasRequiredTask=!1,d.loadFeatures().then(function(){i.csvEnabled=d.isFeatureEnabled("data-import")})}()}}}]},function(e,exports,t){"use strict";function n(e,n,i,a,o,r){function l(n){var s=c();s=e.extend(s,n),function(){o.openTemplate(t(683),"thumb-up","confirmation",s,!1,!1)}()}function c(){return s&&s.$destroy(),s=i.$new()}return{importComplete:l}}e.exports=n;var s;n.$inject=["_","$q","$rootScope","$translate","SliderService","ModalService"]},function(e,exports,t){"use strict";e.exports=["$q","$scope","$rootScope","$location","$translate","ConfigEndpoint","DataProviderEndpoint","Notify","_","Features",function(e,t,n,s,i,a,o,r,l,c){if(!1===n.hasManageSettingsPermission())return s.path("/");n.setLayout("layout-c"),t.$emit("event:mode:change","settings"),t.saving=!1,t.settings={},t.available_providers=[],t.forms={},t.formsSubmitted={},t.panelVisible={},i("settings.data_sources.data_sources").then(function(e){t.title=e,t.$emit("setPageTitle",e)}),t.saveProviderSettings=function(e){if(t.saving)return!1;t.forms[e].$valid?(t.saving=!0,t.savedProviders[e]||(t.settings.providers[e]=!0),t.settings.id="data-provider",a.saveCache(t.settings).$promise.then(function(n){t.saving=!1,r.notify("notify.datasource.save_success"),d(e)},function(e){r.apiErrors(e)}),t.formsSubmitted[e]=!1):(t.formsSubmitted[e]=!0,t.panelVisible[e]=!0)};var d=function(e){t.savedProviders[e]||(t.savedProviders[e]=!0)};e.all([o.queryFresh().$promise,a.get({id:"data-provider"}).$promise]).then(function(e){t.providers=e[0],t.settings=e[1],t.savedProviders={},l.forEach(t.providers.results,function(e){t.settings[e.id]&&d(e.id)})}),c.loadFeatures().then(function(e){t.available_providers=e["data-providers"]})}]},function(e,exports,t){"use strict";e.exports=["$scope","$translate","$rootScope","CONST","ConfigEndpoint",function(e,t,n,s,i){n.setLayout("layout-c"),t("nav.plan_settings").then(function(t){e.title=t,n.$emit("setPageTitle",t)}),e.legacyPlan=!1;var a=["free","surveyor","responder"];i.get({id:"site"}).$promise.then(function(t){e.tier=t.tier,-1===a.indexOf(t.tier)&&(e.specialPlan=t.tier)}),e.username=(n.currentUser||{}).email,e.cloudDomain="undefined"!=typeof deploymentsDomain?deploymentsDomain:"ushahidi.io",e.subdomain="undefined"!=typeof apiDomain?s.BACKEND_URL.replace("."+apiDomain,"").replace(/http[s]?:\/\//,""):s.BACKEND_URL}]},function(e,exports,t){"use strict";e.exports=["$translate","$location","RoleEndpoint","PermissionEndpoint","Notify",function(e,t,n,s,i){return{restrict:"A",link:function(a,o,r){a.whereToNext="settings/roles",a.save=e.instant("app.save"),a.saving=e.instant("app.saving"),a.saving_role=!1,n.getFresh({id:a.$resolve.$transition$.params().id}).$promise.then(function(t){a.role=t,a.title=a.role.id?"role.edit_role":"role.add_role",e(a.title).then(function(e){a.title=e,a.$emit("setPageTitle",e)})}),s.query().$promise.then(function(e){a.permissions=e.results}),a.cancel=function(){t.path(a.whereToNext)},a.saveRole=function(e){a.saving_role=!0,e.name=e.name?e.name:e.display_name,n.saveCache(e).$promise.then(function(n){i.notify("notify.role.save_success",{role:e.display_name}),t.path(a.whereToNext)},function(e){i.apiErrors(e)}),a.saving_role=!1};var l=function(e){i.apiErrors(e)};a.checkIfLastAdmin=function(){var e=0;return _.each(a.roles,function(t){"admin"===t.name&&e++}),1===e},a.deleteRole=function(e){if("admin"===e.name&&a.checkIfLastAdmin())return void i.error("notify.role.last_admin");i.confirmDelete("notify.role.delete_question",{role:e.display_name}).then(function(){n.delete({id:e.id}).$promise.then(function(){i.notify("notify.role.destroy_success",{role:e.display_name}),t.path(a.whereToNext)},l)})}}}}]},function(e,exports,t){"use strict";e.exports=["$translate","$rootScope","$location","RoleEndpoint","Notify","_","Features",function(e,t,n,s,i,a,o){return{restrict:"A",link:function(e,n,i){t.setLayout("layout-a"),e.refreshView=function(){s.queryFresh().$promise.then(function(t){e.roles=t})},e.refreshView(),o.loadFeatures().then(function(){e.rolesEnabled=o.isFeatureEnabled("roles")})}}}]},function(e,exports,t){"use strict";e.exports=["$translate","$rootScope","_","ConfigEndpoint","Notify","Util","Languages","Features",function(e,n,s,i,a,o,r,l){return{restrict:"E",replace:!0,scope:{},template:t(687),link:function(e,t,s){e.isAdmin=n.isAdmin,e.hasPermission=n.hasPermission,e.hasManageSettingsPermission=n.hasManageSettingsPermission,e.tierNames={free:"Mapper",surveyor:"Surveyor",responder:"Responder","free-pre-jun-2016":"Mapper (Legacy)",zerorated:"Social Impact"},l.loadFeatures().then(function(){e.planIsAvailable=l.isViewEnabled("plan"),i.get({id:"site"}).$promise.then(function(t){e.tier=t.tier})})}}}]},function(e,exports,t){"use strict";e.exports=["$scope","$translate","$location","$rootScope",function(e,t,n,s){if(!1===s.hasManageSettingsPermission())return n.path("/");t("tool.settings").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.$emit("event:mode:change","settings")}]},function(e,exports,t){"use strict";angular.module("ushahidi.settings",[]).directive("afterImportCsv",t(893)).directive("importerCsv",t(895)).service("ImportNotify",t(896)).directive("surveyEditor",t(910)).directive("surveyTaskCreate",t(913)).directive("surveyAttributeCreate",t(908)).directive("surveyAttributeEditor",t(909)).service("SurveyNotify",t(911)).directive("settingsList",t(901)).directive("settingsMap",t(906)).directive("settingsEditor",t(905)).directive("filterUsers",t(916)).directive("customRoles",t(900)).directive("customRolesEditor",t(899)).directive("customWebhooks",t(919)).directive("customWebhooksEditor",t(918)).config(t(904))},function(e,exports,t){"use strict";e.exports=["$stateProvider","$urlMatcherFactoryProvider",function(e,n){n.strictMode(!1),e.state({name:"settings",url:"/settings",controller:t(902),template:t(688)}).state({name:"settings.general",url:"/general",controller:t(907),template:t(691)}).state({name:"settings.dataImport",url:"/data-import",controller:t(894),template:t(682)}).state({name:"settings.dataAfterImport",url:"/data-after-import",controller:t(892),template:t(681)}).state({name:"settings.surveys",url:"/surveys",controller:t(912),template:t(696)}).state({name:"settings.surveys.create",url:"/create",controller:t(256),template:t(250)}).state({name:"settings.surveys.id",url:"/:action/:id",controller:t(256),template:t(250)}).state({name:"settings.categories",url:"/categories",controller:t(891),template:t(680)}).state({name:"settings.categories.create",url:"/create",controller:t(255),template:t(248)}).state({name:"settings.categories.edit",url:"/:id",controller:t(255),template:t(248)}).state({name:"settings.users",url:"/users",controller:t(917),template:t(699)}).state({name:"settings.users.create",url:"/create",controller:t(914),template:t(251)}).state({name:"settings.users.edit",url:"/:id",controller:t(915),template:t(251)}).state({name:"settings.roles",url:"/roles",controller:t(162),template:t(686)}).state({name:"settings.roles.create",url:"/create",controller:t(162),template:t(249)}).state({name:"settings.roles.edit",url:"/:id",controller:t(162),template:t(249)}).state({name:"settings.webhooks",url:"/webhooks",controller:t(163),template:t(700)}).state({name:"settings.webhooks.create",url:"/create",controller:t(163),template:t(252)}).state({name:"settings.webhooks.edit",url:"/:id",controller:t(163),template:t(252)}).state({name:"settings.datasources",url:"/datasources",controller:t(897),template:t(684)}).state({name:"settings.plan",url:"/plan",controller:t(898),template:t(685)})}]},function(e,exports,t){"use strict";e.exports=["$q","$http","$translate","$location","$rootScope","ConfigEndpoint","_","Notify","Maps","Util","Languages","Features",function(e,n,s,i,a,o,r,l,c,d,u,p){return{restrict:"E",replace:!0,scope:{formId:"@",formTemplate:"@"},template:t(690),link:function(t,r,c){t.saving_config=!1,t.save=s.instant("app.save"),t.saving=s.instant("app.saving"),t.map={},t.fileContainer={file:null},p.loadFeatures().then(function(){t.isPrivateEnabled=p.isFeatureEnabled("private")}),t.site=o.get({id:"site"}),t.userSavedSettings=!1,t.clearHeader=function(){t.site.image_header=null};var u=function(){a.$broadcast("event:update:header")},g=function(){var s=e.defer();if(t.fileContainer.file){var i=new FormData;i.append("file",t.fileContainer.file),n.post(d.apiUrl("/media"),i,{headers:{"Content-Type":void 0}}).then(function(e){t.site.image_header=e.data.original_file_url,s.resolve()},function(e){s.reject(e)})}else s.resolve();return s.promise};t.updateConfig=function(){t.saving_config=!0,g().then(function(){e.all([o.saveCache(t.site).$promise,o.saveCache(t.map).$promise]).then(function(e){t.saving_config=!1,u(),l.notify("notify.general_settings.save_success")},function(e){l.apiErrors(e),t.saving_config=!1})},function(e){l.apiErrors(e),t.saving_config=!1})},t.cancel=function(){i.path("/settings")}}}}]},function(e,exports,t){"use strict";e.exports=["$q","ConfigEndpoint","Leaflet","Maps",function(e,n,s,i){return{restrict:"E",scope:{config:"="},template:t(689),link:function(t,n,a){function o(){t.minZoom=p.getMinZoom(),t.maxZoom=p.getMaxZoom()}function r(){p.eachLayer(function(e){e instanceof s.TileLayer&&e.remove()}),i.getLayer(t.config.default_view.baselayer).addTo(p)}function l(){p.setView([t.config.default_view.lat,t.config.default_view.lon],t.config.default_view.zoom),g.setLatLng([t.config.default_view.lat,t.config.default_view.lon])}function c(e){t.$evalAsync(function(){var n=e.target.getLatLng().wrap();t.config.default_view.lat=n.lat,t.config.default_view.lon=n.lng,t.updateMapPreview()})}function d(e){t.$evalAsync(function(){var n=e.latlng.wrap();t.config.default_view.lat=n.lat,t.config.default_view.lon=n.lng,t.updateMapPreview()})}function u(e){t.$evalAsync(function(){t.config.default_view.zoom=p.getZoom()})}var p,g;t.patternDigitsOnly=/^[0-9]+$/,t.patternFloat=/[-+]?(\d*[.])?\d+/,t.minZoom=0,t.maxZoom=18,t.updateMapPreview=l,t.updateMapPreviewLayer=r,function(){t.baselayers=i.getBaseLayers(),e.all({map:i.createMap(n[0].querySelector("#settings-map")),config:i.getConfig(!0)}).then(function(e){p=e.map,angular.extend(t.config,e.config),g=s.marker(p.getCenter(),{draggable:!0,icon:i.pointIcon()}),g.addTo(p),o(),g.on("dragend",c),p.on("zoomend",u),p.on("click",d)})}()}}}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$location","$translate",function(e,t,n,s){if(!1===t.hasManageSettingsPermission())return n.path("/");t.setLayout("layout-a"),s("tool.site_settings").then(function(n){e.title=n,t.$emit("setPageTitle",n)}),e.$emit("event:mode:change","settings")}]},function(e,exports,t){"use strict";e.exports=["$rootScope","$translate","ModalService","_",function(e,n,s,i){return{restrict:"E",template:t(692),link:function(e,t,a){e.newAttribute={required:!1,options:[],config:{},priority:0},e.createNewAttribute=function(t){t.label="",e.openAttributeEditModal(e.activeTask,i.extend(e.newAttribute,t))},e.closeModal=function(){s.close()},e.availableAttrTypes=[{label:"Short text",type:"varchar",input:"text",description:n.instant("survey.text_desc")},{label:"Long text",type:"text",input:"textarea",description:n.instant("survey.textarea_desc")},{label:"Number (Decimal)",type:"decimal",input:"number",description:n.instant("survey.decimal_desc")},{label:"Number (Integer)",type:"int",input:"number",description:n.instant("survey.integer_desc")},{label:"Location",type:"point",input:"location",description:n.instant("survey.location_desc")},{label:"Date",type:"datetime",input:"date",description:n.instant("survey.date_desc")},{label:"Date & time",type:"datetime",input:"datetime",description:n.instant("survey.datetime_desc")},{label:"Select",type:"varchar",input:"select",description:n.instant("survey.select_desc")},{label:"Radio Buttons(s)",type:"varchar",input:"radio",description:n.instant("survey.radio_desc")},{label:"Checkbox(es)",type:"varchar",input:"checkbox",cardinality:0,description:n.instant("survey.checkbox_desc")},{label:"Related Post",type:"relation",input:"relation",description:n.instant("survey.relation_desc")},{label:"Image",type:"media",input:"upload",description:n.instant("survey.upload_desc"),config:{hasCaption:!0}},{label:"Embed video",type:"varchar",input:"video",description:n.instant("survey.video_desc")},{label:"Markdown",type:"markdown",input:"markdown",description:n.instant("survey.markdown_desc")},{label:"Categories",type:"tags",cardinality:0,input:"tags",description:n.instant("settings.settings_list.categories_desc")}]}}}]},function(e,exports,t){"use strict";e.exports=["$rootScope","ModalService","_",function(e,n,s){return{restrict:"E",template:t(693),link:function(e,t,i){e.editAttribute.config=!e.editAttribute.config||s.isArray(e.editAttribute.config)&&0===e.editAttribute.config.length?{}:e.editAttribute.config,e.defaultValueToggle=!1,e.descriptionToggle=!1,e.closeModal=function(){n.close()},e.onlyOptional=function(){return"title"!==e.editAttribute.type&&"description"!==e.editAttribute.type},e.canDisplay=function(){return"upload"!==e.editAttribute.input&&"title"!==e.editAttribute.type&&"description"!==e.editAttribute.type&&"tags"!==e.editAttribute.input},e.canMakePrivate=function(){return"tags"!==e.editAttribute.type},e.canDisableCaption=function(){return"media"===e.editAttribute.type&&"upload"===e.editAttribute.input}}}}]},function(e,exports,t){"use strict";function n(){return{restrict:"E",scope:{surveyId:"=",actionType:"="},controller:s,template:t(694)}}function s(e,t,n,s,i,a,o,r,l,c,d,u,p,g,f){function m(e){return"title"!==e.type&&"description"!==e.type}function v(t,n){var s=e.tab_history[t];if(s){var i=s+"-li";angular.element(document.getElementById(s)).removeClass("active"),angular.element(document.getElementById(i)).removeClass("active")}n=n+"-"+t,e.tab_history[t]=n;var a=n+"-li";angular.element(document.getElementById(n)).addClass("active"),angular.element(document.getElementById(a)).addClass("active")}function h(e){return"title"!==e.type&&"description"!==e.type}function b(){var t="interim_id_"+e.currentInterimId;return e.currentInterimId++,t}function y(){d.each(e.survey.tasks,function(e){e.id=d.isString(e.id)?void 0:e.id})}function w(){i.queryFresh().$promise.then(function(t){e.availableForms=t})}function _(){c.queryFresh().$promise.then(function(t){e.availableCategories=t})}function k(){t.all([i.getFresh({id:e.surveyId}).$promise,o.queryFresh({formId:e.surveyId}).$promise,r.queryFresh({formId:e.surveyId}).$promise,a.queryFresh({formId:e.surveyId}).$promise]).then(function(t){var n=t[0];n.tasks=d.sortBy(t[1],"priority");var s=d.chain(t[2]).sortBy("priority").value();d.each(s,function(e){"tags"===e.type&&(e.options=d.map(e.options,function(e){return parseInt(e)}))}),d.each(n.tasks,function(t){e.switchTab(t.id,"section-build"),t.attributes=d.filter(s,function(e){return e.form_stage_id===t.id})}),e.survey=n;var i=t[3];e.roles_allowed=d.pluck(i,"role_id"),"duplicate"===e.actionType&&(e.survey.name=void 0,e.survey.description=void 0,delete e.survey.id,delete e.survey.created,delete e.survey.updated,delete e.survey.url,delete e.survey.can_create,delete e.survey.tags,d.each(e.survey.tasks,function(t){t.form_id=void 0,t.id=e.getInterimId(),delete t.url,d.each(t.attributes,function(e){e.form_stage_id=t.id,delete e.id,delete e.url,delete e.key})}))})}function x(){t.all([l.query().$promise]).then(function(t){e.roles=t[0]})}function S(){n.url("/settings/surveys")}function C(t){e.saving_survey=!1,u.apiErrors(t)}function E(t){var n=e.survey.tasks;return 1===d.indexOf(n,t)}function A(t){var n=e.survey.tasks;return d.indexOf(n,t)===n.length-1}function P(e,t){var n=e.attributes;return 0===d.indexOf(n,t)}function T(e,t){var n=e.attributes;return d.indexOf(n,t)===n.length-1}function F(e){return"Post"!==e.label}function M(e){D(e,-1)}function I(e){D(e,1)}function U(e,t){L(e,t,-1)}function q(e,t){L(e,t,1)}function L(e,t,n){var s=e.attributes,i=d.indexOf(s,t),a=s[i+n];d.isUndefined(a)||(a.priority=t.priority,t.priority=t.priority+n,e.attributes=d.sortBy(s,"priority"))}function D(t,n){var s=e.survey.tasks,i=d.indexOf(s,t),a=s[i+n];d.isUndefined(a)||(a.priority=t.priority,t.priority=t.priority+n,e.survey.tasks=d.sortBy(s,"priority"))}function O(e){e.id||d.each(e.attributes,function(t){t.form_stage_id=e.label})}function R(){g.openTemplate("<survey-task-create></survey-task-create>","survey.add_task","",e,!0,!0)}function N(){return e.survey.tasks.length?d.last(e.survey.tasks).priority+1:0}function j(e){return e.attributes.length?d.last(e.attributes).priority+1:0}function V(t){g.close(),t.priority=N(),t.id=e.getInterimId(),e.survey.tasks.push(t),e.switchTab(t.id,"section-build")}function B(t){e.activeTask=t,g.openTemplate("<survey-attribute-create></survey-attribute-create>","survey.add_field","",e,!0,!0)}function z(t,n){e.activeTask=t,n.form_stage_id||g.close(),e.editAttribute=n;var s=n.id?"survey.edit_field":"survey.add_field";g.openTemplate("<survey-attribute-editor></survey-attribute-editor>",s,"",e,!0,!0)}function G(e,t){g.close(),e.form_stage_id||(e.priority=j(t),e.form_stage_id=t.id?t.id:t.label,t.attributes.push(e))}function Y(t,n){u.confirmDelete("notify.form.delete_attribute_confirm","notify.form.delete_attribute_confirm_desc").then(function(){if(!t.id)return n.attributes=d.filter(n.attributes,function(e){return e.label!==t.label}),void g.close();r.delete({formId:e.survey.id,id:t.id}).$promise.then(function(e){var t=d.findIndex(n.attributes,function(t){return t.id===e.id});n.attributes.splice(t,1),o.invalidateCache(),u.notify("notify.form.destroy_attribute_success",{name:e.label}),g.close()})})}function W(t){var n=angular.copy(t);n.label=void 0,n.description=void 0,n.id=b(),d.each(n.attributes,function(e){delete e.id,delete e.url,delete e.key,e.form_stage_id=n.id}),e.survey.tasks.push(n),e.switchTab(n.id,"section-build")}function H(t){u.confirmDelete("notify.form.delete_stage_confirm","notify.form.delete_stage_confirm_desc").then(function(){if(!t.id||d.isString(t.id))return void(e.survey.tasks=d.filter(e.survey.tasks,function(e){return e.label!==t.label}));o.delete({formId:e.survey.id,id:t.id}).$promise.then(function(){u.notify("notify.form.destroy_stage_success",{name:t.label}),e.survey.tasks=d.filter(e.survey.tasks,function(e){return e.id!==t.id})})})}function K(){e.saving_survey=!0,i.saveCache(e.survey).$promise.then(function(n){return e.survey.id!==n.id&&(e.survey.id=n.id),t.all([Z(),J()])}).then(function(){return Q()}).then(function(){p.success("notify.form.edit_form_success",{name:e.survey.name},{formId:e.survey.id}),n.url("settings/surveys")}).catch(C)}function Z(){var n=[];return e.removeInterimIds(),d.each(e.survey.tasks,function(t){t.form_id=e.survey.id,n.push(o.saveCache(d.extend(t,{formId:e.survey.id})).$promise)}),t.all(n).then(function(t){t=d.sortBy(t,"priority"),d.each(t,function(t,n){d.extend(e.survey.tasks[n],t)})})}function Q(){var n=[];return d.each(e.survey.tasks,function(t){d.each(t.attributes,function(s){"tags"===s.type&&(s.options=d.filter(s.options,function(e){return!isNaN(e)})),s.form_stage_id=t.id,n.push(r.saveCache(d.extend(s,{formId:e.survey.id})).$promise)})}),t.all(n)}function J(){return a.saveCache(d.extend({roles:e.roles_allowed},{formId:e.survey.id})).$promise}function X(e){e.required=!e.required}function ee(e){e.is_public=!e.is_public}function te(e){e.required=!e.required}e.saving=!1,e.currentInterimId=0,e.survey={color:null},e.canReorderTask=F,e.moveTaskUp=M,e.moveTaskDown=I,e.isFirstTask=E,e.isLastTask=A,e.deleteTask=H,e.duplicateSection=W,e.openTaskModal=R,e.addNewTask=V,e.openAttributeModal=B,e.openAttributeEditModal=z,e.addNewAttribute=G,e.moveAttributeUp=U,e.moveAttributeDown=q,e.isFirstAttribute=P,e.isLastAttribute=T,e.deleteAttribute=Y,e.saving_survey=!1,e.saveSurvey=K,e.cancel=S,e.toggleTaskRequired=X,e.toggleAttributeRequired=te,e.toggleTaskPublic=ee,e.changeTaskLabel=O,e.getInterimId=b,e.removeInterimIds=y,e.allowedToggleOrder=h,e.switchTab=v,e.loadRoleData=x,e.roles_allowed=[],e.roles=[],e.onlyOptional=m,function(){e.tab_history={},e.switchTab("post","survey-build"),e.loadRoleData(),e.save=s.instant("app.save"),e.saving=s.instant("app.saving"),e.surveyId?k():(e.survey={color:null,require_approval:!0,everyone_can_create:!0,tasks:[{label:"Post",priority:0,required:!1,type:"post",show_when_published:!0,task_is_internal_only:!1,attributes:[{cardinality:0,input:"text",label:"Title",priority:1,required:!0,type:"title",options:[],config:{},form_stage_id:b()},{cardinality:0,input:"text",label:"Description",priority:2,required:!0,type:"description",options:[],config:{},form_stage_id:b()}],is_public:!0}]},e.survey.tasks[0].id=e.getInterimId()),w(),_(),e.surveyId||t.all([f.loadFeatures(),i.queryFresh().$promise]).then(function(e){var t=f.getLimit("forms");!0!==t&&t<=e[1].length&&(u.limit("limit.post_type_limit_reached"),n.path("settings/surveys"))})}(),e.hasOptions=function(e){return d.contains(["checkbox","radio","select"],e.input)},e.removeOption=function(e,t){e.options.splice(t,1)},e.addOption=function(e){e.options.push("")}}e.exports=n,n.$inject=[],s.$inject=["$scope","$q","$location","$translate","FormEndpoint","FormRoleEndpoint","FormStageEndpoint","FormAttributeEndpoint","RoleEndpoint","TagEndpoint","_","Notify","SurveyNotify","ModalService","Features"]},function(e,exports,t){"use strict";function n(e,n,i,a,o,r){function l(n,s,i){function r(n){i.successText=n,l=e.extend(l,i),o.openTemplate(t(695),"thumb-up","confirmation",l,!1,!1)}var l=c();a(n,s).then(r,r)}function c(){return s&&s.$destroy(),s=i.$new()}return{success:l}}e.exports=n;var s;n.$inject=["_","$q","$rootScope","$translate","SliderService","ModalService"]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$translate","$location","$q","FormEndpoint","FormStageEndpoint","Notify","_",function(e,t,n,s,i,a,o,r,l){if(t.setLayout("layout-b"),!1===t.hasManageSettingsPermission())return s.path("/");n("nav.posts_and_entities").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.$emit("event:mode:change","settings"),e.refreshForms=function(){a.queryFresh().$promise.then(function(t){e.forms=t})},e.deleteSurvey=function(t){r.confirmDelete("notify.form.delete_form_confirm","notify.form.delete_form_confirm_desc").then(function(){if(!t.id)return void s.url("/settings/surveys");a.delete({id:t.id}).$promise.then(function(){r.notify("notify.form.destroy_form_success",{name:t.name}),e.refreshForms()},e.handleResponseErrors)})},e.handleResponseErrors=function(e){r.apiErrors(e)},e.refreshForms()}]},function(e,exports,t){"use strict";e.exports=["$rootScope","ModalService",function(e,n){return{restrict:"E",template:t(697),link:function(e,t,s){e.newTask={required:!1,attributes:[],type:"task",show_when_published:!1,task_is_internal_only:!0},e.closeModal=function(){n.close()}}}}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$translate","$location","$state","UserEndpoint","Notify","_","RoleEndpoint",function(e,t,n,s,i,a,o,r,l){if(!1===t.hasManageSettingsPermission())return s.path("/");n("user.add_user").then(function(n){e.title=n,t.$emit("setPageTitle",n)}),e.passwordShown=!0,e.user={role:"user"},e.save=n.instant("app.save"),e.saving=n.instant("app.saving"),e.saving_user=!1,e.saveUser=function(t,n){e.saving_user=!0;a.saveCache(t).$promise.then(function(a){a.id&&(o.notify("notify.user.save_success",{name:t.realname}),e.saving_user=!1,e.userSavedUser=!0,e.user.id=a.id,n?i.go(i.$current,null,{reload:!0}):s.path("/settings/users"))},function(t){var n=[],s=!1;r.each(t.data.errors,function(e,t){"limit::admin"===e.title?s="limit.admin_limit_reached":n.push(e)}),s?o.limit(s):o.errors(r.pluck(n,"message")),e.saving_user=!1})},e.cancel=function(){s.path("/settings/users")},l.query().$promise.then(function(t){e.roles=r.indexBy(t,"name")})}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$translate","$location","$transition$","UserEndpoint","Notify","_","RoleEndpoint","Session",function(e,t,n,s,i,a,o,r,l,c){if(!1===t.hasManageSettingsPermission())return s.path("/");n("user.edit_user").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),e.passwordShown=!0,e.save=n.instant("app.save"),e.saving=n.instant("app.saving"),e.saving_user=!1,a.getFresh({id:i.params().id}).$promise.then(function(t){e.$emit("setPageTitle",e.title+" - "+t.realname),e.user=t,e.passwordShown=!1}),e.showPassword=function(){e.passwordShown=!0},e.saveUser=function(t){e.saving_user=!0,a.saveCache(t).$promise.then(function(n){n.id&&(o.notify("notify.user.edit_success",{name:t.realname}),e.saving_user=!1,e.userSavedUser=!0,e.user.id=n.id),s.path("/settings/users")},function(t){var n=[],s=!1;r.each(t.data.errors,function(e,t){"limit::admin"===e.title?s="limit.admin_limit_reached":n.push(e)}),s?o.limit(s):o.errors(r.pluck(n,"message")),e.saving_user=!1})};var d=function(e){o.apiErrors(e)},u=function(t){var n=c.getSessionDataEntry("userId");return!!r.contains(e.selectedUsers,n)&&(o.error(t),!0)};e.deleteUser=function(e){u("user.cannot_delete_yourself")||o.confirmDelete("notify.user.destroy_confirm").then(function(){a.delete({id:e.id}).$promise.then(function(){o.notify("notify.user.destroy_success")},d),s.url("/settings/users")},function(){})},e.cancel=function(){s.path("/settings/users")},l.query().$promise.then(function(t){e.roles=r.indexBy(t,"name")})}]},function(e,exports,t){"use strict";e.exports=[function(){var e=["$scope","$rootScope","$translate","$timeout","RoleEndpoint","UserEndpoint","_",function(e,t,n,s,i,a,o){e.filtersMenuOpen=!1,e.cancel=function(){e.usersFiltersForm.$rollbackViewValue(),e.filtersMenuOpen=!1},e.applyFilters=function(){e.filtersMenuOpen=!1}}];return{restrict:"E",replace:!0,template:t(698),scope:{filters:"="},controller:e}}]},function(e,exports,t){"use strict";e.exports=["$scope","$rootScope","$translate","$q","$location","_","$window","Session","UserEndpoint","RoleEndpoint","Notify",function(e,t,n,s,i,a,o,r,l,c,d){if(!1===t.hasManageSettingsPermission())return i.path("/");var u,p;t.setLayout("layout-a"),n("tool.manage_users").then(function(t){e.title=t,e.$emit("setPageTitle",t)}),c.query().$promise.then(function(t){e.roles=a.indexBy(t,"name")}),e.filters={role:[],q:""},e.selectedUsers=[],e.isToggled=function(t){return e.selectedUsers.indexOf(t.id)>-1},e.toggleUser=function(t){var n=e.selectedUsers.indexOf(t.id);n>-1?e.selectedUsers.splice(n,1):e.selectedUsers.push(t.id)},u=function(e){d.apiErrors(e)},p=function(t){var n=r.getSessionDataEntry("userId");return!!a.contains(e.selectedUsers,n)&&(d.error(t),!0)},e.addUser=function(){i.path("/settings/users/create")},e.deleteUsers=function(){p("user.cannot_delete_yourself")||d.confirmDelete("notify.user.bulk_destroy_confirm",{count:e.selectedUsers.length}).then(function(){var t=[];angular.forEach(e.selectedUsers,function(e){t.push(l.delete({id:e}).$promise)}),s.all(t).then(function(){d.notify("notify.user.bulk_destroy_success"),e.getUsersForPagination()},u).finally(e.filterRole)},function(){})},e.changeRole=function(t){p("user.cannot_change_your_own_role")||d.confirm("notify.user.bulk_role_change_confirm",{count:e.selectedUsers.length,role:t.display_name}).then(function(){var n=[];angular.forEach(e.selectedUsers,function(e){n.push(l.saveCache({id:e,role:t.name}).$promise)}),s.all(n).then(function(){d.notify("notify.user.bulk_role_change_success",{role_name:t.name}),e.getUsersForPagination()},u).finally(e.filterRole)})},e.itemsPerPageChanged=function(t){e.itemsPerPage=t,e.getUsersForPagination()},e.getUsersForPagination=function(){var t=a.extend({offset:(e.currentPage-1)*e.itemsPerPage,limit:e.itemsPerPage,orderby:"realname"},e.filters);l.queryFresh(t).$promise.then(function(t){e.users=t.results,e.totalItems=t.total_count,e.showPagination=e.totalItems>0&&e.totalItems/e.itemsPerPage>1})},e.pageChanged=e.getUsersForPagination,e.applyFilters=function(){e.getUsersForPagination()},e.filteredRole="",e.currentPage=1,e.itemsPerPageOptions=[10,20,50],e.itemsPerPage=e.itemsPerPageOptions[0],e.totalItems=e.itemsPerPage,e.getUsersForPagination(),e.$watch("filters",function(){e.getUsersForPagination()},!0)}]},function(e,exports,t){"use strict";e.exports=["$translate","$location","$state","WebhookEndpoint","Notify",function(e,t,n,s,i){return{restrict:"A",link:function(n,a,o){n.whereToNext="settings/webhooks",n.event_types=["create"],n.entity_types=["post"],n.save=e.instant("app.save"),n.saving=e.instant("app.saving"),n.processing=!1,s.getFresh({id:n.$resolve.$transition$.params().id}).$promise.then(function(t){n.webhook=t,n.title=n.webhook.id?"webhook.edit_webhook":"webhook.add_webhook",e(n.title).then(function(e){n.title=e,n.$emit("setPageTitle",e)})}),n.cancel=function(){t.path(n.whereToNext)},n.saveWebhook=function(e){n.processing=!0,e.name=e.name?e.name:e.display_name,s.saveCache(e).$promise.then(function(s){i.notify("notify.webhook.save_success",{webhook:e.display_name}),t.path(n.whereToNext)},function(e){i.apiErrors(e)}),n.processing=!1};var r=function(e){n.processing=!1,i.apiErrors(e)};n.deleteWebhook=function(e){i.confirmDelete("notify.webhook.delete_question",{webhook:e.display_name}).then(function(){s.delete({id:e.id}).$promise.then(function(){i.notify("notify.webhook.destroy_success",{webhook:e.display_name}),t.path(n.whereToNext)},r)})}}}}]},function(e,exports,t){"use strict";e.exports=["$translate","$rootScope","$location","WebhookEndpoint","Notify","_","Features",function(e,t,n,s,i,a,o){return{restrict:"A",link:function(e,n,i){t.setLayout("layout-a"),e.refreshView=function(){s.queryFresh().$promise.then(function(t){e.webhooks=t})},e.refreshView(),o.loadFeatures().then(function(){e.webhooksEnabled=o.isFeatureEnabled("webhooks")})}}}]},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNTgwMTE3NDA3MjA2ODExODA4M0NDMTM4MEMyQTVFQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCOUMxMDdGMkE2MTYxMUUyOEJFQUJDRTMzOERDQjM5MCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCOUMxMDdGMUE2MTYxMUUyOEJFQUJDRTMzOERDQjM5MCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QUM3QUJGQTkzODIwNjgxMThDMTQ5OEFGOTgxQUJBQ0UiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDU4MDExNzQwNzIwNjgxMTgwODNDQzEzODBDMkE1RUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4rzsvUAAADP0lEQVR42uycvU9TURiHX9ryESiiFoEIAQQDVkUGRaMghkAgGhMSNcpAiDoxkKiJRhmdhD/BQQcndVcUN4MmLiRGEye0lIIJiECQUuiHnlOLG4OX1ntanyf5Le29afs+vfc995ybm9V86YEkqFQZVDmjUq7iFEglEZUZlecq91T8+kVH4s0ulY8q/QkxyEg9rkStdc0/qHRuCKlWeaJSSI1sY5vKU5UqLeS2ShE1sR3t4I4j0TPADE47Eg0czKDCQQM3CqeDGpgFQhACCEEIIAQhkApclOA32S6HNHrLpKGuVOr2eGR3iVuKd+ZLbrZL8nJdEg5HJbQeiW+7GorIcnBdlld01mT++6p8W1iR2fmgzC8G5d37AEKssrfaIxe69supo5VSWJC7ubBsZzwavV2Jp2DTbVt6HiLkb6koLZKBviZpOVzJKctOsrJEznUekIHeI3/+8Qix68c6HTLY3ypdJ2to6iY07bvX2qS1qYphrwlcv3zceBn/jZCO5lrp7qjnwtAE9BD1xpVjXKmbQm/3ISly5yHEBNz5OXK+y5tW3zmjhZxtq49PeyDEENpP1KTdd85YIcU7CmRfjQchptDoLY1Pk6TdbEKmCvHW7trS/tFoTF6OfZa341PyaWJOlpZDElqLIMQqVeXW7479OvdDbg2/El9ggSMkWZQVuy3tpxeibg6NyuT0Ij0kmXi251vab+T1hG0yMlpITra1n/Zm3M8oKxVYvSD0BRYRYhJ6NIUQgwiGwggxiVjsJ0IAIQgBhCAEEIIQQAhCwD6MXw8Ze3w1bT4vEo1Je9+j+GojR4gB+GeWtiQDIUlmUgmhh5gkZBohRuFLwtIvQpLIlwBCjEGvo0zNIMQY9L1c6+EoQjKpfyAkmUICCOEIgdRegyAkqaesBYSYwuz8StLu5zJ+ttfqk3Wsztpu5Uk+HCEZCEIQAghBCCAEIYAQhABCEAIIAYQgBBCCEEAIQgAhCAGEAEIQAghBCCAEIYAQhABCACEIAQtCopTBGKJayAx1MIaAFvKMOhjDiBYyrLJELWxHOxjSQnwqPSrL1MQ2dO0vqkxujLJeqDSo3Ffx0+j/TQNP1FrX/KDKqH7xlwADADHHxixr3zsSAAAAAElFTkSuQmCC"},function(e,exports,t){e.exports=t.p+"bb663f3714c694d4f8d32711debbed28.png"},function(e,exports){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAARCAYAAABegLWFAAAAAXNSR0IArs4c6QAAA75JREFUSA3tVW1olWUYvs57zvu+59058wz3oWdzzg1ryVaRwn5ouMSCLDBo+Kd+lCPJHxEGSlEhKPYz/OEPEQSNwq+gDymIiCCkDKoJ0y1DN+e2Nre2znY+3/Oe98Prfs4cGoSHBH+ED4O9z/Pc9/1c93Vdz3OAB+O/MRAKOCpNLXoBdC0E/t2XoVV6ylcTNracS+HAYKbSlHuOqwicUHt6zMa1nI8ao6KUewYmBe4qqwATFWeLHlKlAKvjEcm7L2PxpAupEg4P5fFik4lnk1H8NOPg0NU8dCLb2xHDd1MlDGVdHOisxkDaxdHhPHa3xxDm/hcTReTcAK+1WsqTZ8jydNHHyyujaFto5krGxVnGDeU81LBoL2Ol0WnbwynG/zxbgs+Wn24w8Mqqch0F7ptJG+8P5DBpB2BNdDPg2EgBv6Q8xdrrv2Ywzj0B2lKVw8kxB2MFn7FZDGY8TBQCyLWaYfIwD++b8+D6AVwu7uuoxmfjBewfzENUqIqEcJ0xvFvY2WZhZ18af2R8dNfr+JM19zEuwYO2NVtQBmquCmPXQxZiYTDAA+tif0ccdUYIUa69sdpCYzSEWs67lurYUKtDrPfjrIseMv1YIqwO/XrSUftP1EQUg0siGvpSDt67lINFij9fn8ALSYMgQ2gwQwScpQo+drRF8VFXAr2rooq982RRhgLXkdDRs8JCc5WGCTI0Zfs4R1mlk54mA4/W6LjBddnvqjVZnAx7ZQl2t8exhJ0WSMVzPPjdNXHVufi0k6CPj9igotjaaOA3WueT0SLlN7Gx3sD5v10k2fSrLZYCk6Y1RIEY2ZWx6DnpbC07/nTcwd6BLC5TLin+1sMxekUOCFDNpGH67gJl09nW1kYT8yVKmfXJegjb6ZU5zq9mPcWkyQdxaOH72ymH/org4ONxrFsawYnrtrJQkjXroxrmHB9f0pMmleom8DvAyeTJOkOB+2HGRYul4UMWShDF5XTZe9//5WIwnUaOLElvTVYYNr8FuPhEDD6Sd3mzAyXPnv4shASPPpkuAvOM+3jUZvMu6kyNVtGUd9/uz2CEPrw475LFKDbR8zIWmZPJ5mUGnk/qSrI9j8TQXl3eforBl5jYQlMKO3nP5221+UsRoN6M4E16sm+uBI9yNxLwpoYIUk6ALcsNbKjTcWS4gN/ZoNzgVtZ4h7Wf4Z7UPHQlT1+6qCXYDzpjeGmlxRegLOtd3zkBLcOnGbSFpPIKCKX8Bv7b/Na6/HfInjw7tw6+fS9P9i1a4B/lbw958P3/YeAme9qUxi4/HgMAAAAASUVORK5CYII="},function(e,exports){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAARCAYAAABegLWFAAAAAXNSR0IArs4c6QAABWFJREFUSA2tll1sVEUUx/8zd+92u7ItkBUqLYWSUqgUEkM0RlEDqBhRg5oYosYPjPrg14OB8EJCeDIkJuoDiSZAiPLAxwMSjImJaNTEFFEhLWClRWhLaVgQ2t12d+/dmfF/7u5CDURC8CS/nbkzc2f+c86cuavwP5gD1PmOpoXKojHUqk5bJK1CLdtrFJxvgRmwNqmUsqy7GPQAFAoOLlBAgRLGNXTW90zGmKB72rFMTmSx79ZsqG1G2np6e0yrFZzM15xSJlUTZqZICOUfQF+nz3FAiQPYdazg3Gstxwc7ZVgtCUmJiGniEWm7oZ1pb95cp9Xa0ZKprl1+R9RNVCitjn4TU7LEVZugFUkqH7fucE6n7pf2N8jbZDXpJd+Sn8k68p92srW1Rpns75OXLm9Pvb+eQQoi76iaOEY+347srp1QiUQ0hwuKmPLuWsQa7kBmwzooT/Z/rUVCHYyzZrFs4SeykDxI2sgS0kNuaKEfTqV3GoJ8HuHQEPzWNsTb70R47hxKly/DGMOjxpWKAWxYKvd3LIqeTbEY9bEbhn2mUCiXfPaU8ix0i4gTIV1kGVlOuH18ReaQVaSViDWSh4m44h7SkYKZZH0/mTt8CAOvrEah6yiKvScxuOZ5FP/qgz+vHY6ei9+1GJiUokCKLOThz29HYslDsAy7obe9mbOQfPRxls0UKMtzQ3DpGGuGfEleJyLoB1JfKdMsL5EHyN1kB5lNPiU9TYnEpp6xwGeM4OLULGeJC1ovjobNH9ObZ3Fhyydo3nsAZ1Y/DTs+jvicVjRu3Qm/sQn9Lz4HcyGDmV/shpeqgxkZwcCaF2B7jvPkeynOFtkB/k4j3CJ2kSeIJMp9RI7Bs6RIZCOSeJI8JQTGZ1i0YYt1vDTYKCahkrrkXpR/Upd+7aGUyWDgrTfhGNZ4+wKknnpGOtG78hHIWU09uQphMUTAa6kq7ijfl/BKhn5DbidZ0kVGiHjyGpPBkn9VZICIquTkv+pRm9Ywo6PIn/wTluLgx6Hr6+GY6fG5PO582ZuaRokbsc7VS1jF5CLsJreRfiKpJB7zK6WseV0Tr0mn3FPRIP5caWO7eFFMxEVjorCXM9WxQRIllk6jYf0GBMPnUOg/TQ9r8fRoVZy8L6GSsImJMLHK1Feeq23SrnwVC6wzsq6+GsqKIBlBbNRdbqtOJhksFnnT9xEMDuDEyhVIMtNLPHcq5kvf2WpYZWxVkNRFqAiXLUopz9Ivs0q21kX1kpenl0JZK1qvsnokVDzEj5WaPIVDK+KkX7zCxVUsFnnSBiFUPB6dx5YtnyH98qsIea0wtNmJ4mr4apKIiINEMvV70lQpx1mKUEmYeYTbszm6Oi8ekFCqmpro0jUUZXI5TF66DM0bN7GXuxJRFJxc0IG5O3ZCJ5MoDg/j0ncHEZ/RiPl798GfPh2jnZ0wMlarC+XgR69H2fgbq7+SXsJ8jjL2Q5b7yHkie99Dvia/bGxo6O4Pgpc8qLQItLyzckeOINfVxfMzjFI2i+FtW5E/dSpaVC7m7KFOjHV3Y+zECWT27sFYzx8o9PUxRppjt+Hi/v0wXoxOV5snhpLT37z9OLv5ozql38vxu2kLctvwbuHFa8MQjoddxXgHlkrQNQk4w9Mh/0tkFJNBi6fpJXnPyRHgdzVZW4u8s0dDePdOTIjopZv94bIfZI1tZ8SW+4kE9182xWvCCnyslk7HozMj/1zkn8mVsHEzEhIZW7Suj5V3lg6cLtyy50TKbq4zfdasRbzFZnP/U7h0koslePZauECbcq6ZX46ZWutaxusS+4ZIL8d1QbmLHDOmnct6Wp/PGnPkscHBv2XefwAFN2BLMaJizQAAAABJRU5ErkJggg=="},function(e,exports){},function(e,exports,t){t(265),e.exports=t(266)},,function(e,exports,t){e.exports=t.p+"794fdb644430b318ed4a3bebf79e3db4.svg"},function(e,exports,t){e.exports=t.p+"d2eae2774c1948a13da28e2ca9bf09ac.svg"}],[950]);